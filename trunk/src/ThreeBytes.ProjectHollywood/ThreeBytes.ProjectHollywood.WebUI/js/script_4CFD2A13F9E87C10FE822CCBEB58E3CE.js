window.log=function(){log.history=log.history||[];log.history.push(arguments);this.console&&console.log(Array.prototype.slice.call(arguments))};jQuery.effects||function(a,b){function d(b){return!b||typeof b=="number"||a.fx.speeds[b]?!0:typeof b=="string"&&!a.effects[b]?!0:!1}function c(e,b,c,d){typeof e=="object"&&(d=b,c=null,b=e,e=b.effect),a.isFunction(b)&&(d=b,c=null,b={});if(typeof b=="number"||a.fx.speeds[b])d=c,c=b,b={};a.isFunction(c)&&(d=c,c=null),b=b||{},c=c||b.duration,c=a.fx.off?0:typeof c=="number"?c:c in a.fx.speeds?a.fx.speeds[c]:a.fx.speeds._default,d=d||b.complete;return[e,b,c,d]}function l(d,b){var c={_:0},a;for(a in b)d[a]!=b[a]&&(c[a]=b[a]);return c}function i(c){var b,d;for(b in c)d=c[b],(d==null||a.isFunction(d)||b in k||/scrollbar/.test(b)||!/color/i.test(b)&&isNaN(parseFloat(d)))&&delete c[b];return c}function h(){var a=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,c={},b,d;if(a&&a.length&&a[0]&&a[a[0]]){var e=a.length;while(e--)b=a[e],typeof a[b]=="string"&&(d=b.replace(/\-(\w)/g,function(b,a){return a.toUpperCase()}),c[d]=a[b])}else for(b in a)typeof a[b]=="string"&&(c[b]=a[b]);return c}function j(b,d){var c;do{c=a.curCSS(b,d);if(c!=""&&c!="transparent"||a.nodeName(b,"body"))break;d="backgroundColor"}while(b=b.parentNode);return e(c)}function e(c){var b;return c&&c.constructor==Array&&c.length==3?c:(b=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(c))?[parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3],10)]:(b=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(c))?[parseFloat(b[1])*2.55,parseFloat(b[2])*2.55,parseFloat(b[3])*2.55]:(b=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(c))?[parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16)]:(b=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(c))?[parseInt(b[1]+b[1],16),parseInt(b[2]+b[2],16),parseInt(b[3]+b[3],16)]:(b=/rgba\(0, 0, 0, 0\)/.exec(c))?f.transparent:f[a.trim(c).toLowerCase()]}a.effects={},a.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(c,b){a.fx.step[b]=function(a){a.colorInit||(a.start=j(a.elem,b),a.end=e(a.end),a.colorInit=!0),a.elem.style[b]="rgb("+Math.max(Math.min(parseInt(a.pos*(a.end[0]-a.start[0])+a.start[0],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[1]-a.start[1])+a.start[1],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[2]-a.start[2])+a.start[2],10),255),0)+")"}});var f={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},g=["add","remove","toggle"],k={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.effects.animateClass=function(b,e,c,d){a.isFunction(c)&&(d=c,c=null);return this.queue(function(){var f=a(this),j=f.attr("style")||" ",m=i(h.call(this)),k,n=f.attr("class");a.each(g,function(c,a){b[a]&&f[a+"Class"](b[a])}),k=i(h.call(this)),f.attr("class",n),f.animate(l(m,k),{queue:!1,duration:e,easing:c,complete:function(){a.each(g,function(c,a){b[a]&&f[a+"Class"](b[a])}),typeof f.attr("style")=="object"?(f.attr("style").cssText="",f.attr("style").cssText=j):f.attr("style",j),d&&d.apply(this,arguments),a.dequeue(this)}})})},a.fn.extend({_addClass:a.fn.addClass,addClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{add:b},c,d,e]):this._addClass(b)},_removeClass:a.fn.removeClass,removeClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{remove:b},c,d,e]):this._removeClass(b)},_toggleClass:a.fn.toggleClass,toggleClass:function(d,c,e,f,g){return typeof c=="boolean"||c===b?e?a.effects.animateClass.apply(this,[c?{add:d}:{remove:d},e,f,g]):this._toggleClass(d,c):a.effects.animateClass.apply(this,[{toggle:d},c,e,f])},switchClass:function(b,c,d,e,f){return a.effects.animateClass.apply(this,[{add:c,remove:b},d,e,f])}}),a.extend(a.effects,{version:"1.8.18",save:function(c,b){for(var a=0;a<b.length;a++)b[a]!==null&&c.data("ec.storage."+b[a],c[0].style[b[a]])},restore:function(c,b){for(var a=0;a<b.length;a++)b[a]!==null&&c.css(b[a],c.data("ec.storage."+b[a]))},setMode:function(b,a){a=="toggle"&&(a=b.is(":hidden")?"show":"hide");return a},getBaseline:function(c,d){var a,b;switch(c[0]){case"top":a=0;break;case"middle":a=.5;break;case"bottom":a=1;break;default:a=c[0]/d.height}switch(c[1]){case"left":b=0;break;case"center":b=.5;break;case"right":b=1;break;default:b=c[1]/d.width}return{x:b,y:a}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e=document.activeElement;b.wrap(d),(b[0]===e||a.contains(b[0],e))&&a(e).focus(),d=b.parent(),b.css("position")=="static"?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(d,a){c[a]=b.css(a),isNaN(parseInt(c[a],10))&&(c[a]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"}));return d.css(c).show()},removeWrapper:function(b){var d,c=document.activeElement;if(b.parent().is(".ui-effects-wrapper")){d=b.parent().replaceWith(b),(b[0]===c||a.contains(b[0],c))&&a(c).focus();return d}return b},setTransition:function(c,d,e,b){b=b||{},a.each(d,function(d,a){unit=c.cssUnit(a),unit[0]>0&&(b[a]=unit[0]*e+unit[1])});return b}}),a.fn.extend({effect:function(g){var d=c.apply(this,arguments),b={options:d[1],duration:d[2],callback:d[3]},e=b.options.mode,f=a.effects[g];return a.fx.off||!f?e?this[e](b.duration,b.callback):this.each(function(){b.callback&&b.callback.call(this)}):f.call(this,b)},_show:a.fn.show,show:function(b){if(d(b))return this._show.apply(this,arguments);var a=c.apply(this,arguments);a[1].mode="show";return this.effect.apply(this,a)},_hide:a.fn.hide,hide:function(b){if(d(b))return this._hide.apply(this,arguments);var a=c.apply(this,arguments);a[1].mode="hide";return this.effect.apply(this,a)},__toggle:a.fn.toggle,toggle:function(b){if(d(b)||typeof b=="boolean"||a.isFunction(b))return this.__toggle.apply(this,arguments);var e=c.apply(this,arguments);e[1].mode="toggle";return this.effect.apply(this,e)},cssUnit:function(d){var b=this.css(d),c=[];a.each(["em","px","%","pt"],function(d,a){b.indexOf(a)>0&&(c=[parseFloat(b),a])});return c}}),a.easing.jswing=a.easing.swing,a.extend(a.easing,{def:"easeOutQuad",swing:function(b,c,d,e,f){return a.easing[a.easing.def](b,c,d,e,f)},easeInQuad:function(e,a,b,c,d){return c*(a/=d)*a+b},easeOutQuad:function(e,a,b,c,d){return-c*(a/=d)*(a-2)+b},easeInOutQuad:function(e,a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b},easeInCubic:function(e,a,b,c,d){return c*(a/=d)*a*a+b},easeOutCubic:function(e,a,b,c,d){return c*((a=a/d-1)*a*a+1)+b},easeInOutCubic:function(e,a,b,c,d){return(a/=d/2)<1?c/2*a*a*a+b:c/2*((a-=2)*a*a+2)+b},easeInQuart:function(e,a,b,c,d){return c*(a/=d)*a*a*a+b},easeOutQuart:function(e,a,b,c,d){return-c*((a=a/d-1)*a*a*a-1)+b},easeInOutQuart:function(e,a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a+b:-c/2*((a-=2)*a*a*a-2)+b},easeInQuint:function(e,a,b,c,d){return c*(a/=d)*a*a*a*a+b},easeOutQuint:function(e,a,b,c,d){return c*((a=a/d-1)*a*a*a*a+1)+b},easeInOutQuint:function(e,a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a*a+b:c/2*((a-=2)*a*a*a*a+2)+b},easeInSine:function(e,b,c,a,d){return-a*Math.cos(b/d*(Math.PI/2))+a+c},easeOutSine:function(e,a,b,c,d){return c*Math.sin(a/d*(Math.PI/2))+b},easeInOutSine:function(e,a,b,c,d){return-c/2*(Math.cos(Math.PI*a/d)-1)+b},easeInExpo:function(e,a,b,c,d){return a==0?b:c*Math.pow(2,10*(a/d-1))+b},easeOutExpo:function(e,a,b,c,d){return a==d?b+c:c*(-Math.pow(2,-10*a/d)+1)+b},easeInOutExpo:function(e,a,b,c,d){return a==0?b:a==d?b+c:(a/=d/2)<1?c/2*Math.pow(2,10*(a-1))+b:c/2*(-Math.pow(2,-10*--a)+2)+b},easeInCirc:function(e,a,b,c,d){return-c*(Math.sqrt(1-(a/=d)*a)-1)+b},easeOutCirc:function(e,a,b,c,d){return c*Math.sqrt(1-(a=a/d-1)*a)+b},easeInOutCirc:function(e,a,b,c,d){return(a/=d/2)<1?-c/2*(Math.sqrt(1-a*a)-1)+b:c/2*(Math.sqrt(1-(a-=2)*a)+1)+b},easeInElastic:function(h,c,e,a,f){var g=1.70158,b=0,d=a;if(c==0)return e;if((c/=f)==1)return e+a;b||(b=f*.3);if(d<Math.abs(a)){d=a;var g=b/4}else var g=b/(2*Math.PI)*Math.asin(a/d);return-(d*Math.pow(2,10*(c-=1))*Math.sin((c*f-g)*2*Math.PI/b))+e},easeOutElastic:function(h,c,e,a,f){var g=1.70158,b=0,d=a;if(c==0)return e;if((c/=f)==1)return e+a;b||(b=f*.3);if(d<Math.abs(a)){d=a;var g=b/4}else var g=b/(2*Math.PI)*Math.asin(a/d);return d*Math.pow(2,-10*c)*Math.sin((c*f-g)*2*Math.PI/b)+a+e},easeInOutElastic:function(h,a,e,b,f){var g=1.70158,c=0,d=b;if(a==0)return e;if((a/=f/2)==2)return e+b;c||(c=f*.3*1.5);if(d<Math.abs(b)){d=b;var g=c/4}else var g=c/(2*Math.PI)*Math.asin(b/d);return a<1?-.5*d*Math.pow(2,10*(a-=1))*Math.sin((a*f-g)*2*Math.PI/c)+e:d*Math.pow(2,-10*(a-=1))*Math.sin((a*f-g)*2*Math.PI/c)*.5+b+e},easeInBack:function(g,c,d,e,f,a){a==b&&(a=1.70158);return e*(c/=f)*c*((a+1)*c-a)+d},easeOutBack:function(g,a,d,e,f,c){c==b&&(c=1.70158);return e*((a=a/f-1)*a*((c+1)*a+c)+1)+d},easeInOutBack:function(g,a,d,e,f,c){c==b&&(c=1.70158);return(a/=f/2)<1?e/2*a*a*(((c*=1.525)+1)*a-c)+d:e/2*((a-=2)*a*(((c*=1.525)+1)*a+c)+2)+d},easeInBounce:function(d,e,f,b,c){return b-a.easing.easeOutBounce(d,c-e,0,b,c)+f},easeOutBounce:function(e,a,b,c,d){return(a/=d)<1/2.75?c*7.5625*a*a+b:a<2/2.75?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:a<2.5/2.75?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+.984375)+b},easeInOutBounce:function(e,c,f,d,b){return c<b/2?a.easing.easeInBounce(e,c*2,0,d,b)*.5+f:a.easing.easeOutBounce(e,c*2-b,0,d,b)*.5+d*.5+f}})}(jQuery);(function(a){a.effects.highlight=function(b){return this.queue(function(){var c=a(this),e=["backgroundImage","backgroundColor","opacity"],d=a.effects.setMode(c,b.options.mode||"show"),f={backgroundColor:c.css("backgroundColor")};d=="hide"&&(f.opacity=0),a.effects.save(c,e),c.show().css({backgroundImage:"none",backgroundColor:b.options.color||"#ffff99"}).animate(f,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){d=="hide"&&c.hide(),a.effects.restore(c,e),d=="show"&&!a.support.opacity&&this.style.removeAttribute("filter"),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}})(jQuery);
/*
* jQuery Templates Plugin 1.0.0pre
* http://github.com/jquery/jquery-tmpl
* Requires jQuery 1.4.2
*
* Copyright Software Freedom Conservancy, Inc.
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*/
(function(a){var r=a.fn.domManip,d="_tmplitem",q=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,b={},f={},e,p={key:0,data:{}},i=0,c=0,l=[];function g(g,d,h,e){var c={data:e||e===0||e===false?e:d?d.data:{},_wrap:d?d._wrap:null,tmpl:null,parent:d||null,nodes:[],calls:u,nest:w,wrap:x,html:v,update:t};g&&a.extend(c,g,{nodes:[],parent:d});if(h){c.tmpl=h;c._ctnt=c._ctnt||c.tmpl(a,c);c.key=++i;(l.length?f:b)[i]=c}return c}a.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(f,d){a.fn[f]=function(n){var g=[],i=a(n),k,h,m,l,j=this.length===1&&this[0].parentNode;e=b||{};if(j&&j.nodeType===11&&j.childNodes.length===1&&i.length===1){i[d](this[0]);g=this}else{for(h=0,m=i.length;h<m;h++){c=h;k=(h>0?this.clone(true):this).get();a(i[h])[d](k);g=g.concat(k)}c=0;g=this.pushStack(g,f,i.selector)}l=e;e=null;a.tmpl.complete(l);return g}});a.fn.extend({tmpl:function(d,c,b){return a.tmpl(this[0],d,c,b)},tmplItem:function(){return a.tmplItem(this[0])},template:function(b){return a.template(b,this[0])},domManip:function(d,m,k){if(d[0]&&a.isArray(d[0])){var g=a.makeArray(arguments),h=d[0],j=h.length,i=0,f;while(i<j&&!(f=a.data(h[i++],"tmplItem")));if(f&&c)g[2]=function(b){a.tmpl.afterManip(this,b,k)};r.apply(this,g)}else r.apply(this,arguments);c=0;!e&&a.tmpl.complete(b);return this}});a.extend({tmpl:function(d,h,e,c){var i,k=!c;if(k){c=p;d=a.template[d]||a.template(null,d);f={}}else if(!d){d=c.tmpl;b[c.key]=c;c.nodes=[];c.wrapped&&n(c,c.wrapped);return a(j(c,null,c.tmpl(a,c)))}if(!d)return[];if(typeof h==="function")h=h.call(c||{});e&&e.wrapped&&n(e,e.wrapped);i=a.isArray(h)?a.map(h,function(a){return a?g(e,c,d,a):null}):[g(e,c,d,h)];return k?a(j(c,null,i)):i},tmplItem:function(b){var c;if(b instanceof a)b=b[0];while(b&&b.nodeType===1&&!(c=a.data(b,"tmplItem"))&&(b=b.parentNode));return c||p},template:function(c,b){if(b){if(typeof b==="string")b=o(b);else if(b instanceof a)b=b[0]||{};if(b.nodeType)b=a.data(b,"tmpl")||a.data(b,"tmpl",o(b.innerHTML));return typeof c==="string"?a.template[c]=b:b}return c?typeof c!=="string"?a.template(null,c):a.template[c]||a.template(null,q.test(c)?c:a(c)):null},encode:function(a){return(""+a).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}});a.extend(a.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){__=__.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(__,$1,$2);__=[];",close:"call=$item.calls();__=call._.concat($item.wrap(call,__));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){__.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},"!":{open:""}},complete:function(){b={}},afterManip:function(f,b,d){var e=b.nodeType===11?a.makeArray(b.childNodes):b.nodeType===1?[b]:[];d.call(f,b);m(e);c++}});function j(e,g,f){var b,c=f?a.map(f,function(a){return typeof a==="string"?e.key?a.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+d+'="'+e.key+'" $2'):a:j(a,e,a._ctnt)}):e;if(g)return c;c=c.join("");c.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(f,c,e,d){b=a(e).get();m(b);if(c)b=k(c).concat(b);if(d)b=b.concat(k(d))});return b?b:k(c)}function k(c){var b=document.createElement("div");b.innerHTML=c;return a.makeArray(b.childNodes)}function o(b){return new Function("jQuery","$item","var $=jQuery,call,__=[],$data=$item.data;with($data){__.push('"+a.trim(b).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(m,l,k,g,b,c,d){var j=a.tmpl.tag[k],i,e,f;if(!j)throw"Unknown template tag: "+k;i=j._default||[];if(c&&!/\w$/.test(b)){b+=c;c=""}if(b){b=h(b);d=d?","+h(d)+")":c?")":"";e=c?b.indexOf(".")>-1?b+h(c):"("+b+").call($item"+d:b;f=c?e:"(typeof("+b+")==='function'?("+b+").call($item):("+b+"))"}else f=e=i.$1||"null";g=h(g);return"');"+j[l?"close":"open"].split("$notnull_1").join(b?"typeof("+b+")!=='undefined' && ("+b+")!=null":"true").split("$1a").join(f).split("$1").join(e).split("$2").join(g||i.$2||"")+"__.push('"})+"');}return __;")}function n(c,b){c._wrap=j(c,true,a.isArray(b)?b:[q.test(b)?b:a(b).html()]).join("")}function h(a){return a?a.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function s(b){var a=document.createElement("div");a.appendChild(b.cloneNode(true));return a.innerHTML}function m(o){var n="_"+c,k,j,l={},e,p,h;for(e=0,p=o.length;e<p;e++){if((k=o[e]).nodeType!==1)continue;j=k.getElementsByTagName("*");for(h=j.length-1;h>=0;h--)m(j[h]);m(k)}function m(j){var p,h=j,k,e,m;if(m=j.getAttribute(d)){while(h.parentNode&&(h=h.parentNode).nodeType===1&&!(p=h.getAttribute(d)));if(p!==m){h=h.parentNode?h.nodeType===11?0:h.getAttribute(d)||0:0;if(!(e=b[m])){e=f[m];e=g(e,b[h]||f[h]);e.key=++i;b[i]=e}c&&o(m)}j.removeAttribute(d)}else if(c&&(e=a.data(j,"tmplItem"))){o(e.key);b[e.key]=e;h=a.data(j.parentNode,"tmplItem");h=h?h.key:0}if(e){k=e;while(k&&k.key!=h){k.nodes.push(j);k=k.parent}delete e._ctnt;delete e._wrap;a.data(j,"tmplItem",e)}function o(a){a=a+n;e=l[a]=l[a]||g(e,b[e.parent.key+n]||e.parent)}}}function u(a,d,c,b){if(!a)return l.pop();l.push({_:a,tmpl:d,item:this,data:c,options:b})}function w(d,c,b){return a.tmpl(a.template(d),c,b,this)}function x(b,d){var c=b.options||{};c.wrapped=d;return a.tmpl(a.template(b.tmpl),b.data,c,b.item)}function v(d,c){var b=this._wrap;return a.map(a(a.isArray(b)?b.join(""):b).filter(d||"*"),function(a){return c?a.innerText||a.textContent:a.outerHTML||s(a)})}function t(){var b=this.nodes;a.tmpl(null,null,null,this).insertBefore(b[0]);a(b).remove()}})(jQuery);(function(a){var i={common:{type:"line",lineColor:"#00f",fillColor:"#cdf",defaultPixelsPerValue:3,width:"auto",height:"auto",composite:false,tagValuesAttribute:"values",tagOptionsPrefix:"spark",enableTagOptions:false},line:{spotColor:"#f80",spotRadius:1.5,minSpotColor:"#f80",maxSpotColor:"#f80",lineWidth:1,normalRangeMin:undefined,normalRangeMax:undefined,normalRangeColor:"#ccc",drawNormalOnTop:false,chartRangeMin:undefined,chartRangeMax:undefined,chartRangeMinX:undefined,chartRangeMaxX:undefined},bar:{barColor:"#00f",negBarColor:"#f44",zeroColor:undefined,nullColor:undefined,zeroAxis:undefined,barWidth:4,barSpacing:1,chartRangeMax:undefined,chartRangeMin:undefined,chartRangeClip:false,colorMap:undefined},tristate:{barWidth:4,barSpacing:1,posBarColor:"#6f6",negBarColor:"#f44",zeroBarColor:"#999",colorMap:{}},discrete:{lineHeight:"auto",thresholdColor:undefined,thresholdValue:0,chartRangeMax:undefined,chartRangeMin:undefined,chartRangeClip:false},bullet:{targetColor:"red",targetWidth:3,performanceColor:"blue",rangeColors:["#D3DAFE","#A8B6FF","#7F94FF"],base:undefined},pie:{sliceColors:["#f00","#0f0","#00f"]},box:{raw:false,boxLineColor:"black",boxFillColor:"#cdf",whiskerColor:"black",outlierLineColor:"#333",outlierFillColor:"white",medianColor:"red",showOutliers:true,outlierIQR:1.5,spotRadius:1.5,target:undefined,targetColor:"#4a2",chartRangeMax:undefined,chartRangeMin:undefined}},b,f,g;a.fn.simpledraw=function(c,b,d){if(d&&this[0].VCanvas)return this[0].VCanvas;if(c===undefined)c=a(this).innerWidth();if(b===undefined)b=a(this).innerHeight();return a.browser.hasCanvas?new f(c,b,this):a.browser.msie?new g(c,b,this):false};var c=[];a.fn.sparkline=function(b,d){return this.each(function(){var e=new a.fn.sparkline.options(this,d),f=function(){var c,h,g;if(b==="html"||b===undefined){var d=this.getAttribute(e.get("tagValuesAttribute"));if(d===undefined||d===null)d=a(this).html();c=d.replace(/(^\s*<!--)|(-->\s*$)|\s+/g,"").split(",")}else c=b;h=e.get("width")=="auto"?c.length*e.get("defaultPixelsPerValue"):e.get("width");if(e.get("height")=="auto"){if(!e.get("composite")||!this.VCanvas){var f=document.createElement("span");f.innerHTML="a";a(this).html(f);g=a(f).innerHeight();a(f).remove()}}else g=e.get("height");a.fn.sparkline[e.get("type")].call(this,c,e,h,g)};if(a(this).html()&&a(this).is(":hidden")||a.fn.jquery<"1.3.0"&&a(this).parents().is(":hidden")||!a(this).parents("body").length)c.push([this,f]);else f.call(this)})};a.fn.sparkline.defaults=i;a.sparkline_display_visible=function(){for(var b=c.length-1;b>=0;b--){var d=c[b][0];if(a(d).is(":visible")&&!a(d).parents().is(":hidden")){c[b][1].call(d);c.splice(b,1)}}};var d={},e=function(a){switch(a){case"undefined":a=undefined;break;case"null":a=null;break;case"true":a=true;break;case"false":a=false;break;default:var b=parseFloat(a);if(a==b)a=b}return a};a.fn.sparkline.options=function(h,b){var c;this.userOptions=b=b||{};this.tag=h;this.tagValCache={};var e=a.fn.sparkline.defaults,f=e.common;this.tagOptionsPrefix=b.enableTagOptions&&(b.tagOptionsPrefix||f.tagOptionsPrefix);var g=this.getTagSetting("type");if(g===d)c=e[b.type||f.type];else c=e[g];this.mergedOptions=a.extend({},f,c,b)};a.fn.sparkline.options.prototype.getTagSetting=function(h){var a,b,c=this.tagOptionsPrefix;if(c===false||c===undefined)return d;if(this.tagValCache.hasOwnProperty(h))a=this.tagValCache.key;else{a=this.tag.getAttribute(c+h);if(a===undefined||a===null)a=d;else if(a.substr(0,1)=="["){a=a.substr(1,a.length-2).split(",");for(b=a.length;b--;)a[b]=e(a[b].replace(/(^\s*)|(\s*$)/g,""))}else if(a.substr(0,1)=="{"){var g=a.substr(1,a.length-2).split(",");a={};for(b=g.length;b--;){var f=g[b].split(":",2);a[f[0].replace(/(^\s*)|(\s*$)/g,"")]=e(f[1].replace(/(^\s*)|(\s*$)/g,""))}}else a=e(a);this.tagValCache.key=a}return a};a.fn.sparkline.options.prototype.get=function(b){var a=this.getTagSetting(b);return a!==d?a:this.mergedOptions[b]};a.fn.sparkline.line=function(n,b,L,K){for(var j=[],g=[],v=[],c=0;c<n.length;c++){var y=n[c],I=typeof n[c]=="string",J=typeof n[c]=="object"&&n[c]instanceof Array,B=I&&n[c].split(":");if(I&&B.length==2){j.push(Number(B[0]));g.push(Number(B[1]));v.push(Number(B[1]))}else if(J){j.push(y[0]);g.push(y[1]);v.push(y[1])}else{j.push(c);if(n[c]===null||n[c]=="null")g.push(null);else{g.push(Number(y));v.push(Number(y))}}}if(b.get("xvalues"))j=b.get("xvalues");var i=Math.max.apply(Math,v),H=i,h=Math.min.apply(Math,v),E=h,A=Math.max.apply(Math,j),o=Math.min.apply(Math,j),u=b.get("normalRangeMin"),z=b.get("normalRangeMax");if(u!==undefined){if(u<h)h=u;if(z>i)i=z}if(b.get("chartRangeMin")!==undefined&&(b.get("chartRangeClip")||b.get("chartRangeMin")<h))h=b.get("chartRangeMin");if(b.get("chartRangeMax")!==undefined&&(b.get("chartRangeClip")||b.get("chartRangeMax")>i))i=b.get("chartRangeMax");if(b.get("chartRangeMinX")!==undefined&&(b.get("chartRangeClipX")||b.get("chartRangeMinX")<o))o=b.get("chartRangeMinX");if(b.get("chartRangeMaxX")!==undefined&&(b.get("chartRangeClipX")||b.get("chartRangeMaxX")>A))A=b.get("chartRangeMaxX");var w=A-o===0?1:A-o,s=i-h===0?1:i-h,t=g.length-1;if(t<1){this.innerHTML="";return}var l=a(this).simpledraw(L,K,b.get("composite"));if(l){var k=l.pixel_width,e=l.pixel_height,m=0,p=0,f=b.get("spotRadius");if(f&&(k<f*4||e<f*4))f=0;if(f){if(b.get("minSpotColor")||b.get("spotColor")&&g[t]==h)e-=Math.ceil(f);if(b.get("maxSpotColor")||b.get("spotColor")&&g[t]==i){e-=Math.ceil(f);m+=Math.ceil(f)}if(b.get("minSpotColor")||b.get("maxSpotColor")&&(g[0]==h||g[0]==i)){p+=Math.ceil(f);k-=Math.ceil(f)}if(b.get("spotColor")||b.get("minSpotColor")||b.get("maxSpotColor")&&(g[t]==h||g[t]==i))k-=Math.ceil(f)}e--;var G=function(){if(u!==undefined){var c=m+Math.round(e-e*((z-h)/s)),a=Math.round(e*(z-u)/s);l.drawRect(p,c,k,a,undefined,b.get("normalRangeColor"))}};!b.get("drawNormalOnTop")&&G();var d=[],F=[d],q,r,M=g.length;for(c=0;c<M;c++){q=j[c];r=g[c];if(r===null){if(c)if(g[c-1]!==null){d=[];F.push(d)}}else{if(r<h)r=h;if(r>i)r=i;!d.length&&d.push([p+Math.round((q-o)*(k/w)),m+e]);d.push([p+Math.round((q-o)*(k/w)),m+Math.round(e-e*((r-h)/s))])}}var D=[],C=[],x=F.length;for(c=0;c<x;c++){d=F[c];if(!d.length)continue;if(b.get("fillColor")){d.push([d[d.length-1][0],m+e-1]);C.push(d.slice(0));d.pop()}if(d.length>2)d[0]=[d[0][0],d[1][1]];D.push(d)}x=C.length;for(c=0;c<x;c++)l.drawShape(C[c],undefined,b.get("fillColor"));b.get("drawNormalOnTop")&&G();x=D.length;for(c=0;c<x;c++)l.drawShape(D[c],b.get("lineColor"),undefined,b.get("lineWidth"));f&&b.get("spotColor")&&l.drawCircle(p+Math.round(j[j.length-1]*(k/w)),m+Math.round(e-e*((g[t]-h)/s)),f,undefined,b.get("spotColor"));if(i!=E){if(f&&b.get("minSpotColor")){q=j[a.inArray(E,g)];l.drawCircle(p+Math.round((q-o)*(k/w)),m+Math.round(e-e*((E-h)/s)),f,undefined,b.get("minSpotColor"))}if(f&&b.get("maxSpotColor")){q=j[a.inArray(H,g)];l.drawCircle(p+Math.round((q-o)*(k/w)),m+Math.round(e-e*((H-h)/s)),f,undefined,b.get("maxSpotColor"))}}}else this.innerHTML=""};a.fn.sparkline.bar=function(f,b,s,g){s=f.length*b.get("barWidth")+(f.length-1)*b.get("barSpacing");for(var o=[],d=0,t=f.length;d<t;d++)if(f[d]=="null"||f[d]===null)f[d]=null;else{f[d]=Number(f[d]);o.push(Number(f[d]))}var k=Math.max.apply(Math,o),c=Math.min.apply(Math,o);if(b.get("chartRangeMin")!==undefined&&(b.get("chartRangeClip")||b.get("chartRangeMin")<c))c=b.get("chartRangeMin");if(b.get("chartRangeMax")!==undefined&&(b.get("chartRangeClip")||b.get("chartRangeMax")>k))k=b.get("chartRangeMax");var j=b.get("zeroAxis");if(j===undefined)j=c<0;var q=k-c===0?1:k-c,l,m;if(a.isArray(b.get("colorMap"))){l=b.get("colorMap");m=null}else{l=null;m=b.get("colorMap")}var p=a(this).simpledraw(s,g,b.get("composite"));if(p){var h,i=p.pixel_height,r=c<0&&j?i-Math.round(i*(Math.abs(c)/q))-1:i-1;for(d=f.length;d--;){var u=d*(b.get("barWidth")+b.get("barSpacing")),n,e=f[d];if(e===null)if(b.get("nullColor")){h=b.get("nullColor");e=j&&c<0?0:c;g=1;n=j&&c<0?r:i-g}else continue;else{if(e<c)e=c;if(e>k)e=k;h=e<0?b.get("negBarColor"):b.get("barColor");if(j&&c<0){g=Math.round(i*(Math.abs(e)/q))+1;n=e<0?r:r-g}else{g=Math.round(i*((e-c)/q))+1;n=i-g}if(e===0&&b.get("zeroColor")!==undefined)h=b.get("zeroColor");if(m&&m[e])h=m[e];else if(l&&l.length>d)h=l[d];if(h===null)continue}p.drawRect(u,n,b.get("barWidth")-1,g-1,h,h)}}else this.innerHTML=""};a.fn.sparkline.tristate=function(c,b,l,h){c=a.map(c,Number);l=c.length*b.get("barWidth")+(c.length-1)*b.get("barSpacing");var f,g;if(a.isArray(b.get("colorMap"))){f=b.get("colorMap");g=null}else{f=null;g=b.get("colorMap")}var k=a(this).simpledraw(l,h,b.get("composite"));if(k)for(var m=k.pixel_height,i=Math.round(m/2),e=c.length;e--;){var n=e*(b.get("barWidth")+b.get("barSpacing")),j,d;if(c[e]<0){j=i;h=i-1;d=b.get("negBarColor")}else if(c[e]>0){j=0;h=i-1;d=b.get("posBarColor")}else{j=i-1;h=2;d=b.get("zeroBarColor")}if(g&&g[c[e]])d=g[c[e]];else if(f&&f.length>e)d=f[e];if(d===null)continue;k.drawRect(n,j,b.get("barWidth")-1,h-1,d,d)}else this.innerHTML=""};a.fn.sparkline.discrete=function(c,b,g,p){c=a.map(c,Number);g=b.get("width")=="auto"?c.length*2:g;var o=Math.floor(g/c.length),h=a(this).simpledraw(g,p,b.get("composite"));if(h){var j=h.pixel_height,k=b.get("lineHeight")=="auto"?Math.round(j*.3):b.get("lineHeight"),l=j-k,d=Math.min.apply(Math,c),f=Math.max.apply(Math,c);if(b.get("chartRangeMin")!==undefined&&(b.get("chartRangeClip")||b.get("chartRangeMin")<d))d=b.get("chartRangeMin");if(b.get("chartRangeMax")!==undefined&&(b.get("chartRangeClip")||b.get("chartRangeMax")>f))f=b.get("chartRangeMax");for(var q=f-d,i=c.length;i--;){var e=c[i];if(e<d)e=d;if(e>f)e=f;var n=i*o,m=Math.round(l-l*((e-d)/q));h.drawLine(n,m,n,m+k,b.get("thresholdColor")&&e<b.get("thresholdValue")?b.get("thresholdColor"):b.get("lineColor"))}}else this.innerHTML=""};a.fn.sparkline.bullet=function(c,b,j,r){c=a.map(c,Number);j=b.get("width")=="auto"?"4.0em":j;var e=a(this).simpledraw(j,r,b.get("composite"));if(e&&c.length>1){var h=e.pixel_width-Math.ceil(b.get("targetWidth")/2),f=e.pixel_height,d=Math.min.apply(Math,c),t=Math.max.apply(Math,c);if(b.get("base")===undefined)d=d<0?d:0;else d=b.get("base");for(var i=t-d,g=2,s=c.length;g<s;g++){var p=c[g],m=Math.round(h*((p-d)/i));e.drawRect(0,0,m-1,f-1,b.get("rangeColors")[g-2],b.get("rangeColors")[g-2])}var q=c[1],n=Math.round(h*((q-d)/i));e.drawRect(0,Math.round(f*.3),n-1,Math.round(f*.4)-1,b.get("performanceColor"),b.get("performanceColor"));var o=c[0],u=Math.round(h*((o-d)/i)-b.get("targetWidth")/2),k=Math.round(f*.1),l=f-k*2;e.drawRect(u,k,b.get("targetWidth")-1,l-1,b.get("targetColor"),b.get("targetColor"))}else this.innerHTML=""};a.fn.sparkline.pie=function(b,d,i,k){b=a.map(b,Number);i=d.get("width")=="auto"?k:i;var f=a(this).simpledraw(i,k,d.get("composite"));if(f&&b.length>1){for(var m=f.pixel_width,l=f.pixel_height,g=Math.floor(Math.min(m,l)/2),h=0,e=0,n=2*Math.PI,c=b.length;c--;)h+=b[c];if(d.get("offset"))e+=2*Math.PI*(d.get("offset")/360);var p=b.length;for(c=0;c<p;c++){var o=e,j=e;if(h>0)j=e+n*(b[c]/h);f.drawPieSlice(g,g,g,o,j,undefined,d.get("sliceColors")[c%d.get("sliceColors").length]);e=j}}};var h=function(a,b){if(b==2){var c=Math.floor(a.length/2);return a.length%2?a[c]:(a[c]+a[c+1])/2}else{var d=Math.floor(a.length/4);return a.length%2?(a[d*b]+a[d*b+1])/2:a[d*b]}};a.fn.sparkline.box=function(c,b,t,x){c=a.map(c,Number);t=b.get("width")=="auto"?"4.0em":t;var e=b.get("chartRangeMin")===undefined?Math.min.apply(Math,c):b.get("chartRangeMin"),v=b.get("chartRangeMax")===undefined?Math.max.apply(Math,c):b.get("chartRangeMax"),i=a(this).simpledraw(t,x,b.get("composite")),u=c.length,j,p,l,o,m,k,q;if(i&&c.length>1){var s=i.pixel_width,d=i.pixel_height;if(b.get("raw"))if(b.get("showOutliers")&&c.length>5){p=c[0];j=c[1];l=c[2];o=c[3];m=c[4];k=c[5];q=c[6]}else{j=c[0];l=c[1];o=c[2];m=c[3];k=c[4]}else{c.sort(function(a,b){return a-b});l=h(c,1);o=h(c,2);m=h(c,3);var w=m-l;if(b.get("showOutliers")){j=undefined;k=undefined;for(var n=0;n<u;n++){if(j===undefined&&c[n]>l-w*b.get("outlierIQR"))j=c[n];if(c[n]<m+w*b.get("outlierIQR"))k=c[n]}p=c[0];q=c[u-1]}else{j=c[0];k=c[u-1]}}var f=s/(v-e+1),g=0;if(b.get("showOutliers")){g=Math.ceil(b.get("spotRadius"));s-=2*Math.ceil(b.get("spotRadius"));f=s/(v-e+1);p<j&&i.drawCircle((p-e)*f+g,d/2,b.get("spotRadius"),b.get("outlierLineColor"),b.get("outlierFillColor"));q>k&&i.drawCircle((q-e)*f+g,d/2,b.get("spotRadius"),b.get("outlierLineColor"),b.get("outlierFillColor"))}i.drawRect(Math.round((l-e)*f+g),Math.round(d*.1),Math.round((m-l)*f),Math.round(d*.8),b.get("boxLineColor"),b.get("boxFillColor"));i.drawLine(Math.round((j-e)*f+g),Math.round(d/2),Math.round((l-e)*f+g),Math.round(d/2),b.get("lineColor"));i.drawLine(Math.round((j-e)*f+g),Math.round(d/4),Math.round((j-e)*f+g),Math.round(d-d/4),b.get("whiskerColor"));i.drawLine(Math.round((k-e)*f+g),Math.round(d/2),Math.round((m-e)*f+g),Math.round(d/2),b.get("lineColor"));i.drawLine(Math.round((k-e)*f+g),Math.round(d/4),Math.round((k-e)*f+g),Math.round(d-d/4),b.get("whiskerColor"));i.drawLine(Math.round((o-e)*f+g),Math.round(d*.1),Math.round((o-e)*f+g),Math.round(d*.9),b.get("medianColor"));if(b.get("target")){var r=Math.ceil(b.get("spotRadius"));i.drawLine(Math.round((b.get("target")-e)*f+g),Math.round(d/2-r),Math.round((b.get("target")-e)*f+g),Math.round(d/2+r),b.get("targetColor"));i.drawLine(Math.round((b.get("target")-e)*f+g-r),Math.round(d/2),Math.round((b.get("target")-e)*f+g+r),Math.round(d/2),b.get("targetColor"))}}else this.innerHTML=""};a.browser.msie&&!document.namespaces.v&&document.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML");if(a.browser.hasCanvas===undefined){var j=document.createElement("canvas");a.browser.hasCanvas=j.getContext!==undefined}b=function(){};b.prototype={init:function(c,b,a){this.width=c;this.height=b;this.target=a;if(a[0])a=a[0];a.VCanvas=this},drawShape:function(){alert("drawShape not implemented")},drawLine:function(c,e,d,f,a,b){return this.drawShape([[c,e],[d,f]],a,b)},drawCircle:function(){alert("drawCircle not implemented")},drawPieSlice:function(){alert("drawPieSlice not implemented")},drawRect:function(){alert("drawRect not implemented")},getElement:function(){return this.canvas},_insert:function(c,b){a(b).html(c)}};f=function(c,a,b){return this.init(c,a,b)};f.prototype=a.extend(new b,{_super:b.prototype,init:function(d,c,b){this._super.init(d,c,b);this.canvas=document.createElement("canvas");if(b[0])b=b[0];b.VCanvas=this;a(this.canvas).css({display:"inline-block",width:d,height:c,verticalAlign:"top"});this._insert(this.canvas,b);this.pixel_height=a(this.canvas).height();this.pixel_width=a(this.canvas).width();this.canvas.width=this.pixel_width;this.canvas.height=this.pixel_height;a(this.canvas).css({width:this.pixel_width,height:this.pixel_height})},_getContext:function(c,b,d){var a=this.canvas.getContext("2d");if(c!==undefined)a.strokeStyle=c;a.lineWidth=d===undefined?1:d;if(b!==undefined)a.fillStyle=b;return a},drawShape:function(b,e,d,f){var a=this._getContext(e,d,f);a.beginPath();a.moveTo(b[0][0]+.5,b[0][1]+.5);for(var c=1,g=b.length;c<g;c++)a.lineTo(b[c][0]+.5,b[c][1]+.5);e!==undefined&&a.stroke();d!==undefined&&a.fill()},drawCircle:function(e,f,d,c,b){var a=this._getContext(c,b);a.beginPath();a.arc(e,f,d,0,2*Math.PI,false);c!==undefined&&a.stroke();b!==undefined&&a.fill()},drawPieSlice:function(b,c,h,f,g,e,d){var a=this._getContext(e,d);a.beginPath();a.moveTo(b,c);a.arc(b,c,h,f,g,false);a.lineTo(b,c);a.closePath();e!==undefined&&a.stroke();d&&a.fill()},drawRect:function(a,b,d,c,f,e){return this.drawShape([[a,b],[a+d,b],[a+d,b+c],[a,b+c],[a,b]],f,e)}});g=function(c,a,b){return this.init(c,a,b)};g.prototype=a.extend(new b,{_super:b.prototype,init:function(d,c,b){this._super.init(d,c,b);if(b[0])b=b[0];b.VCanvas=this;this.canvas=document.createElement("span");a(this.canvas).css({display:"inline-block",position:"relative",overflow:"hidden",width:d,height:c,margin:"0px",padding:"0px",verticalAlign:"top"});this._insert(this.canvas,b);this.pixel_height=a(this.canvas).height();this.pixel_width=a(this.canvas).width();this.canvas.width=this.pixel_width;this.canvas.height=this.pixel_height;var e='<v:group coordorigin="0 0" coordsize="'+this.pixel_width+" "+this.pixel_height+'" style="position:absolute;top:0;left:0;width:'+this.pixel_width+"px;height="+this.pixel_height+'px;"></v:group>';this.canvas.insertAdjacentHTML("beforeEnd",e);this.group=a(this.canvas).children()[0]},drawShape:function(d,f,e,c){for(var a=[],b=0,k=d.length;b<k;b++)a[b]=""+d[b][0]+","+d[b][1];var g=a.splice(0,1);c=c===undefined?1:c;var i=f===undefined?' stroked="false" ':' strokeWeight="'+c+'" strokeColor="'+f+'" ',j=e===undefined?' filled="false"':' fillColor="'+e+'" filled="true" ',h=a[0]==a[a.length-1]?"x ":"",l='<v:shape coordorigin="0 0" coordsize="'+this.pixel_width+" "+this.pixel_height+'" '+i+j+' style="position:absolute;left:0px;top:0px;height:'+this.pixel_height+"px;width:"+this.pixel_width+'px;padding:0px;margin:0px;"  path="m '+g+" l "+a.join(", ")+" "+h+'e"> </v:shape>';this.group.insertAdjacentHTML("beforeEnd",l)},drawCircle:function(d,e,a,c,b){d-=a+1;e-=a+1;var f=c===undefined?' stroked="false" ':' strokeWeight="1" strokeColor="'+c+'" ',g=b===undefined?' filled="false"':' fillColor="'+b+'" filled="true" ',h="<v:oval "+f+g+' style="position:absolute;top:'+e+"px; left:"+d+"px; width:"+a*2+"px; height:"+a*2+'px"></v:oval>';this.group.insertAdjacentHTML("beforeEnd",h)},drawPieSlice:function(d,e,a,b,c,g,f){if(b==c)return;if(c-b==2*Math.PI){b=0;c=2*Math.PI}var h=d+Math.round(Math.cos(b)*a),i=e+Math.round(Math.sin(b)*a),j=d+Math.round(Math.cos(c)*a),k=e+Math.round(Math.sin(c)*a);if(h==j&&i==k&&c-b<Math.PI)return;var m=[d-a,e-a,d+a,e+a,h,i,j,k],l=g===undefined?' stroked="false" ':' strokeWeight="1" strokeColor="'+g+'" ',n=f===undefined?' filled="false"':' fillColor="'+f+'" filled="true" ',o='<v:shape coordorigin="0 0" coordsize="'+this.pixel_width+" "+this.pixel_height+'" '+l+n+' style="position:absolute;left:0px;top:0px;height:'+this.pixel_height+"px;width:"+this.pixel_width+'px;padding:0px;margin:0px;"  path="m '+d+","+e+" wa "+m.join(", ")+' x e"> </v:shape>';this.group.insertAdjacentHTML("beforeEnd",o)},drawRect:function(a,b,d,c,f,e){return this.drawShape([[a,b],[a,b+c],[a+d,b+c],[a+d,b],[a,b]],f,e)}})})(jQuery);(function(a){a.gritter={};a.gritter.options={position:"",class_name:"",fade_in_speed:"medium",fade_out_speed:1e3,time:6e3};a.gritter.add=function(a){try{return b.add(a||{})}catch(d){var c="Gritter Error: "+d;typeof console!="undefined"&&console.error?console.error(c,a):alert(c)}};a.gritter.remove=function(c,a){b.removeSpecific(c,a||{})};a.gritter.removeAll=function(a){b.stop(a||{})};var b={position:"",fade_in_speed:"",fade_out_speed:"",time:"",_custom_timer:0,_item_count:0,_is_setup:0,_tpl_close:'<div class="gritter-close"></div>',_tpl_item:'<div id="gritter-item-[[number]]" class="gritter-item-wrapper [[item_class]]" style="display:none"><div class="gritter-top"></div><div class="gritter-item">[[close]][[image]]<div class="[[class_name]]"><span class="gritter-title">[[username]]</span><p>[[text]]</p></div><div style="clear:both"></div></div><div class="gritter-bottom"></div></div>',_tpl_wrap:'<div id="gritter-notice-wrapper"></div>',add:function(c){if(!c.title||!c.text)throw'You need to fill out the first 2 params: "title" and "text"';!this._is_setup&&this._runSetup();var o=c.title,n=c.text,g=c.image||"",f=c.sticky||false,k=c.class_name||a.gritter.options.class_name,m=a.gritter.options.position,i=c.time||"";this._verifyWrapper();this._item_count++;var d=this._item_count,h=this._tpl_item;a(["before_open","after_open","before_close","after_close"]).each(function(f,e){b["_"+e+"_"+d]=a.isFunction(c[e])?c[e]:function(){}});this._custom_timer=0;if(i)this._custom_timer=i;var l=g!=""?'<img src="'+g+'" class="gritter-image" />':"",j=g!=""?"gritter-with-image":"gritter-without-image";h=this._str_replace(["[[username]]","[[text]]","[[close]]","[[image]]","[[number]]","[[class_name]]","[[item_class]]"],[o,n,this._tpl_close,l,this._item_count,j,k],h);if(this["_before_open_"+d]()===false)return false;a("#gritter-notice-wrapper").addClass(m).append(h);var e=a("#gritter-item-"+this._item_count);e.fadeIn(this.fade_in_speed,function(){b["_after_open_"+d](a(this))});!f&&this._setFadeTimer(e,d);a(e).bind("mouseenter mouseleave",function(c){if(c.type=="mouseenter")!f&&b._restoreItemIfFading(a(this),d);else!f&&b._setFadeTimer(a(this),d);b._hoverState(a(this),c.type)});a(e).find(".gritter-close").click(function(){b.removeSpecific(d,{},null,true)});return d},_countRemoveWrapper:function(d,b,c){b.remove();this["_after_close_"+d](b,c);a(".gritter-item-wrapper").length==0&&a("#gritter-notice-wrapper").remove()},_fade:function(a,d,c,e){var c=c||{},h=typeof c.fade!="undefined"?c.fade:true,g=c.speed||this.fade_out_speed,f=e;this["_before_close_"+d](a,f);e&&a.unbind("mouseenter mouseleave");if(h)a.animate({opacity:0},g,function(){a.animate({height:0},300,function(){b._countRemoveWrapper(d,a,f)})});else this._countRemoveWrapper(d,a)},_hoverState:function(a,b){if(b=="mouseenter"){a.addClass("hover");a.find(".gritter-close").show()}else{a.removeClass("hover");a.find(".gritter-close").hide()}},removeSpecific:function(b,e,c,d){if(!c)var c=a("#gritter-item-"+b);this._fade(c,b,e||{},d)},_restoreItemIfFading:function(b,a){clearTimeout(this["_int_id_"+a]);b.stop().css({opacity:"",height:""})},_runSetup:function(){for(opt in a.gritter.options)this[opt]=a.gritter.options[opt];this._is_setup=1},_setFadeTimer:function(d,a){var c=this._custom_timer?this._custom_timer:this.time;this["_int_id_"+a]=setTimeout(function(){b._fade(d,a)},c)},stop:function(b){var d=a.isFunction(b.before_close)?b.before_close:function(){},e=a.isFunction(b.after_close)?b.after_close:function(){},c=a("#gritter-notice-wrapper");d(c);c.fadeOut(function(){a(this).remove();e()})},_str_replace:function(m,k,l,d){var b=0,c=0,e="",h="",j=0,i=0,g=[].concat(m),f=[].concat(k),a=l,n=f instanceof Array,o=a instanceof Array;a=[].concat(a);if(d)this.window[d]=0;for(b=0,j=a.length;b<j;b++){if(a[b]==="")continue;for(c=0,i=g.length;c<i;c++){e=a[b]+"";h=n?f[c]!==undefined?f[c]:"":f[0];a[b]=e.split(g[c]).join(h);if(d&&a[b]!==e)this.window[d]+=(e.length-a[b].length)/g[c].length}}return o?a:a[0]},_verifyWrapper:function(){a("#gritter-notice-wrapper").length==0&&a("body").append(this._tpl_wrap)}}})(jQuery);(function(a,b){"use strict";if(typeof a!=="function")throw"SignalR: jQuery not found. Please ensure jQuery is referenced before the SignalR.js file.";if(!b.JSON)throw"SignalR: No JSON parser found. Please ensure json2.js is referenced before the SignalR.js file if you need to support clients without native JSON parsing support, e.g. IE<8.";var f,g,c={onStart:"onStart",onStarting:"onStarting",onSending:"onSending",onReceived:"onReceived",onError:"onError",onReconnect:"onReconnect",onDisconnect:"onDisconnect"},e=function(d,c){if(c===false)return;var a;if(typeof b.console==="undefined")return;a="["+(new Date).toTimeString()+"] SignalR: "+d;if(b.console.debug)b.console.debug(a);else b.console.log&&b.console.log(a)};f=function(b,c,a){return new f.fn.init(b,c,a)};f.fn=f.prototype={init:function(b,c,a){this.url=b;this.qs=c;if(typeof a==="boolean")this.logging=a},logging:false,reconnectDelay:2e3,start:function(i,h){var d=this,e={transport:"auto"},j,g=a.Deferred();if(d.transport){g.resolve(d);return g}if(a.type(i)==="function")h=i;else if(a.type(i)==="object"){a.extend(e,i);if(a.type(e.callback)==="function")h=e.callback}a(d).bind(c.onStart,function(){a.type(h)==="function"&&h.call(d);g.resolve(d)});j=function(h,b){b=b||0;if(b>=h.length){!d.transport&&g.reject("SignalR: No transport could be initialized successfully. Try specifying a different transport or none at all for auto initialization.");return}var e=h[b],i=a.type(e)==="object"?e:f.transports[e];i.start(d,function(){d.transport=i;a(d).trigger(c.onStart)},function(){j(h,b+1)})};b.setTimeout(function(){a.ajax({global:false,type:"POST",url:d.url+"/negotiate",data:{},dataType:"json",error:function(b){a(d).trigger(c.onError,[b]);g.reject("SignalR: Error during negotiation request: "+b)},success:function(b){d.appRelativeUrl=b.Url;d.id=b.ConnectionId;d.webSocketServerUrl=b.WebSocketServerUrl;if(!b.ProtocolVersion||b.ProtocolVersion!=="1.0"){a(d).trigger(c.onError,"SignalR: Incompatible protocol version.");g.reject("SignalR: Incompatible protocol version.");return}a(d).trigger(c.onStarting);var i=[],h=[];a.each(f.transports,function(a){if(a==="webSockets"&&!b.TryWebSockets)return true;h.push(a)});if(a.isArray(e.transport))a.each(e.transport,function(){var b=this;(a.type(b)==="object"||a.type(b)==="string"&&a.inArray(""+b,h)>=0)&&i.push(a.type(b)==="string"?""+b:b)});else if(a.type(e.transport)==="object"||a.inArray(e.transport,h)>=0)i.push(e.transport);else i=h;j(i)}})},0);return g},starting:function(e){var b=this,d=a(b);d.bind(c.onStarting,function(){e.call(b);d.unbind(c.onStarting)});return b},send:function(b){var a=this;if(!a.transport)throw"SignalR: Connection must be started before data can be sent. Call .start() before .send()";a.transport.send(a,b);return a},sending:function(d){var b=this;a(b).bind(c.onSending,function(){d.call(b)});return b},received:function(d){var b=this;a(b).bind(c.onReceived,function(c,a){d.call(b,a)});return b},error:function(d){var b=this;a(b).bind(c.onError,function(c,a){d.call(b,a)});return b},disconnected:function(d){var b=this;a(b).bind(c.onDisconnect,function(){d.call(b)});return b},reconnected:function(d){var b=this;a(b).bind(c.onReconnect,function(){d.call(b)});return b},stop:function(){var b=this;if(b.transport){b.transport.stop(b);b.transport=null}delete b.messageId;delete b.groups;a(b).trigger(c.onDisconnect);return b},log:e};f.fn.init.prototype=f.fn;var d={addQs:function(c,b){return!b.qs?c:typeof b.qs==="object"?c+"&"+a.param(b.qs):typeof b.qs==="string"?c+"&"+b.qs:c+"&"+escape(b.qs.toString())},getUrl:function(a,f,e){var c=a.url,d="transport="+f+"&connectionId="+b.escape(a.id);if(a.data)d+="&connectionData="+b.escape(a.data);if(!e)c=c+"/connect";else{if(a.messageId)d+="&messageId="+a.messageId;if(a.groups)d+="&groups="+b.escape(JSON.stringify(a.groups))}c+="?"+d;c=this.addQs(c,a);return c},ajaxSend:function(d,f){var e=d.url+"/send?transport="+d.transport.name+"&connectionId="+b.escape(d.id);e=this.addQs(e,d);a.ajax({global:false,type:"POST",url:e,dataType:"json",data:{data:f},success:function(b){b&&a(d).trigger(c.onReceived,[b])},error:function(e,b){if(b==="abort")return;a(d).trigger(c.onError,[e])}})},processMessages:function(b,d){var f=a(b);if(d){if(d.Disconnect){e("Disconnect command received from server",b.logging);b.stop();f.trigger(c.onDisconnect);return}d.Messages&&a.each(d.Messages,function(){try{f.trigger(c.onReceived,[this])}catch(d){e("Error raising received "+d,b.logging);a(b).trigger(c.onError,[d])}});b.messageId=d.MessageId;b.groups=d.TransportData.Groups}},foreverFrame:{count:0,connections:{}}};f.transports={webSockets:{name:"webSockets",send:function(a,b){a.socket.send(b)},start:function(d,h,g){var f,j=false,i;if(b.MozWebSocket)b.WebSocket=b.MozWebSocket;if(!b.WebSocket){g();return}if(!d.socket){if(d.webSocketServerUrl)f=d.webSocketServerUrl;else{i=document.location.protocol==="https:"?"wss://":"ws://";f=i+document.location.host+d.appRelativeUrl}a(d).trigger(c.onSending);if(d.data)f+="?connectionData="+d.data+"&transport=webSockets&connectionId="+d.id;else f+="?transport=webSockets&connectionId="+d.id;d.socket=new b.WebSocket(f);d.socket.onopen=function(){j=true;h&&h()};d.socket.onclose=function(b){if(!j)g&&g();else typeof b.wasClean!="undefined"&&b.wasClean===false&&a(d).trigger(c.onError);d.socket=null};d.socket.onmessage=function(h){var f=b.JSON.parse(h.data),g;if(f){g=a(d);if(f.Messages)a.each(f.Messages,function(){try{g.trigger(c.onReceived,[this])}catch(a){e("Error raising received "+a,d.logging)}});else g.trigger(c.onReceived,[f])}}}},stop:function(a){if(a.socket!==null){a.socket.close();a.socket=null}}},serverSentEvents:{name:"serverSentEvents",timeOut:3e3,start:function(f,m,g){var h=this,k=false,j=a(f),i=!m,n,l;f.eventSource&&f.stop();if(!b.EventSource){g&&g();return}j.trigger(c.onSending);n=d.getUrl(f,this.name,i);try{f.eventSource=new b.EventSource(n)}catch(o){e("EventSource failed trying to connect with error "+o.Message,f.logging);if(g)g();else{j.trigger(c.onError,[o]);if(i){e("EventSource reconnecting",f.logging);h.reconnect(f)}}return}l=b.setTimeout(function(){if(k===false){e("EventSource timed out trying to connect",f.logging);g&&g();if(i){e("EventSource reconnecting",f.logging);h.reconnect(f)}else h.stop(f)}},h.timeOut);f.eventSource.addEventListener("open",function(){e("EventSource connected",f.logging);l&&b.clearTimeout(l);if(k===false){k=true;m&&m();i&&j.trigger(c.onReconnect)}},false);f.eventSource.addEventListener("message",function(a){if(a.data==="initialized")return;d.processMessages(f,b.JSON.parse(a.data))},false);f.eventSource.addEventListener("error",function(a){if(!k){g&&g();return}e("EventSource readyState: "+f.eventSource.readyState,f.logging);if(a.eventPhase===b.EventSource.CLOSED)if(f.eventSource.readyState===b.EventSource.CONNECTING){e("EventSource reconnecting due to the server connection ending",f.logging);h.reconnect(f)}else{e("EventSource closed",f.logging);h.stop(f)}else{e("EventSource error",f.logging);j.trigger(c.onError)}},false)},reconnect:function(a){var c=this;b.setTimeout(function(){c.stop(a);c.start(a)},a.reconnectDelay)},send:function(a,b){d.ajaxSend(a,b)},stop:function(a){if(a&&a.eventSource){a.eventSource.close();a.eventSource=null;delete a.eventSource}}},foreverFrame:{name:"foreverFrame",timeOut:3e3,start:function(f,l,g){var j=this,i=d.foreverFrame.count+=1,k,m,h=a("<iframe data-signalr-connection-id='"+f.id+"' style='position:absolute;width:0;height:0;visibility:hidden;'></iframe>");if(b.EventSource){g&&g();return}a(f).trigger(c.onSending);k=d.getUrl(f,this.name);k+="&frameId="+i;h.prop("src",k);d.foreverFrame.connections[i]=f;h.bind("readystatechange",function(){if(a.inArray(this.readyState,["loaded","complete"])>=0){e("Forever frame iframe readyState changed to "+this.readyState+", reconnecting",f.logging);j.reconnect(f)}});f.frame=h[0];f.frameId=i;if(l)f.onSuccess=l;a("body").append(h);m=b.setTimeout(function(){if(f.onSuccess){j.stop(f);g&&g()}},j.timeOut)},reconnect:function(a){var c=this;b.setTimeout(function(){var b=a.frame,e=d.getUrl(a,c.name,true)+"&frameId="+a.frameId;b.src=e},a.reconnectDelay)},send:function(a,b){d.ajaxSend(a,b)},receive:d.processMessages,stop:function(b){if(b.frame){if(b.frame.stop)b.frame.stop();else b.frame.document&&b.frame.document.execCommand&&b.frame.document.execCommand("Stop");a(b.frame).remove();delete d.foreverFrame.connections[b.frameId];b.frame=null;b.frameId=null;delete b.frame;delete b.frameId}},getConnection:function(a){return d.foreverFrame.connections[a]},started:function(b){if(b.onSuccess){b.onSuccess();b.onSuccess=null;delete b.onSuccess}else a(b).trigger(c.onReconnect)}},longPolling:{name:"longPolling",reconnectDelay:3e3,start:function(e,g){var f=this;e.pollXhr&&e.stop();e.messageId=null;b.setTimeout(function(){(function h(g,k){a(g).trigger(c.onSending);var l=g.messageId,m=l===null,n=d.getUrl(g,f.name,!m),j=null,i=false;g.pollXhr=a.ajax({global:false,type:"GET",url:n,dataType:"json",success:function(e){var j=0,f=false;if(k===true)if(i===false){a(g).trigger(c.onReconnect);i=true}d.processMessages(g,e);if(e&&a.type(e.TransportData.LongPollDelay)==="number")j=e.TransportData.LongPollDelay;if(e&&e.TimedOut)f=e.TimedOut;if(j>0)b.setTimeout(function(){h(g,f)},j);else h(g,f)},error:function(f,d){if(d==="abort")return;j&&clearTimeout(j);a(g).trigger(c.onError,[f]);b.setTimeout(function(){h(g,true)},e.reconnectDelay)}});if(k===true)j=b.setTimeout(function(){if(i===false){a(g).trigger(c.onReconnect);i=true}},f.reconnectDelay)})(e);b.setTimeout(g,150)},250)},send:function(a,b){d.ajaxSend(a,b)},stop:function(a){if(a.pollXhr){a.pollXhr.abort();a.pollXhr=null;delete a.pollXhr}}}};f.noConflict=function(){if(a.connection===f)a.connection=g;return f};if(a.connection)g=a.connection;a.connection=a.signalR=f})(window.jQuery,window);(function(a){a.timeago=function(c){return c instanceof Date?b(c):typeof c==="string"?b(a.timeago.parse(c)):b(a.timeago.datetime(c))};var c=a.timeago;a.extend(a.timeago,{settings:{refreshMillis:6e4,allowFuture:false,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[]}},inWords:function(h){var b=this.settings.strings,i=b.prefixAgo,j=b.suffixAgo;if(this.settings.allowFuture)if(h<0){i=b.prefixFromNow;j=b.suffixFromNow}var f=Math.abs(h)/1e3,e=f/60,g=e/60,d=g/24,k=d/365;function c(c,d){var e=a.isFunction(c)?c(d,h):c,f=b.numbers&&b.numbers[d]||d;return e.replace(/%d/i,f)}var l=f<45&&c(b.seconds,Math.round(f))||f<90&&c(b.minute,1)||e<45&&c(b.minutes,Math.round(e))||e<90&&c(b.hour,1)||g<24&&c(b.hours,Math.round(g))||g<48&&c(b.day,1)||d<30&&c(b.days,Math.floor(d))||d<60&&c(b.month,1)||d<365&&c(b.months,Math.floor(d/30))||k<2&&c(b.year,1)||c(b.years,Math.floor(k));return a.trim([i,l,j].join(" "))},parse:function(c){var b=a.trim(c);b=b.replace(/\.\d\d\d+/,"");b=b.replace(/-/,"/").replace(/-/,"/");b=b.replace(/T/," ").replace(/Z/," UTC");b=b.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2");return new Date(b)},datetime:function(b){var e=a(b).get(0).tagName.toLowerCase()==="time",d=e?a(b).attr("datetime"):a(b).attr("title");return c.parse(d)}});a.fn.timeago=function(){var a=this;a.each(d);var b=c.settings;b.refreshMillis>0&&setInterval(function(){a.each(d)},b.refreshMillis);return a};function d(){var c=e(this);!isNaN(c.datetime)&&a(this).text(b(c.datetime));return this}function e(b){b=a(b);if(!b.data("timeago")){b.data("timeago",{datetime:c.datetime(b)});var d=a.trim(b.text());d.length>0&&b.attr("title",d)}return b.data("timeago")}function b(a){return c.inWords(f(a))}function f(a){return(new Date).getTime()-a.getTime()}document.createElement("abbr");document.createElement("time")})(jQuery);(function(a){a.extend(a.fn,{validate:function(c){if(!this.length){c&&c.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing");return}var b=a.data(this[0],"validator");if(b)return b;this.attr("novalidate","novalidate");b=new a.validator(c,this[0]);a.data(this[0],"validator",b);if(b.settings.onsubmit){var d=this.find("input, button");d.filter(".cancel").click(function(){b.cancelSubmit=true});b.settings.submitHandler&&d.filter(":submit").click(function(){b.submitButton=this});this.submit(function(d){b.settings.debug&&d.preventDefault();function c(){if(b.settings.submitHandler){if(b.submitButton)var c=a("<input type='hidden'/>").attr("name",b.submitButton.name).val(b.submitButton.value).appendTo(b.currentForm);b.settings.submitHandler.call(b,b.currentForm);b.submitButton&&c.remove();return false}return true}if(b.cancelSubmit){b.cancelSubmit=false;return c()}if(b.form()){if(b.pendingRequest){b.formSubmitted=true;return false}return c()}else{b.focusInvalid();return false}})}return b},valid:function(){if(a(this[0]).is("form"))return this.validate().form();else{var b=true,c=a(this[0].form).validate();this.each(function(){b&=c.element(this)});return b}},removeAttrs:function(d){var c={},b=this;a.each(d.split(/\s/),function(d,a){c[a]=b.attr(a);b.removeAttr(a)});return c},rules:function(i,e){var b=this[0];if(i){var f=a.data(b.form,"validator").settings,g=f.rules,d=a.validator.staticRules(b);switch(i){case"add":a.extend(d,a.validator.normalizeRule(e));g[b.name]=d;if(e.messages)f.messages[b.name]=a.extend(f.messages[b.name],e.messages);break;case"remove":if(!e){delete g[b.name];return d}var h={};a.each(e.split(/\s/),function(b,a){h[a]=d[a];delete d[a]});return h}}var c=a.validator.normalizeRules(a.extend({},a.validator.metadataRules(b),a.validator.classRules(b),a.validator.attributeRules(b),a.validator.staticRules(b)),b);if(c.required){var j=c.required;delete c.required;c=a.extend({required:j},c)}return c}});a.extend(a.expr[":"],{blank:function(b){return!a.trim(""+b.value)},filled:function(b){return!!a.trim(""+b.value)},unchecked:function(a){return!a.checked}});a.validator=function(b,c){this.settings=a.extend(true,{},a.validator.defaults,b);this.currentForm=c;this.init()};a.validator.format=function(c,b){if(arguments.length==1)return function(){var b=a.makeArray(arguments);b.unshift(c);return a.validator.format.apply(this,b)};if(arguments.length>2&&b.constructor!=Array)b=a.makeArray(arguments).slice(1);if(b.constructor!=Array)b=[b];a.each(b,function(a,b){c=c.replace(new RegExp("\\{"+a+"\\}","g"),b)});return c};a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:true,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:true,ignore:":hidden",ignoreTitle:false,onfocusin:function(a){this.lastActive=a;if(this.settings.focusCleanup&&!this.blockFocusCleanup){this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass);this.addWrapper(this.errorsFor(a)).hide()}},onfocusout:function(a){!this.checkable(a)&&(a.name in this.submitted||!this.optional(a))&&this.element(a)},onkeyup:function(a){(a.name in this.submitted||a==this.lastElement)&&this.element(a)},onclick:function(a){if(a.name in this.submitted)this.element(a);else a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(b,c,d){if(b.type==="radio")this.findByName(b.name).addClass(c).removeClass(d);else a(b).addClass(c).removeClass(d)},unhighlight:function(b,c,d){if(b.type==="radio")this.findByName(b.name).removeClass(c).addClass(d);else a(b).removeClass(c).addClass(d)}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=a(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm);this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var d=this.groups={};a.each(this.settings.groups,function(c,b){a.each(b.split(/\s/),function(b,a){d[a]=c})});var c=this.settings.rules;a.each(c,function(d,b){c[d]=a.validator.normalizeRule(b)});function b(d){var b=a.data(this[0].form,"validator"),c="on"+d.type.replace(/^validate/,"");b.settings[c]&&b.settings[c].call(b,this[0],d)}a(this.currentForm).validateDelegate("[type='text'], [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",b).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",b);this.settings.invalidHandler&&a(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){this.checkForm();a.extend(this.submitted,this.errorMap);this.invalid=a.extend({},this.errorMap);!this.valid()&&a(this.currentForm).triggerHandler("invalid-form",[this]);this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var a=0,b=this.currentElements=this.elements();b[a];a++)this.check(b[a]);return this.valid()},element:function(b){b=this.validationTargetFor(this.clean(b));this.lastElement=b;this.prepareElement(b);this.currentElements=a(b);var c=this.check(b);if(c)delete this.invalid[b.name];else this.invalid[b.name]=true;if(!this.numberOfInvalids())this.toHide=this.toHide.add(this.containers);this.showErrors();return c},showErrors:function(b){if(b){a.extend(this.errorMap,b);this.errorList=[];for(var c in b)this.errorList.push({message:b[c],element:this.findByName(c)[0]});this.successList=a.grep(this.successList,function(a){return!(a.name in b)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){a.fn.resetForm&&a(this.currentForm).resetForm();this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(b){var a=0;for(var c in b)a++;return a},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()==0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(b){}},findLastActive:function(){var b=this.lastActive;return b&&a.grep(this.errorList,function(a){return a.element.name==b.name}).length==1&&b},elements:function(){var c=this,b={};return a(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&c.settings.debug&&window.console&&console.error("%o has no name assigned",this);if(this.name in b||!c.objectLength(a(this).rules()))return false;b[this.name]=true;return true})},clean:function(b){return a(b)[0]},errors:function(){return a(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=a([]);this.toHide=a([]);this.currentElements=a([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(a){this.reset();this.toHide=this.errorsFor(a)},check:function(b){b=this.validationTargetFor(this.clean(b));var f=a(b).rules(),c=false;for(var d in f){var g={method:d,parameters:f[d]};try{var e=a.validator.methods[d].call(this,b.value.replace(/\r/g,""),b,g.parameters);if(e=="dependency-mismatch"){c=true;continue}c=false;if(e=="pending"){this.toHide=this.toHide.not(this.errorsFor(b));return}if(!e){this.formatAndAdd(b,g);return false}}catch(h){this.settings.debug&&window.console&&console.log("exception occured when checking element "+b.id+", check the '"+g.method+"' method",h);throw h;}}if(c)return;this.objectLength(f)&&this.successList.push(b);return true},customMetaMessage:function(c,d){if(!a.metadata)return;var b=this.settings.meta?a(c).metadata()[this.settings.meta]:a(c).metadata();return b&&b.messages&&b.messages[d]},customMessage:function(c,b){var a=this.settings.messages[c];return a&&(a.constructor==String?a:a[b])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(arguments[a]!==undefined)return arguments[a];return undefined},defaultMessage:function(b,c){return this.findDefined(this.customMessage(b.name,c),this.customMetaMessage(b,c),!this.settings.ignoreTitle&&b.title||undefined,a.validator.messages[c],"<strong>Warning: No message defined for "+b.name+"</strong>")},formatAndAdd:function(b,c){var a=this.defaultMessage(b,c.method),d=/\$?\{(\d+)\}/g;if(typeof a=="function")a=a.call(this,c.parameters,b);else if(d.test(a))a=jQuery.format(a.replace(d,"{$1}"),c.parameters);this.errorList.push({message:a,element:b});this.errorMap[b.name]=a;this.submitted[b.name]=a},addWrapper:function(a){if(this.settings.wrapper)a=a.add(a.parent(this.settings.wrapper));return a},defaultShowErrors:function(){for(var a=0;this.errorList[a];a++){var b=this.errorList[a];this.settings.highlight&&this.settings.highlight.call(this,b.element,this.settings.errorClass,this.settings.validClass);this.showLabel(b.element,b.message)}if(this.errorList.length)this.toShow=this.toShow.add(this.containers);if(this.settings.success)for(var a=0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight)for(var a=0,c=this.validElements();c[a];a++)this.settings.unhighlight.call(this,c[a],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(c,d){var b=this.errorsFor(c);if(b.length){b.removeClass(this.settings.validClass).addClass(this.settings.errorClass);b.attr("generated")&&b.html(d)}else{b=a("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(c),generated:true}).addClass(this.settings.errorClass).html(d||"");if(this.settings.wrapper)b=b.hide().show().wrap("<"+this.settings.wrapper+"/>").parent();if(!this.labelContainer.append(b).length)this.settings.errorPlacement?this.settings.errorPlacement(b,a(c)):b.insertAfter(c)}if(!d&&this.settings.success){b.text("");typeof this.settings.success=="string"?b.addClass(this.settings.success):this.settings.success(b)}this.toShow=this.toShow.add(b)},errorsFor:function(b){var c=this.idOrName(b);return this.errors().filter(function(){return a(this).attr("for")==c})},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},validationTargetFor:function(a){if(this.checkable(a))a=this.findByName(a.name).not(this.settings.ignore)[0];return a},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(b){var c=this.currentForm;return a(document.getElementsByName(b)).map(function(d,a){return a.form==c&&a.name==b&&a||null})},getLength:function(c,b){switch(b.nodeName.toLowerCase()){case"select":return a("option:selected",b).length;case"input":if(this.checkable(b))return this.findByName(b.name).filter(":checked").length}return c.length},depend:function(a,b){return this.dependTypes[typeof a]?this.dependTypes[typeof a](a,b):true},dependTypes:{"boolean":function(a){return a},string:function(c,b){return!!a(c,b.form).length},"function":function(b,a){return b(a)}},optional:function(b){return!a.validator.methods.required.call(this,a.trim(b.value),b)&&"dependency-mismatch"},startRequest:function(a){if(!this.pending[a.name]){this.pendingRequest++;this.pending[a.name]=true}},stopRequest:function(c,b){this.pendingRequest--;if(this.pendingRequest<0)this.pendingRequest=0;delete this.pending[c.name];if(b&&this.pendingRequest==0&&this.formSubmitted&&this.form()){a(this.currentForm).submit();this.formSubmitted=false}else if(!b&&this.pendingRequest==0&&this.formSubmitted){a(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=false}},previousValue:function(b){return a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:true,message:this.defaultMessage(b,"remote")})}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},dateDE:{dateDE:true},number:{number:true},numberDE:{numberDE:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(b,c){b.constructor==String?this.classRuleSettings[b]=c:a.extend(this.classRuleSettings,b)},classRules:function(d){var c={},b=a(d).attr("class");b&&a.each(b.split(" "),function(){this in a.validator.classRuleSettings&&a.extend(c,a.validator.classRuleSettings[this])});return c},attributeRules:function(f){var c={},e=a(f);for(var b in a.validator.methods){var d;if(b==="required"&&typeof a.fn.prop==="function")d=e.prop(b);else d=e.attr(b);if(d)c[b]=d;else if(e[0].getAttribute("type")===b)c[b]=true}if(c.maxlength&&/-1|2147483647|524288/.test(c.maxlength))delete c.maxlength;return c},metadataRules:function(b){if(!a.metadata)return{};var c=a.data(b.form,"validator").settings.meta;return c?a(b).metadata()[c]:a(b).metadata()},staticRules:function(c){var d={},b=a.data(c.form,"validator");if(b.settings.rules)d=a.validator.normalizeRule(b.settings.rules[c.name])||{};return d},normalizeRules:function(b,c){a.each(b,function(f,d){if(d===false){delete b[f];return}if(d.param||d.depends){var e=true;switch(typeof d.depends){case"string":e=!!a(d.depends,c.form).length;break;case"function":e=d.depends.call(c,c)}if(e)b[f]=d.param!==undefined?d.param:true;else delete b[f]}});a.each(b,function(e,d){b[e]=a.isFunction(d)?d(c):d});a.each(["minlength","maxlength","min","max"],function(){if(b[this])b[this]=Number(b[this])});a.each(["rangelength","range"],function(){if(b[this])b[this]=[Number(b[this][0]),Number(b[this][1])]});if(a.validator.autoCreateRanges){if(b.min&&b.max){b.range=[b.min,b.max];delete b.min;delete b.max}if(b.minlength&&b.maxlength){b.rangelength=[b.minlength,b.maxlength];delete b.minlength;delete b.maxlength}}if(b.messages)delete b.messages;return b},normalizeRule:function(b){if(typeof b=="string"){var c={};a.each(b.split(/\s/),function(){c[this]=true});b=c}return b},addMethod:function(b,d,c){a.validator.methods[b]=d;a.validator.messages[b]=c!=undefined?c:a.validator.messages[b];d.length<3&&a.validator.addClassRules(b,a.validator.normalizeRule(b))},methods:{required:function(c,b,e){if(!this.depend(e,b))return"dependency-mismatch";switch(b.nodeName.toLowerCase()){case"select":var d=a(b).val();return d&&d.length>0;case"input":if(this.checkable(b))return this.getLength(c,b)>0;default:return a.trim(c).length>0}},remote:function(f,b,e){if(this.optional(b))return"dependency-mismatch";var d=this.previousValue(b);if(!this.settings.messages[b.name])this.settings.messages[b.name]={};d.originalMessage=this.settings.messages[b.name].remote;this.settings.messages[b.name].remote=d.message;e=typeof e=="string"&&{url:e}||e;if(this.pending[b.name])return"pending";if(d.old===f)return d.valid;d.old=f;var c=this;this.startRequest(b);var g={};g[b.name]=f;a.ajax(a.extend(true,{url:e,mode:"abort",port:"validate"+b.name,dataType:"json",data:g,success:function(h){c.settings.messages[b.name].remote=d.originalMessage;var g=h===true;if(g){var j=c.formSubmitted;c.prepareElement(b);c.formSubmitted=j;c.successList.push(b);c.showErrors()}else{var i={},e=h||c.defaultMessage(b,"remote");i[b.name]=d.message=a.isFunction(e)?e(f):e;c.showErrors(i)}d.valid=g;c.stopRequest(b,g)}},e));return"pending"},minlength:function(d,b,c){return this.optional(b)||this.getLength(a.trim(d),b)>=c},maxlength:function(d,b,c){return this.optional(b)||this.getLength(a.trim(d),b)<=c},rangelength:function(e,b,d){var c=this.getLength(a.trim(e),b);return this.optional(b)||c>=d[0]&&c<=d[1]},min:function(c,a,b){return this.optional(a)||c>=b},max:function(c,a,b){return this.optional(a)||c<=b},range:function(b,c,a){return this.optional(c)||b>=a[0]&&b<=a[1]},email:function(b,a){return this.optional(a)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(b)},url:function(b,a){return this.optional(a)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(b)},date:function(b,a){return this.optional(a)||!/Invalid|NaN/.test(new Date(b))},dateISO:function(b,a){return this.optional(a)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(b)},number:function(b,a){return this.optional(a)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(b)},digits:function(b,a){return this.optional(a)||/^\d+$/.test(b)},creditcard:function(a,f){if(this.optional(f))return"dependency-mismatch";if(/[^0-9 -]+/.test(a))return false;var e=0,b=0,c=false;a=a.replace(/\D/g,"");for(var d=a.length-1;d>=0;d--){var g=a.charAt(d),b=parseInt(g,10);if(c)if((b*=2)>9)b-=9;e+=b;c=!c}return e%10==0},accept:function(c,b,a){a=typeof a=="string"?a.replace(/,/g,"|"):"png|jpe?g|gif";return this.optional(b)||c.match(new RegExp(".("+a+")$","i"))},equalTo:function(e,b,d){var c=a(d).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){a(b).valid()});return e==c.val()}}});a.format=a.validator.format})(jQuery);(function(b){var a={};if(b.ajaxPrefilter)b.ajaxPrefilter(function(c,e,d){var b=c.port;if(c.mode=="abort"){a[b]&&a[b].abort();a[b]=d}});else{var c=b.ajax;b.ajax=function(d){var f=("mode"in d?d:b.ajaxSettings).mode,e=("port"in d?d:b.ajaxSettings).port;if(f=="abort"){a[e]&&a[e].abort();return a[e]=c.apply(this,arguments)}return c.apply(this,arguments)}}})(jQuery);(function(a){!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener&&a.each({focus:"focusin",blur:"focusout"},function(c,b){a.event.special[b]={setup:function(){this.addEventListener(c,d,true)},teardown:function(){this.removeEventListener(c,d,true)},handler:function(c){arguments[0]=a.event.fix(c);arguments[0].type=b;return a.event.handle.apply(this,arguments)}};function d(c){c=a.event.fix(c);c.type=b;return a.event.handle.call(this,c)}});a.extend(a.fn,{validateDelegate:function(b,d,c){return this.bind(d,function(e){var d=a(e.target);if(d.is(b))return c.apply(d,arguments)})}})})(jQuery);
/*
** Unobtrusive validation support library for jQuery and jQuery Validate
** Copyright (C) Microsoft Corporation. All rights reserved.
*/
(function(a){var d=a.validator,b,f="unobtrusiveValidation";function c(a,b,c){a.rules[b]=c;if(a.message)a.messages[b]=a.message}function i(a){return a.replace(/^\s+|\s+$/g,"").split(/\s*,\s*/g)}function g(a){return a.substr(0,a.lastIndexOf(".")+1)}function e(a,b){if(a.indexOf("*.")===0)a=a.replace("*.",b);return a}function l(d,e){var b=a(this).find("[data-valmsg-for='"+e[0].name+"']"),f=a.parseJSON(b.attr("data-valmsg-replace"))!==false,c=jQuery('<div class="alert alert-error"></div>');c.append(jQuery('<a class="close" data-dismiss="alert">').text("×"));d.data("unobtrusiveContainer",b);if(f){b.empty();d.appendTo(c);c.appendTo(b)}else d.hide()}function k(e,c){var d=a(this).find("[data-valmsg-summary=true]");if(c.errorList.length){d.empty();var b=jQuery('<div class="alert alert-error"></div>');b.append(jQuery('<a class="close" data-dismiss="alert">').text("×"));a.each(c.errorList,function(){a("<div />").html(this.message).appendTo(b)})}}function j(c){var b=c.data("unobtrusiveContainer"),d=a.parseJSON(b.attr("data-valmsg-replace"));if(b){c.removeData("unobtrusiveContainer");d&&b.empty()}}function h(d){var b=a(d),c=b.data(f);if(!c){c={options:{errorClass:"error",errorElement:"div",errorPlacement:a.proxy(l,d),invalidHandler:a.proxy(k,d),messages:{},rules:{},success:a.proxy(j,d)},attachValidation:function(){b.validate(this.options)},validate:function(){b.validate();return b.valid()}};b.data(f,c)}return c}d.unobtrusive={adapters:[],parseElement:function(b,i){var d=a(b),f=d.parents("form")[0],c,e,g;if(!f)return;c=h(f);c.options.rules[b.name]=e={};c.options.messages[b.name]=g={};a.each(this.adapters,function(){var c="data-val-"+this.name,i=d.attr(c),h={};if(i!==undefined){c+="-";a.each(this.params,function(){h[this]=d.attr(c+this)});this.adapt({element:b,form:f,message:i,params:h,rules:e,messages:g})}});jQuery.extend(e,{__dummy__:true});!i&&c.attachValidation()},parse:function(b){a(b).find(":input[data-val=true]").each(function(){d.unobtrusive.parseElement(this,true)});a("form").each(function(){var a=h(this);a&&a.attachValidation()})}};b=d.unobtrusive.adapters;b.add=function(c,a,b){if(!b){b=a;a=[]}this.push({name:c,params:a,adapt:b});return this};b.addBool=function(a,b){return this.add(a,function(d){c(d,b||a,true)})};b.addMinMax=function(e,g,f,a,d,b){return this.add(e,[d||"min",b||"max"],function(b){var e=b.params.min,d=b.params.max;if(e&&d)c(b,a,[e,d]);else if(e)c(b,g,e);else d&&c(b,f,d)})};b.addSingleVal=function(a,b,d){return this.add(a,[b||"val"],function(e){c(e,d||a,e.params[b])})};d.addMethod("__dummy__",function(){return true});d.addMethod("regex",function(b,c,d){var a;if(this.optional(c))return true;a=new RegExp(d).exec(b);return a&&a.index===0&&a[0].length===b.length});b.addSingleVal("accept","exts").addSingleVal("regex","pattern");b.addBool("creditcard").addBool("date").addBool("digits").addBool("email").addBool("number").addBool("url");b.addMinMax("length","minlength","maxlength","rangelength").addMinMax("range","min","max","range");b.add("equalto",["other"],function(b){var h=g(b.element.name),i=b.params.other,d=e(i,h),f=a(b.form).find(":input[name="+d+"]")[0];c(b,"equalTo",f)});b.add("required",function(a){(a.element.tagName.toUpperCase()!=="INPUT"||a.element.type.toUpperCase()!=="CHECKBOX")&&c(a,"required",true)});b.add("remote",["url","type","additionalfields"],function(b){var d={url:b.params.url,type:b.params.type||"GET",data:{}},f=g(b.element.name);a.each(i(b.params.additionalfields||b.element.name),function(h,g){var c=e(g,f);d.data[c]=function(){return a(b.form).find(":input[name='"+c+"']").val()}});c(b,"remote",d)});a(function(){d.unobtrusive.parse(document)})})(jQuery);var dateFormat=function(){var d=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,c=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,b=/[^-+\dA-Z]/g,a=function(a,b){a=String(a);b=b||2;while(a.length<b)a="0"+a;return a};return function(e,f,k){var i=dateFormat;if(arguments.length==1&&Object.prototype.toString.call(e)=="[object String]"&&!/\d/.test(e)){f=e;e=undefined}e=e?new Date(e):new Date;if(isNaN(e))throw SyntaxError("invalid date");f=String(i.masks[f]||f||i.masks["default"]);if(f.slice(0,4)=="UTC:"){f=f.slice(4);k=true}var h=k?"getUTC":"get",j=e[h+"Date"](),p=e[h+"Day"](),m=e[h+"Month"](),s=e[h+"FullYear"](),g=e[h+"Hours"](),q=e[h+"Minutes"](),r=e[h+"Seconds"](),l=e[h+"Milliseconds"](),n=k?0:e.getTimezoneOffset(),o={d:j,dd:a(j),ddd:i.i18n.dayNames[p],dddd:i.i18n.dayNames[p+7],m:m+1,mm:a(m+1),mmm:i.i18n.monthNames[m],mmmm:i.i18n.monthNames[m+12],yy:String(s).slice(2),yyyy:s,h:g%12||12,hh:a(g%12||12),H:g,HH:a(g),M:q,MM:a(q),s:r,ss:a(r),l:a(l,3),L:a(l>99?Math.round(l/10):l),t:g<12?"a":"p",tt:g<12?"am":"pm",T:g<12?"A":"P",TT:g<12?"AM":"PM",Z:k?"UTC":(String(e).match(c)||[""]).pop().replace(b,""),o:(n>0?"-":"+")+a(Math.floor(Math.abs(n)/60)*100+Math.abs(n)%60,4),S:(["th","st","nd","rd"])[j%10>3?0:(j%100-j%10!=10)*j%10]};return f.replace(d,function(a){return a in o?o[a]:a.slice(1,a.length-1)})}}();dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};Date.prototype.format=function(a,b){return dateFormat(this,a,b)};(function(c,b){var a=c.ko={};a.exportSymbol=function(e,f){for(var a=e.split("."),b=c,d=0;d<a.length-1;d++)b=b[a[d]];b[a[a.length-1]]=f};a.exportProperty=function(c,a,b){c[a]=b};a.utils=new function(){var l=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,d={},h={},k=/Firefox\/2/i.test(navigator.userAgent)?"KeyboardEvent":"UIEvents";d[k]=["keyup","keydown","keypress"];d.MouseEvents=["click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave"];for(var j in d){var f=d[j];if(f.length)for(var g=0,o=f.length;g<o;g++)h[f[g]]=j}var e=function(){var a=3,c=document.createElement("div"),d=c.getElementsByTagName("i");while(c.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->",d[0]);return a>4?a:b}(),m=e===6,n=e===7;function i(a,c){if(a.tagName!="INPUT"||!a.type)return false;if(c.toLowerCase()!="click")return false;var b=a.type.toLowerCase();return b=="checkbox"||b=="radio"}return{fieldsIncludedWithJsonPost:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],arrayForEach:function(b,c){for(var a=0,d=b.length;a<d;a++)c(b[a])},arrayIndexOf:function(b,c){if(typeof Array.prototype.indexOf=="function")return Array.prototype.indexOf.call(b,c);for(var a=0,d=b.length;a<d;a++)if(b[a]===c)return a;return-1},arrayFirst:function(b,d,c){for(var a=0,e=b.length;a<e;a++)if(d.call(c,b[a]))return b[a];return null},arrayRemoveItem:function(b,d){var c=a.utils.arrayIndexOf(b,d);c>=0&&b.splice(c,1)},arrayGetDistinctValues:function(b){b=b||[];for(var d=[],c=0,e=b.length;c<e;c++)a.utils.arrayIndexOf(d,b[c])<0&&d.push(b[c]);return d},arrayMap:function(a,d){a=a||[];for(var c=[],b=0,e=a.length;b<e;b++)c.push(d(a[b]));return c},arrayFilter:function(a,d){a=a||[];for(var c=[],b=0,e=a.length;b<e;b++)d(a[b])&&c.push(a[b]);return c},arrayPushAll:function(c,b){for(var a=0,d=b.length;a<d;a++)c.push(b[a]);return c},extend:function(c,a){for(var b in a)if(a.hasOwnProperty(b))c[b]=a[b];return c},emptyDomNode:function(b){while(b.firstChild)a.removeNode(b.firstChild)},setDomNodeChildren:function(c,b){a.utils.emptyDomNode(c);b&&a.utils.arrayForEach(b,function(a){c.appendChild(a)})},replaceDomNodes:function(d,f){var c=d.nodeType?[d]:d;if(c.length>0){for(var e=c[0],h=e.parentNode,b=0,g=f.length;b<g;b++)h.insertBefore(f[b],e);for(var b=0,g=c.length;b<g;b++)a.removeNode(c[b])}},setOptionNodeSelectionState:function(b,a){if(navigator.userAgent.indexOf("MSIE 6")>=0)b.setAttribute("selected",a);else b.selected=a},stringTrim:function(a){return(a||"").replace(l,"")},stringTokenize:function(g,f){for(var d=[],e=(g||"").split(f),b=0,h=e.length;b<h;b++){var c=a.utils.stringTrim(e[b]);c!==""&&d.push(c)}return d},stringStartsWith:function(a,b){a=a||"";return b.length>a.length?false:a.substring(0,b.length)===b},evalWithinScope:function(d){for(var b=Array.prototype.slice.call(arguments,1),c="return ("+d+")",a=0;a<b.length;a++)if(b[a]&&typeof b[a]=="object")c="with(sc["+a+"]) { "+c+" } ";return new Function("sc",c)(b)},domNodeIsContainedBy:function(a,b){if(b.compareDocumentPosition)return(b.compareDocumentPosition(a)&16)==16;while(a!=null){if(a==b)return true;a=a.parentNode}return false},domNodeIsAttachedToDocument:function(b){return a.utils.domNodeIsContainedBy(b,document)},registerEventHandler:function(a,c,b){if(typeof jQuery!="undefined"){if(i(a,c)){var d=b;b=function(c,a){var b=this.checked;if(a)this.checked=a.checkedStateBeforeEvent!==true;d.call(this,c);this.checked=b}}jQuery(a).bind(c,b)}else if(typeof a.addEventListener=="function")a.addEventListener(c,b,false);else if(typeof a.attachEvent!="undefined")a.attachEvent("on"+c,function(c){b.call(a,c)});else throw new Error("Browser doesn't support addEventListener or attachEvent");},triggerEvent:function(a,b){if(!(a&&a.nodeType))throw new Error("element must be a DOM node when calling triggerEvent");if(typeof jQuery!="undefined"){var d=[];i(a,b)&&d.push({checkedStateBeforeEvent:a.checked});jQuery(a).trigger(b,d)}else if(typeof document.createEvent=="function")if(typeof a.dispatchEvent=="function"){var f=h[b]||"HTMLEvents",e=document.createEvent(f);e.initEvent(b,true,true,c,0,0,0,0,0,false,false,false,false,0,a);a.dispatchEvent(e)}else throw new Error("The supplied element doesn't support dispatchEvent");else if(typeof a.fireEvent!="undefined"){if(b=="click")if(a.tagName=="INPUT"&&(a.type.toLowerCase()=="checkbox"||a.type.toLowerCase()=="radio"))a.checked=a.checked!==true;a.fireEvent("on"+b)}else throw new Error("Browser doesn't support triggering events");},unwrapObservable:function(b){return a.isObservable(b)?b():b},domNodeHasCssClass:function(d,c){var b=(d.className||"").split(/\s+/);return a.utils.arrayIndexOf(b,c)>=0},toggleDomNodeCssClass:function(b,e,f){var h=a.utils.domNodeHasCssClass(b,e);if(f&&!h)b.className=(b.className||"")+" "+e;else if(h&&!f){for(var d=(b.className||"").split(/\s+/),g="",c=0;c<d.length;c++)if(d[c]!=e)g+=d[c]+" ";b.className=a.utils.stringTrim(g)}},outerHTML:function(f){if(e===b){var a=f.outerHTML;if(typeof a=="string")return a}var d=c.document.createElement("div");d.appendChild(f.cloneNode(true));return d.innerHTML},setTextContent:function(c,f){var d=a.utils.unwrapObservable(f);if(d===null||d===b)d="";"innerText"in c?c.innerText=d:c.textContent=d;if(e>=9)c.innerHTML=c.innerHTML},range:function(c,b){c=a.utils.unwrapObservable(c);b=a.utils.unwrapObservable(b);for(var e=[],d=c;d<=b;d++)e.push(d);return e},makeArray:function(b){for(var c=[],a=0,d=b.length;a<d;a++)c.push(b[a]);return c},isIe6:m,isIe7:n,getFormFields:function(f,c){for(var d=a.utils.makeArray(f.getElementsByTagName("INPUT")).concat(a.utils.makeArray(f.getElementsByTagName("TEXTAREA"))),g=typeof c=="string"?function(a){return a.name===c}:function(a){return c.test(a.name)},e=[],b=d.length-1;b>=0;b--)g(d[b])&&e.push(d[b]);return e},parseJson:function(b){if(typeof b=="string"){b=a.utils.stringTrim(b);if(b)return c.JSON&&c.JSON.parse?c.JSON.parse(b):new Function("return "+b)()}return null},stringifyJson:function(b){if(typeof JSON=="undefined"||typeof JSON.stringify=="undefined")throw new Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return JSON.stringify(a.utils.unwrapObservable(b))},postJson:function(e,f,c){c=c||{};var j=c.params||{},l=c.includeFields||this.fieldsIncludedWithJsonPost,n=e;if(typeof e=="object"&&e.tagName=="FORM"){var m=e;n=m.action;for(var k=l.length-1;k>=0;k--)for(var i=a.utils.getFormFields(m,l[k]),h=i.length-1;h>=0;h--)j[i[h].name]=i[h].value}f=a.utils.unwrapObservable(f);var b=document.createElement("FORM");b.style.display="none";b.action=n;b.method="post";for(var g in f){var d=document.createElement("INPUT");d.name=g;d.value=a.utils.stringifyJson(a.utils.unwrapObservable(f[g]));b.appendChild(d)}for(var g in j){var d=document.createElement("INPUT");d.name=g;d.value=j[g];b.appendChild(d)}document.body.appendChild(b);c.submitter?c.submitter(b):b.submit();setTimeout(function(){b.parentNode.removeChild(b)},0)}}};a.exportSymbol("ko.utils",a.utils);a.utils.arrayForEach([["arrayForEach",a.utils.arrayForEach],["arrayFirst",a.utils.arrayFirst],["arrayFilter",a.utils.arrayFilter],["arrayGetDistinctValues",a.utils.arrayGetDistinctValues],["arrayIndexOf",a.utils.arrayIndexOf],["arrayMap",a.utils.arrayMap],["arrayPushAll",a.utils.arrayPushAll],["arrayRemoveItem",a.utils.arrayRemoveItem],["extend",a.utils.extend],["fieldsIncludedWithJsonPost",a.utils.fieldsIncludedWithJsonPost],["getFormFields",a.utils.getFormFields],["postJson",a.utils.postJson],["parseJson",a.utils.parseJson],["registerEventHandler",a.utils.registerEventHandler],["stringifyJson",a.utils.stringifyJson],["range",a.utils.range],["toggleDomNodeCssClass",a.utils.toggleDomNodeCssClass],["triggerEvent",a.utils.triggerEvent],["unwrapObservable",a.utils.unwrapObservable]],function(b){a.exportSymbol("ko.utils."+b[0],b[1])});if(!Function.prototype.bind)Function.prototype.bind=function(c){var b=this,a=Array.prototype.slice.call(arguments),c=a.shift();return function(){return b.apply(c,a.concat(Array.prototype.slice.call(arguments)))}};a.utils.domData=new function(){var e=0,c="__ko__"+(new Date).getTime(),d={};return{"get":function(d,e){var c=a.utils.domData.getAll(d,false);return c===b?b:c[e]},"set":function(d,f,c){if(c===b)if(a.utils.domData.getAll(d,false)===b)return;var e=a.utils.domData.getAll(d,true);e[f]=c},getAll:function(f,h){var a=f[c],g=a&&a!=="null";if(!g){if(!h)return b;a=f[c]="ko"+e++;d[a]={}}return d[a]},clear:function(b){var a=b[c];if(a){delete d[a];b[c]=null}}}};a.exportSymbol("ko.utils.domData",a.utils.domData);a.exportSymbol("ko.utils.domData.clear",a.utils.domData.clear);a.utils.domNodeDisposal=new function(){var d="__ko_domNodeDisposal__"+(new Date).getTime();function c(e,f){var c=a.utils.domData.get(e,d);if(c===b&&f){c=[];a.utils.domData.set(e,d,c)}return c}function f(c){a.utils.domData.set(c,d,b)}function e(d){var b=c(d,false);if(b){b=b.slice(0);for(var e=0;e<b.length;e++)b[e](d)}a.utils.domData.clear(d);typeof jQuery=="function"&&typeof jQuery.cleanData=="function"&&jQuery.cleanData([d])}return{addDisposeCallback:function(b,a){if(typeof a!="function")throw new Error("Callback must be a function");c(b,true).push(a)},removeDisposeCallback:function(d,e){var b=c(d,false);if(b){a.utils.arrayRemoveItem(b,e);b.length==0&&f(d)}},cleanNode:function(b){if(b.nodeType!=1&&b.nodeType!=9)return;e(b);var c=[];a.utils.arrayPushAll(c,b.getElementsByTagName("*"));for(var d=0,f=c.length;d<f;d++)e(c[d])},removeNode:function(b){a.cleanNode(b);b.parentNode&&b.parentNode.removeChild(b)}}};a.cleanNode=a.utils.domNodeDisposal.cleanNode;a.removeNode=a.utils.domNodeDisposal.removeNode;a.exportSymbol("ko.cleanNode",a.cleanNode);a.exportSymbol("ko.removeNode",a.removeNode);a.exportSymbol("ko.utils.domNodeDisposal",a.utils.domNodeDisposal);a.exportSymbol("ko.utils.domNodeDisposal.addDisposeCallback",a.utils.domNodeDisposal.addDisposeCallback);a.exportSymbol("ko.utils.domNodeDisposal.removeDisposeCallback",a.utils.domNodeDisposal.removeDisposeCallback);(function(){var f=/^(\s*)<!--(.*?)-->/;function e(g){var d=a.utils.stringTrim(g).toLowerCase(),b=document.createElement("div"),e=d.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!d.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!d.indexOf("<td")||!d.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""],f="ignored<div>"+e[1]+g+e[2]+"</div>";if(typeof c.innerShiv=="function")b.appendChild(c.innerShiv(f));else b.innerHTML=f;while(e[0]--)b=b.lastChild;return a.utils.makeArray(b.lastChild.childNodes)}function d(c){var b=jQuery.clean([c]);if(b&&b[0]){var a=b[0];while(a.parentNode&&a.parentNode.nodeType!==11)a=a.parentNode;a.parentNode&&a.parentNode.removeChild(a)}return b}a.utils.parseHtmlFragment=function(a){return typeof jQuery!="undefined"?d(a):e(a)};a.utils.setHtml=function(d,c){a.utils.emptyDomNode(d);if(c!==null&&c!==b){if(typeof c!="string")c=c.toString();if(typeof jQuery!="undefined")jQuery(d).html(c);else for(var f=a.utils.parseHtmlFragment(c),e=0;e<f.length;e++)d.appendChild(f[e])}}})();a.exportSymbol("ko.utils.parseHtmlFragment",a.utils.parseHtmlFragment);a.exportSymbol("ko.utils.setHtml",a.utils.setHtml);a.memoization=function(){var c={};function d(){return((1+Math.random())*4294967296|0).toString(16).substring(1)}function f(){return d()+d()}function e(b,d){if(!b)return;if(b.nodeType==8){var g=a.memoization.parseMemoText(b.nodeValue);g!=null&&d.push({domNode:b,memoId:g})}else if(b.nodeType==1)for(var c=0,f=b.childNodes,h=f.length;c<h;c++)e(f[c],d)}return{memoize:function(a){if(typeof a!="function")throw new Error("You can only pass a function to ko.memoization.memoize()");var b=f();c[b]=a;return"<!--[ko_memo:"+b+"]-->"},unmemoize:function(a,e){var d=c[a];if(d===b)throw new Error("Couldn't find any memo with ID "+a+". Perhaps it's already been unmemoized.");try{d.apply(null,e||[]);return true}finally{delete c[a]}},unmemoizeDomNodeAndDescendants:function(h,f){var c=[];e(h,c);for(var d=0,i=c.length;d<i;d++){var b=c[d].domNode,g=[b];f&&a.utils.arrayPushAll(g,f);a.memoization.unmemoize(c[d].memoId,g);b.nodeValue="";b.parentNode&&b.parentNode.removeChild(b)}},parseMemoText:function(b){var a=b.match(/^\[ko_memo\:(.*?)\]$/);return a?a[1]:null}}}();a.exportSymbol("ko.memoization",a.memoization);a.exportSymbol("ko.memoization.memoize",a.memoization.memoize);a.exportSymbol("ko.memoization.unmemoize",a.memoization.unmemoize);a.exportSymbol("ko.memoization.parseMemoText",a.memoization.parseMemoText);a.exportSymbol("ko.memoization.unmemoizeDomNodeAndDescendants",a.memoization.unmemoizeDomNodeAndDescendants);a.extenders={throttle:function(b,d){b.throttleEvaluation=d;var c=null;return a.dependentObservable({read:b,write:function(a){clearTimeout(c);c=setTimeout(function(){b(a)},d)}})},notify:function(b,c){b.equalityComparer=c=="always"?function(){return false}:a.observable.fn.equalityComparer;return b}};function g(b){var c=this;if(b)for(var e in b){var d=a.extenders[e];if(typeof d=="function")c=d(c,b[e])}return c}a.exportSymbol("ko.extenders",a.extenders);a.subscription=function(c,b){this.callback=c;this.disposeCallback=b;a.exportProperty(this,"dispose",this.dispose)};a.subscription.prototype.dispose=function(){this.isDisposed=true;this.disposeCallback()};a.subscribable=function(){this._subscriptions={};a.utils.extend(this,a.subscribable.fn);a.exportProperty(this,"subscribe",this.subscribe);a.exportProperty(this,"extend",this.extend);a.exportProperty(this,"getSubscriptionsCount",this.getSubscriptionsCount)};var e="change";a.subscribable.fn={subscribe:function(f,d,b){b=b||e;var g=d?f.bind(d):f,c=new a.subscription(g,function(){a.utils.arrayRemoveItem(this._subscriptions[b],c)}.bind(this));if(!this._subscriptions[b])this._subscriptions[b]=[];this._subscriptions[b].push(c);return c},notifySubscribers:function(c,b){b=b||e;this._subscriptions[b]&&a.utils.arrayForEach(this._subscriptions[b].slice(0),function(a){a&&a.isDisposed!==true&&a.callback(c)})},getSubscriptionsCount:function(){var b=0;for(var a in this._subscriptions)if(this._subscriptions.hasOwnProperty(a))b+=this._subscriptions[a].length;return b},extend:g};a.isSubscribable=function(a){return typeof a.subscribe=="function"&&typeof a.notifySubscribers=="function"};a.exportSymbol("ko.subscribable",a.subscribable);a.exportSymbol("ko.isSubscribable",a.isSubscribable);a.dependencyDetection=function(){var b=[];return{begin:function(a){b.push({callback:a,distinctDependencies:[]})},end:function(){b.pop()},registerDependency:function(c){if(!a.isSubscribable(c))throw"Only subscribable things can act as dependencies";if(b.length>0){var d=b[b.length-1];if(a.utils.arrayIndexOf(d.distinctDependencies,c)>=0)return;d.distinctDependencies.push(c);d.callback(c)}}}}();var i={undefined:true,"boolean":true,number:true,string:true};a.observable=function(d){var c=d;function b(){if(arguments.length>0){if(!b.equalityComparer||!b.equalityComparer(c,arguments[0])){b.valueWillMutate();c=arguments[0];b.valueHasMutated()}return this}else{a.dependencyDetection.registerDependency(b);return c}}a.subscribable.call(b);b.valueHasMutated=function(){b.notifySubscribers(c)};b.valueWillMutate=function(){b.notifySubscribers(c,"beforeChange")};a.utils.extend(b,a.observable.fn);a.exportProperty(b,"valueHasMutated",b.valueHasMutated);a.exportProperty(b,"valueWillMutate",b.valueWillMutate);return b};a.observable.fn={__ko_proto__:a.observable,equalityComparer:function(a,c){var b=a===null||typeof a in i;return b?a===c:false}};a.isObservable=function(c){return c===null||c===b||c.__ko_proto__===b?false:c.__ko_proto__===a.observable?true:a.isObservable(c.__ko_proto__)};a.isWriteableObservable=function(b){return typeof b=="function"&&b.__ko_proto__===a.observable?true:typeof b=="function"&&b.__ko_proto__===a.dependentObservable&&b.hasWriteFunction?true:false};a.exportSymbol("ko.observable",a.observable);a.exportSymbol("ko.isObservable",a.isObservable);a.exportSymbol("ko.isWriteableObservable",a.isWriteableObservable);a.observableArray=function(d){if(arguments.length==0)d=[];if(d!==null&&d!==b&&!("length"in d))throw new Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");var c=new a.observable(d);a.utils.extend(c,a.observableArray.fn);a.exportProperty(c,"remove",c.remove);a.exportProperty(c,"removeAll",c.removeAll);a.exportProperty(c,"destroy",c.destroy);a.exportProperty(c,"destroyAll",c.destroyAll);a.exportProperty(c,"indexOf",c.indexOf);a.exportProperty(c,"replace",c.replace);return c};a.observableArray.fn={remove:function(c){for(var d=this(),b=[],f=typeof c=="function"?c:function(a){return a===c},a=0;a<d.length;a++){var e=d[a];if(f(e)){b.length===0&&this.valueWillMutate();b.push(e);d.splice(a,1);a--}}b.length&&this.valueHasMutated();return b},removeAll:function(d){if(d===b){var c=this(),e=c.slice(0);this.valueWillMutate();c.splice(0,c.length);this.valueHasMutated();return e}return!d?[]:this.remove(function(b){return a.utils.arrayIndexOf(d,b)>=0})},destroy:function(b){var c=this(),d=typeof b=="function"?b:function(a){return a===b};this.valueWillMutate();for(var a=c.length-1;a>=0;a--){var e=c[a];if(d(e))c[a]._destroy=true}this.valueHasMutated()},destroyAll:function(c){return c===b?this.destroy(function(){return true}):!c?[]:this.destroy(function(b){return a.utils.arrayIndexOf(c,b)>=0})},indexOf:function(c){var b=this();return a.utils.arrayIndexOf(b,c)},replace:function(c,b){var a=this.indexOf(c);if(a>=0){this.valueWillMutate();this()[a]=b;this.valueHasMutated()}}};a.utils.arrayForEach(["pop","push","reverse","shift","sort","splice","unshift"],function(b){a.observableArray.fn[b]=function(){var a=this();this.valueWillMutate();var c=a[b].apply(a,arguments);this.valueHasMutated();return c}});a.utils.arrayForEach(["slice"],function(b){a.observableArray.fn[b]=function(){var a=this();return a[b].apply(a,arguments)}});a.exportSymbol("ko.observableArray",a.observableArray);function h(b,c,a){if(b&&typeof b=="object")a=b;else{a=a||{};a.read=b||a.read}if(typeof a.read!="function")throw"Pass a function that returns the value of the dependentObservable";return a}a.dependentObservable=function(o,j,c){var g,k=false,c=h(o,j,c),d=typeof c.disposeWhenNodeIsRemoved=="object"?c.disposeWhenNodeIsRemoved:null,i=null;if(d){i=function(){b.dispose()};a.utils.domNodeDisposal.addDisposeCallback(d,i);var m=c.disposeWhen;c.disposeWhen=function(){return!a.utils.domNodeIsAttachedToDocument(d)||typeof m=="function"&&m()}}var e=[];function l(){a.utils.arrayForEach(e,function(a){a.dispose()});e=[]}var n=null;function p(){var a=b.throttleEvaluation;if(a&&a>=0){clearTimeout(n);n=setTimeout(f,a)}else f()}function f(){if(k&&typeof c.disposeWhen=="function")if(c.disposeWhen()){b.dispose();return}try{l();a.dependencyDetection.begin(function(a){e.push(a.subscribe(p))});var d=c.owner||j,f=c.read.call(d);b.notifySubscribers(g,"beforeChange");g=f}finally{a.dependencyDetection.end()}b.notifySubscribers(g);k=true}function b(){if(arguments.length>0)if(typeof c.write==="function"){var d=c.owner||j;c.write.apply(d,arguments)}else throw"Cannot write a value to a dependentObservable unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.";else{!k&&f();a.dependencyDetection.registerDependency(b);return g}}b.getDependenciesCount=function(){return e.length};b.hasWriteFunction=typeof c.write==="function";b.dispose=function(){d&&a.utils.domNodeDisposal.removeDisposeCallback(d,i);l()};a.subscribable.call(b);a.utils.extend(b,a.dependentObservable.fn);c.deferEvaluation!==true&&f();a.exportProperty(b,"dispose",b.dispose);a.exportProperty(b,"getDependenciesCount",b.getDependenciesCount);return b};a.dependentObservable.fn={__ko_proto__:a.dependentObservable};a.dependentObservable.__ko_proto__=a.observable;a.exportSymbol("ko.dependentObservable",a.dependentObservable);a.exportSymbol("ko.computed",a.dependentObservable);(function(){var e=10;a.toJS=function(b){if(arguments.length==0)throw new Error("When calling ko.toJS, pass the object you want to convert.");return c(b,function(b){for(var c=0;a.isObservable(b)&&c<e;c++)b=b();return b})};a.toJSON=function(c){var b=a.toJS(c);return a.utils.stringifyJson(b)};function c(a,h,e){e=e||new f;a=h(a);var i=typeof a=="object"&&a!==null&&a!==b&&!(a instanceof Date);if(!i)return a;var g=a instanceof Array?[]:{};e.save(a,g);d(a,function(f){var d=h(a[f]);switch(typeof d){case"boolean":case"number":case"string":case"function":g[f]=d;break;case"object":case"undefined":var i=e.get(d);g[f]=i!==b?i:c(d,h,e)}});return g}function d(a,c){if(a instanceof Array)for(var b=0;b<a.length;b++)c(b);else for(var d in a)c(d)}function f(){var d=[],c=[];this.save=function(f,e){var b=a.utils.arrayIndexOf(d,f);if(b>=0)c[b]=e;else{d.push(f);c.push(e)}};this.get=function(f){var e=a.utils.arrayIndexOf(d,f);return e>=0?c[e]:b}}})();a.exportSymbol("ko.toJS",a.toJS);a.exportSymbol("ko.toJSON",a.toJSON);(function(){var c="__ko__hasDomDataOptionValue__";a.selectExtensions={readValue:function(d){return d.tagName=="OPTION"?d[c]===true?a.utils.domData.get(d,a.bindingHandlers.options.optionValueDomDataKey):d.getAttribute("value"):d.tagName=="SELECT"?d.selectedIndex>=0?a.selectExtensions.readValue(d.options[d.selectedIndex]):b:d.value},writeValue:function(d,e){if(d.tagName=="OPTION")switch(typeof e){case"string":a.utils.domData.set(d,a.bindingHandlers.options.optionValueDomDataKey,b);if(c in d)delete d[c];d.value=e;break;default:a.utils.domData.set(d,a.bindingHandlers.options.optionValueDomDataKey,e);d[c]=true;d.value=typeof e==="number"?e:""}else if(d.tagName=="SELECT"){for(var f=d.options.length-1;f>=0;f--)if(a.selectExtensions.readValue(d.options[f])==e){d.selectedIndex=f;break}}else{if(e===null||e===b)e="";d.value=e}}}})();a.exportSymbol("ko.selectExtensions",a.selectExtensions);a.exportSymbol("ko.selectExtensions.readValue",a.selectExtensions.readValue);a.exportSymbol("ko.selectExtensions.writeValue",a.selectExtensions.writeValue);a.jsonExpressionRewriting=function(){var d=/\@ko_token_(\d+)\@/g,c=/^[\_$a-z][\_$a-z0-9]*(\[.*?\])*(\.[\_$a-z][\_$a-z0-9]*(\[.*?\])*)*$/i,e=["true","false"];function b(a,c){var b=null;while(a!=b){b=a;a=a.replace(d,function(b,a){return c[a]})}return a}function f(b){return a.utils.arrayIndexOf(e,a.utils.stringTrim(b).toLowerCase())>=0?false:b.match(c)!==null}function g(c){var b=a.utils.stringTrim(c);switch(b.length&&b.charAt(0)){case"'":case'"':return c;default:return"'"+b+"'"}}return{bindingRewriteValidators:[],parseObjectLiteral:function(r){var c=a.utils.stringTrim(r);if(c.length<3)return[];if(c.charAt(0)==="{")c=c.substring(1,c.length-1);for(var h=[],e=null,g,d=0;d<c.length;d++){var f=c.charAt(d);if(e===null)switch(f){case'"':case"'":case"/":e=d;g=f}else if(f==g&&c.charAt(d-1)!=="\\"){var m=c.substring(e,d+1);h.push(m);var k="@ko_token_"+(h.length-1)+"@";c=c.substring(0,e)+k+c.substring(d+1);d-=m.length-k.length;e=null}}e=null;g=null;for(var n=0,j=null,d=0;d<c.length;d++){var f=c.charAt(d);if(e===null)switch(f){case"{":e=d;j=f;g="}";break;case"(":e=d;j=f;g=")";break;case"[":e=d;j=f;g="]"}if(f===j)n++;else if(f===g){n--;if(n===0){var m=c.substring(e,d+1);h.push(m);var k="@ko_token_"+(h.length-1)+"@";c=c.substring(0,e)+k+c.substring(d+1);d-=m.length-k.length;e=null}}}for(var o=[],q=c.split(","),p=0,u=q.length;p<u;p++){var i=q[p],l=i.indexOf(":");if(l>0&&l<i.length-1){var t=i.substring(0,l),s=i.substring(l+1);o.push({key:b(t,h),value:b(s,h)})}else o.push({unknown:b(i,h)})}return o},insertPropertyAccessorsIntoJson:function(e){for(var m=typeof e==="string"?a.jsonExpressionRewriting.parseObjectLiteral(e):e,b=[],d=[],c,k=0;c=m[k];k++){b.length>0&&b.push(",");if(c.key){var j=g(c.key),i=c.value;b.push(j);b.push(":");b.push(i);if(f(a.utils.stringTrim(i))){d.length>0&&d.push(", ");d.push(j+" : function(__ko_value) { "+i+" = __ko_value; }")}}else c.unknown&&b.push(c.unknown)}var h=b.join("");if(d.length>0){var l=d.join("");h=h+", '_ko_property_writers' : { "+l+" } "}return h},keyValueArrayContainsKey:function(c,d){for(var b=0;b<c.length;b++)if(a.utils.stringTrim(c[b].key)==d)return true;return false}}}();a.exportSymbol("ko.jsonExpressionRewriting",a.jsonExpressionRewriting);a.exportSymbol("ko.jsonExpressionRewriting.bindingRewriteValidators",a.jsonExpressionRewriting.bindingRewriteValidators);a.exportSymbol("ko.jsonExpressionRewriting.parseObjectLiteral",a.jsonExpressionRewriting.parseObjectLiteral);a.exportSymbol("ko.jsonExpressionRewriting.insertPropertyAccessorsIntoJson",a.jsonExpressionRewriting.insertPropertyAccessorsIntoJson);(function(){var d=document.createComment("test").text==="<!--test-->",j=d?/^<!--\s*ko\s+(.*\:.*)\s*-->$/:/^\s*ko\s+(.*\:.*)\s*$/,k=d?/^<!--\s*\/ko\s*-->$/:/^\s*\/ko\s*$/,h={ul:true,ol:true};function c(a){return a.nodeType==8&&(d?a.text:a.nodeValue).match(j)}function e(a){return a.nodeType==8&&(d?a.text:a.nodeValue).match(k)}function g(d,g){var a=d,b=1,f=[];while(a=a.nextSibling){if(e(a)){b--;if(b===0)return f}f.push(a);if(c(a))b++}if(!g)throw new Error("Cannot find closing comment tag to match: "+d.nodeValue);return null}function f(b,c){var a=g(b,c);return a?a.length>0?a[a.length-1].nextSibling:b.nextSibling:null}function l(c,e){for(var d=[],b=0,f=c.length;b<f;b++){e&&a.utils.domNodeDisposal.cleanNode(c[b]);d.push(a.utils.outerHTML(c[b]))}return String.prototype.concat.apply("",d)}function i(g){var a=g.firstChild,b=null;if(a)do if(b)b.push(a);else if(c(a)){var d=f(a,true);if(d)a=d;else b=[a]}else if(e(a))b=[a];while(a=a.nextSibling);return b}a.virtualElements={allowedBindings:{},childNodes:function(a){return c(a)?g(a):a.childNodes},emptyNode:function(b){if(!c(b))a.utils.emptyDomNode(b);else for(var e=a.virtualElements.childNodes(b),d=0,f=e.length;d<f;d++)a.removeNode(e[d])},setDomNodeChildren:function(b,d){if(!c(b))a.utils.setDomNodeChildren(b,d);else{a.virtualElements.emptyNode(b);for(var f=b.nextSibling,e=0,g=d.length;e<g;e++)f.parentNode.insertBefore(d[e],f)}},prepend:function(a,b){if(!c(a))if(a.firstChild)a.insertBefore(b,a.firstChild);else a.appendChild(b);else a.parentNode.insertBefore(b,a.nextSibling)},insertAfter:function(a,d,b){if(!c(a))if(b.nextSibling)a.insertBefore(d,b.nextSibling);else a.appendChild(d);else a.parentNode.insertBefore(d,b.nextSibling)},nextSibling:function(a){return!c(a)?a.nextSibling&&e(a.nextSibling)?b:a.nextSibling:f(a).nextSibling},virtualNodeBindingValue:function(b){var a=c(b);return a?a[1]:null},extractAnonymousTemplateIfVirtualElement:function(b){if(a.virtualElements.virtualNodeBindingValue(b)){var d=a.virtualElements.childNodes(b),c=l(d,true);a.virtualElements.emptyNode(b);new a.templateSources.anonymousTemplate(b).text(c)}},normaliseVirtualElementDomStructure:function(b){if(!h[b.tagName.toLowerCase()])return;var a=b.firstChild;if(a)do if(a.nodeType===1){var c=i(a);if(c)for(var e=a.nextSibling,d=0;d<c.length;d++)if(e)b.insertBefore(c[d],e);else b.appendChild(c[d])}while(a=a.nextSibling)}}})();(function(){var b="data-bind";a.bindingProvider=function(){};a.utils.extend(a.bindingProvider.prototype,{nodeHasBindings:function(c){switch(c.nodeType){case 1:return c.getAttribute(b)!=null;case 8:return a.virtualElements.virtualNodeBindingValue(c)!=null;default:return false}},getBindings:function(c,a){var b=this.getBindingsString(c,a);return b?this.parseBindingsString(b,a):null},getBindingsString:function(c){switch(c.nodeType){case 1:return c.getAttribute(b);case 8:return a.virtualElements.virtualNodeBindingValue(c);default:return null}},parseBindingsString:function(d,b){try{var e=b.$data,f=" { "+a.jsonExpressionRewriting.insertPropertyAccessorsIntoJson(d)+" } ";return a.utils.evalWithinScope(f,e===null?c:e,b)}catch(g){throw new Error("Unable to parse bindings.\nMessage: "+g+";\nBindings value: "+d);}}});a.bindingProvider.instance=new a.bindingProvider})();a.exportSymbol("ko.bindingProvider",a.bindingProvider);(function(){a.bindingHandlers={};a.bindingContext=function(b,a){this.$data=b;if(a){this.$parent=a.$data;this.$parents=(a.$parents||[]).slice(0);this.$parents.unshift(this.$parent);this.$root=a.$root}else{this.$parents=[];this.$root=b}};a.bindingContext.prototype.createChildContext=function(b){return new a.bindingContext(b,this)};function h(b){var c=a.virtualElements.allowedBindings[b];if(!c)throw new Error("The binding '"+b+"' cannot be used with virtual elements");}function e(f,e){var b,c=e.childNodes[0];while(b=c){c=a.virtualElements.nextSibling(b);d(f,b,false)}}function d(h,b,d){var f=true,c=b.nodeType==1;c&&a.virtualElements.normaliseVirtualElementDomStructure(b);var i=c&&d||a.bindingProvider.instance.nodeHasBindings(b);if(i)f=g(b,null,h,d).shouldBindDescendants;c&&f&&e(h,b)}function g(c,i,f,l){var g=0;a.virtualElements.extractAnonymousTemplateIfVirtualElement(c);var d;function k(a){return function(){return d[a]}}function j(){return d}var e;new a.dependentObservable(function(){var o=f&&f instanceof a.bindingContext?f:new a.bindingContext(a.utils.unwrapObservable(f)),q=o.$data;l&&a.storedBindingContextForNode(c,o);var r=typeof i=="function"?i():i;d=r||a.bindingProvider.instance.getBindings(c,o);if(d){if(g===0){g=1;for(var m in d){var n=a.bindingHandlers[m];n&&c.nodeType===8&&h(m);if(n&&typeof n.init=="function"){var t=n.init,p=t(c,k(m),j,q,o);if(p&&p.controlsDescendantBindings){if(e!==b)throw new Error("Multiple bindings ("+e+" and "+m+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");e=m}}}g=2}if(g===2)for(var m in d){var n=a.bindingHandlers[m];if(n&&typeof n.update=="function"){var s=n.update;s(c,k(m),j,q,o)}}}},null,{disposeWhenNodeIsRemoved:c});return{shouldBindDescendants:e===b}}var f="__ko_bindingContext__";a.storedBindingContextForNode=function(b,c){if(arguments.length==2)a.utils.domData.set(b,f,c);else return a.utils.domData.get(b,f)};a.applyBindingsToNode=function(b,d,c){b.nodeType===1&&a.virtualElements.normaliseVirtualElementDomStructure(b);return g(b,d,c,true)};a.applyBindingsToDescendants=function(b,a){a.nodeType===1&&e(b,a)};a.applyBindings=function(b,a){if(a&&a.nodeType!==1&&a.nodeType!==8)throw new Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");a=a||c.document.body;d(b,a,true)};a.contextFor=function(c){switch(c.nodeType){case 1:case 8:var d=a.storedBindingContextForNode(c);if(d)return d;if(c.parentNode)return a.contextFor(c.parentNode)}return b};a.dataFor=function(d){var c=a.contextFor(d);return c?c.$data:b};a.exportSymbol("ko.bindingHandlers",a.bindingHandlers);a.exportSymbol("ko.applyBindings",a.applyBindings);a.exportSymbol("ko.applyBindingsToDescendants",a.applyBindingsToDescendants);a.exportSymbol("ko.applyBindingsToNode",a.applyBindingsToNode);a.exportSymbol("ko.contextFor",a.contextFor);a.exportSymbol("ko.dataFor",a.dataFor)})();var f=["click"];a.utils.arrayForEach(f,function(b){a.bindingHandlers[b]={init:function(g,e,c,f){var d=function(){var a={};a[b]=e();return a};return a.bindingHandlers.event.init.call(this,g,d,c,f)}}});a.bindingHandlers.event={init:function(g,b,e,c){var f=b()||{};for(var d in f)(function(){var f=d;typeof f=="string"&&a.utils.registerEventHandler(g,f,function(d){var g,h=b()[f];if(!h)return;var j=e();try{var i=a.utils.makeArray(arguments);i.unshift(c);g=h.apply(c,i)}finally{if(g!==true)if(d.preventDefault)d.preventDefault();else d.returnValue=false}var k=j[f+"Bubble"]!==false;if(!k){d.cancelBubble=true;d.stopPropagation&&d.stopPropagation()}})})()}};a.bindingHandlers.submit={init:function(c,b,e,d){if(typeof b()!="function")throw new Error("The value for a submit binding must be a function");a.utils.registerEventHandler(c,"submit",function(a){var e,f=b();try{e=f.call(d,c)}finally{if(e!==true)if(a.preventDefault)a.preventDefault();else a.returnValue=false}})}};a.bindingHandlers.visible={update:function(b,e){var d=a.utils.unwrapObservable(e()),c=!(b.style.display=="none");if(d&&!c)b.style.display="";else if(!d&&c)b.style.display="none"}};a.bindingHandlers.enable={update:function(b,d){var c=a.utils.unwrapObservable(d());if(c&&b.disabled)b.removeAttribute("disabled");else if(!c&&!b.disabled)b.disabled=true}};a.bindingHandlers.disable={update:function(c,b){a.bindingHandlers.enable.update(c,function(){return!a.utils.unwrapObservable(b())})}};function d(b,c,d){if(d)c!==a.selectExtensions.readValue(b)&&a.selectExtensions.writeValue(b,c);c!==a.selectExtensions.readValue(b)&&a.utils.triggerEvent(b,"change")}a.bindingHandlers.value={init:function(e,f,d){var c=["change"],b=d().valueUpdate;if(b){if(typeof b=="string")b=[b];a.utils.arrayPushAll(c,b);c=a.utils.arrayGetDistinctValues(c)}a.utils.arrayForEach(c,function(b){var c=false;if(a.utils.stringStartsWith(b,"after")){c=true;b=b.substring("after".length)}var g=c?function(a){setTimeout(a,0)}:function(a){a()};a.utils.registerEventHandler(e,b,function(){g(function(){var g=f(),c=a.selectExtensions.readValue(e);if(a.isWriteableObservable(g))g(c);else{var b=d();b._ko_property_writers&&b._ko_property_writers.value&&b._ko_property_writers.value(c)}})})})},update:function(b,i){var c=a.utils.unwrapObservable(i()),e=a.selectExtensions.readValue(b),g=c!=e;if(c===0&&e!==0&&e!=="0")g=true;if(g){var f=function(){a.selectExtensions.writeValue(b,c)};f();var h=b.tagName=="SELECT";h&&setTimeout(f,0)}b.tagName=="SELECT"&&b.length>0&&d(b,c,false)}};a.bindingHandlers.options={update:function(c,s,r){if(c.tagName!="SELECT")throw new Error("options binding applies only to SELECT elements");var o=c.length==0,q=a.utils.arrayMap(a.utils.arrayFilter(c.childNodes,function(a){return a.tagName&&a.tagName=="OPTION"&&a.selected}),function(b){return a.selectExtensions.readValue(b)||b.innerText||b.textContent}),m=c.scrollTop;c.scrollTop=0;var f=a.utils.unwrapObservable(s()),t=c.value;while(c.length>0){a.cleanNode(c.options[0]);c.remove(0)}if(f){var g=r();if(typeof f.length!="number")f=[f];if(g.optionsCaption){var i=document.createElement("OPTION");a.utils.setHtml(i,g.optionsCaption);a.selectExtensions.writeValue(i,b);c.appendChild(i)}for(var e=0,n=f.length;e<n;e++){var i=document.createElement("OPTION"),k=typeof g.optionsValue=="string"?f[e][g.optionsValue]:f[e];k=a.utils.unwrapObservable(k);a.selectExtensions.writeValue(i,k);var j=g.optionsText,h;if(typeof j=="function")h=j(f[e]);else if(typeof j=="string")h=f[e][j];else h=k;if(h===null||h===b)h="";a.utils.setTextContent(i,h);c.appendChild(i)}for(var l=c.getElementsByTagName("OPTION"),p=0,e=0,n=l.length;e<n;e++)if(a.utils.arrayIndexOf(q,a.selectExtensions.readValue(l[e]))>=0){a.utils.setOptionNodeSelectionState(l[e],true);p++}if(m)c.scrollTop=m;o&&"value"in g&&d(c,a.utils.unwrapObservable(g.value),true)}}};a.bindingHandlers.options.optionValueDomDataKey="__ko.optionValueDomData__";a.bindingHandlers.selectedOptions={getSelectedValuesFromSelectNode:function(f){for(var d=[],e=f.childNodes,c=0,g=e.length;c<g;c++){var b=e[c];b.tagName=="OPTION"&&b.selected&&d.push(a.selectExtensions.readValue(b))}return d},init:function(d,c,b){a.utils.registerEventHandler(d,"change",function(){var e=c();if(a.isWriteableObservable(e))e(a.bindingHandlers.selectedOptions.getSelectedValuesFromSelectNode(this));else{var d=b();d._ko_property_writers&&d._ko_property_writers.value&&d._ko_property_writers.value(a.bindingHandlers.selectedOptions.getSelectedValuesFromSelectNode(this))}})},update:function(e,g){if(e.tagName!="SELECT")throw new Error("values binding applies only to SELECT elements");var b=a.utils.unwrapObservable(g());if(b&&typeof b.length=="number")for(var f=e.childNodes,d=0,h=f.length;d<h;d++){var c=f[d];c.tagName=="OPTION"&&a.utils.setOptionNodeSelectionState(c,a.utils.arrayIndexOf(b,a.selectExtensions.readValue(c))>=0)}}};a.bindingHandlers.text={update:function(c,b){a.utils.setTextContent(c,b())}};a.bindingHandlers.html={init:function(){return{controlsDescendantBindings:true}},update:function(c,b){var d=a.utils.unwrapObservable(b());a.utils.setHtml(c,d)}};a.bindingHandlers.css={update:function(f,e){var c=a.utils.unwrapObservable(e()||{});for(var b in c)if(typeof b=="string"){var d=a.utils.unwrapObservable(c[b]);a.utils.toggleDomNodeCssClass(f,b,d)}}};a.bindingHandlers.style={update:function(f,d){var c=a.utils.unwrapObservable(d()||{});for(var b in c)if(typeof b=="string"){var e=a.utils.unwrapObservable(c[b]);f.style[b]=e||""}}};a.bindingHandlers.uniqueName={init:function(b,c){if(c()){b.name="ko_unique_"+ ++a.bindingHandlers.uniqueName.currentIndex;(a.utils.isIe6||a.utils.isIe7)&&b.mergeAttributes(document.createElement("<input name='"+b.name+"'/>"),false)}}};a.bindingHandlers.uniqueName.currentIndex=0;a.bindingHandlers.checked={init:function(b,e,c){var d=function(){var f;if(b.type=="checkbox")f=b.checked;else if(b.type=="radio"&&b.checked)f=b.value;else return;var d=e();if(b.type=="checkbox"&&a.utils.unwrapObservable(d)instanceof Array){var g=a.utils.arrayIndexOf(a.utils.unwrapObservable(d),b.value);if(b.checked&&g<0)d.push(b.value);else!b.checked&&g>=0&&d.splice(g,1)}else if(a.isWriteableObservable(d))d()!==f&&d(f);else{var h=c();h._ko_property_writers&&h._ko_property_writers.checked&&h._ko_property_writers.checked(f)}};a.utils.registerEventHandler(b,"click",d);b.type=="radio"&&!b.name&&a.bindingHandlers.uniqueName.init(b,function(){return true})},update:function(b,d){var c=a.utils.unwrapObservable(d());if(b.type=="checkbox")if(c instanceof Array)b.checked=a.utils.arrayIndexOf(c,b.value)>=0;else b.checked=c;else if(b.type=="radio")b.checked=b.value==c}};a.bindingHandlers.attr={update:function(e,g){var f=a.utils.unwrapObservable(g())||{};for(var d in f)if(typeof d=="string"){var c=a.utils.unwrapObservable(f[d]);if(c===false||c===null||c===b)e.removeAttribute(d);else e.setAttribute(d,c.toString())}}};a.bindingHandlers.hasfocus={init:function(c,e,d){var b=function(b){var f=e();if(b==a.utils.unwrapObservable(f))return;if(a.isWriteableObservable(f))f(b);else{var c=d();c._ko_property_writers&&c._ko_property_writers.hasfocus&&c._ko_property_writers.hasfocus(b)}};a.utils.registerEventHandler(c,"focus",function(){b(true)});a.utils.registerEventHandler(c,"focusin",function(){b(true)});a.utils.registerEventHandler(c,"blur",function(){b(false)});a.utils.registerEventHandler(c,"focusout",function(){b(false)})},update:function(b,d){var c=a.utils.unwrapObservable(d());c?b.focus():b.blur();a.utils.triggerEvent(b,c?"focusin":"focusout")}};a.bindingHandlers["with"]={makeTemplateValueAccessor:function(b){return function(){var c=b();return{"if":c,data:c,templateEngine:a.nativeTemplateEngine.instance}}},init:function(c,b){return a.bindingHandlers.template.init(c,a.bindingHandlers["with"].makeTemplateValueAccessor(b))},update:function(f,d,b,e,c){return a.bindingHandlers.template.update(f,a.bindingHandlers["with"].makeTemplateValueAccessor(d),b,e,c)}};a.jsonExpressionRewriting.bindingRewriteValidators["with"]=false;a.virtualElements.allowedBindings["with"]=true;a.bindingHandlers["if"]={makeTemplateValueAccessor:function(b){return function(){return{"if":b(),templateEngine:a.nativeTemplateEngine.instance}}},init:function(c,b){return a.bindingHandlers.template.init(c,a.bindingHandlers["if"].makeTemplateValueAccessor(b))},update:function(f,d,b,e,c){return a.bindingHandlers.template.update(f,a.bindingHandlers["if"].makeTemplateValueAccessor(d),b,e,c)}};a.jsonExpressionRewriting.bindingRewriteValidators["if"]=false;a.virtualElements.allowedBindings["if"]=true;a.bindingHandlers.ifnot={makeTemplateValueAccessor:function(b){return function(){return{ifnot:b(),templateEngine:a.nativeTemplateEngine.instance}}},init:function(c,b){return a.bindingHandlers.template.init(c,a.bindingHandlers.ifnot.makeTemplateValueAccessor(b))},update:function(f,d,b,e,c){return a.bindingHandlers.template.update(f,a.bindingHandlers.ifnot.makeTemplateValueAccessor(d),b,e,c)}};a.jsonExpressionRewriting.bindingRewriteValidators.ifnot=false;a.virtualElements.allowedBindings.ifnot=true;a.bindingHandlers.foreach={makeTemplateValueAccessor:function(b){return function(){var c=a.utils.unwrapObservable(b());return!c||typeof c.length=="number"?{foreach:c,templateEngine:a.nativeTemplateEngine.instance}:{foreach:c.data,includeDestroyed:c.includeDestroyed,afterAdd:c.afterAdd,beforeRemove:c.beforeRemove,afterRender:c.afterRender,templateEngine:a.nativeTemplateEngine.instance}}},init:function(c,b){return a.bindingHandlers.template.init(c,a.bindingHandlers.foreach.makeTemplateValueAccessor(b))},update:function(f,d,b,e,c){return a.bindingHandlers.template.update(f,a.bindingHandlers.foreach.makeTemplateValueAccessor(d),b,e,c)}};a.jsonExpressionRewriting.bindingRewriteValidators.foreach=false;a.virtualElements.allowedBindings.foreach=true;a.exportSymbol("ko.allowedVirtualElementBindings",a.virtualElements.allowedBindings);a.templateEngine=function(){};a.templateEngine.prototype.renderTemplateSource=function(){throw"Override renderTemplateSource";};a.templateEngine.prototype.createJavaScriptEvaluatorBlock=function(){throw"Override createJavaScriptEvaluatorBlock";};a.templateEngine.prototype.makeTemplateSource=function(b){if(typeof b=="string"){var c=document.getElementById(b);if(!c)throw new Error("Cannot find template with ID "+b);return new a.templateSources.domElement(c)}else if(b.nodeType==1||b.nodeType==8)return new a.templateSources.anonymousTemplate(b);else throw new Error("Unknown template type: "+b);};a.templateEngine.prototype.renderTemplate=function(c,a,d){var b=this.makeTemplateSource(c);return this.renderTemplateSource(b,a,d)};a.templateEngine.prototype.isTemplateRewritten=function(a){return this.allowTemplateRewriting===false?true:this.knownRewrittenTemplates&&this.knownRewrittenTemplates[a]?true:this.makeTemplateSource(a).data("isRewritten")};a.templateEngine.prototype.rewriteTemplate=function(b,c){var a=this.makeTemplateSource(b),d=c(a.text());a.text(d);a.data("isRewritten",true);if(typeof b=="string"){this.knownRewrittenTemplates=this.knownRewrittenTemplates||{};this.knownRewrittenTemplates[b]=true}};a.exportSymbol("ko.templateEngine",a.templateEngine);a.templateRewriting=function(){var d=/(<[a-z]+\d*(\s+(?!data-bind=)[a-z0-9\-]+(=(\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind=(["'])([\s\S]*?)\5/gi,c=/<!--\s*ko\b\s*([\s\S]*?)\s*-->/g;function e(c){for(var g=a.jsonExpressionRewriting.bindingRewriteValidators,b=0;b<c.length;b++){var e=c[b].key;if(g.hasOwnProperty(e)){var d=g[e];if(typeof d==="function"){var f=d(c[b].value);if(f)throw new Error(f);}else if(!d)throw new Error("This template engine does not support the '"+e+"' binding within its templates");}}}function b(f,h,g){var b=a.jsonExpressionRewriting.parseObjectLiteral(f);e(b);var d=a.jsonExpressionRewriting.insertPropertyAccessorsIntoJson(b),c="ko.templateRewriting.applyMemoizedBindingsToNextSibling(function() {             return (function() { return { "+d+" } })()         })";return g.createJavaScriptEvaluatorBlock(c)+h}return{ensureTemplateIsRewritten:function(c,b){!b.isTemplateRewritten(c)&&b.rewriteTemplate(c,function(c){return a.templateRewriting.memoizeBindingAttributeSyntax(c,b)})},memoizeBindingAttributeSyntax:function(e,a){return e.replace(d,function(){return b(arguments[6],arguments[1],a)}).replace(c,function(){return b(arguments[1],"<!-- ko -->",a)})},applyMemoizedBindingsToNextSibling:function(b){return a.memoization.memoize(function(c,d){c.nextSibling&&a.applyBindingsToNode(c.nextSibling,b,d)})}}}();a.exportSymbol("ko.templateRewriting",a.templateRewriting);a.exportSymbol("ko.templateRewriting.applyMemoizedBindingsToNextSibling",a.templateRewriting.applyMemoizedBindingsToNextSibling);(function(){a.templateSources={};a.templateSources.domElement=function(a){this.domElement=a};a.templateSources.domElement.prototype.text=function(){if(arguments.length==0)return this.domElement.tagName.toLowerCase()=="script"?this.domElement.text:this.domElement.innerHTML;else{var b=arguments[0];if(this.domElement.tagName.toLowerCase()=="script")this.domElement.text=b;else a.utils.setHtml(this.domElement,b)}};a.templateSources.domElement.prototype.data=function(b){if(arguments.length===1)return a.utils.domData.get(this.domElement,"templateSourceData_"+b);else a.utils.domData.set(this.domElement,"templateSourceData_"+b,arguments[1])};var b="__ko_anon_template__";a.templateSources.anonymousTemplate=function(a){this.domElement=a};a.templateSources.anonymousTemplate.prototype=new a.templateSources.domElement;a.templateSources.anonymousTemplate.prototype.text=function(){if(arguments.length==0)return a.utils.domData.get(this.domElement,b);else{var c=arguments[0];a.utils.domData.set(this.domElement,b,c)}};a.exportSymbol("ko.templateSources",a.templateSources);a.exportSymbol("ko.templateSources.domElement",a.templateSources.domElement);a.exportSymbol("ko.templateSources.anonymousTemplate",a.templateSources.anonymousTemplate)})();(function(){var c;a.setTemplateEngine=function(d){if(d!=b&&!(d instanceof a.templateEngine))throw"templateEngine must inherit from ko.templateEngine";c=d};function d(b,d,c){for(var a=0;node=b[a];a++){if(node.parentNode!==d)continue;(node.nodeType===1||node.nodeType===8)&&c(node)}}a.activateBindingsOnTemplateRenderedNodes=function(b,e){var f=a.utils.arrayPushAll([],b),c=b.length>0?b[0].parentNode:null;d(f,c,function(b){a.applyBindings(e,b)});d(f,c,function(b){a.memoization.unmemoizeDomNodeAndDescendants(b,[e])})};function f(a){return a.nodeType?a:a.length>0?a[0]:null}function g(g,i,j,f,d){d=d||{};var h=d.templateEngine||c;a.templateRewriting.ensureTemplateIsRewritten(j,h);var b=h.renderTemplate(j,f,d);if(typeof b.length!="number"||b.length>0&&typeof b[0].nodeType!="number")throw"Template engine must return an array of DOM nodes";var e=false;switch(i){case"replaceChildren":a.virtualElements.setDomNodeChildren(g,b);e=true;break;case"replaceNode":a.utils.replaceDomNodes(g,b);e=true;break;case"ignoreTargetNode":break;default:throw new Error("Unknown renderMode: "+i);}if(e){a.activateBindingsOnTemplateRenderedNodes(b,f);d.afterRender&&d.afterRender(b,f.$data)}return b}a.renderTemplate=function(k,h,j,e,i){j=j||{};if((j.templateEngine||c)==b)throw"Set a template engine before calling renderTemplate";i=i||"replaceChildren";if(e){var d=f(e),m=function(){return!d||!a.utils.domNodeIsAttachedToDocument(d)},l=d&&i=="replaceNode"?d.parentNode:d;return new a.dependentObservable(function(){var b=h&&h instanceof a.bindingContext?h:new a.bindingContext(a.utils.unwrapObservable(h)),l=typeof k=="function"?k(b.$data):k,c=g(e,i,l,b,j);if(i=="replaceNode"){e=c;d=f(e)}},null,{disposeWhen:m,disposeWhenNodeIsRemoved:l})}else return a.memoization.memoize(function(b){a.renderTemplate(k,h,j,b,"replaceNode")})};a.renderTemplateForEach=function(d,i,c,f,j){var e=function(b){return j.createChildContext(a.utils.unwrapObservable(b))},h=function(f,b){var d=e(f);a.activateBindingsOnTemplateRenderedNodes(b,d);c.afterRender&&c.afterRender(b,d.$data)};return new a.dependentObservable(function(){var j=a.utils.unwrapObservable(i)||[];if(typeof j.length=="undefined")j=[j];var k=a.utils.arrayFilter(j,function(d){return c.includeDestroyed||d===b||d===null||!a.utils.unwrapObservable(d._destroy)});a.utils.setDomNodeChildrenFromArrayMapping(f,k,function(a){var b=typeof d=="function"?d(a):d;return g(null,"ignoreTargetNode",b,e(a),c)},c,h)},null,{disposeWhenNodeIsRemoved:f})};var e="__ko__templateSubscriptionDomDataKey__";function h(c,d){var b=a.utils.domData.get(c,e);b&&typeof b.dispose=="function"&&b.dispose();a.utils.domData.set(c,e,d)}a.bindingHandlers.template={init:function(b,d){var c=a.utils.unwrapObservable(d());if(typeof c!="string"&&!c.name&&b.nodeType==1){new a.templateSources.anonymousTemplate(b).text(b.innerHTML);a.utils.emptyDomNode(b)}return{controlsDescendantBindings:true}},update:function(d,j,l,m,g){var b=a.utils.unwrapObservable(j()),e,c=true;if(typeof b=="string")e=b;else{e=b.name;if("if"in b)c=c&&a.utils.unwrapObservable(b["if"]);if("ifnot"in b)c=c&&!a.utils.unwrapObservable(b.ifnot)}var f=null;if(typeof b==="object"&&"foreach"in b){var k=c&&b.foreach||[];f=a.renderTemplateForEach(e||d,k,b,d,g)}else if(c){var i=typeof b=="object"&&"data"in b?g.createChildContext(a.utils.unwrapObservable(b.data)):g;f=a.renderTemplate(e||d,i,b,d)}else a.virtualElements.emptyNode(d);h(d,f)}};a.jsonExpressionRewriting.bindingRewriteValidators.template=function(c){var b=a.jsonExpressionRewriting.parseObjectLiteral(c);return b.length==1&&b[0].unknown?null:a.jsonExpressionRewriting.keyValueArrayContainsKey(b,"name")?null:"This template engine does not support anonymous templates nested within its templates"};a.virtualElements.allowedBindings.template=true})();a.exportSymbol("ko.setTemplateEngine",a.setTemplateEngine);a.exportSymbol("ko.renderTemplate",a.renderTemplate);(function(){function d(h,g,f){for(var c=[],e=0;e<=g.length;e++)c[e]=[];for(var e=0,i=Math.min(h.length,f);e<=i;e++)c[0][e]=e;for(var e=1,i=Math.min(g.length,f);e<=i;e++)c[e][0]=e;for(var o=h.length,d,n=g.length,p,q,a=1;a<=o;a++){var k=Math.max(1,a-f),j=Math.min(n,a+f);for(d=k;d<=j;d++)if(h[a-1]===g[d-1])c[d][a]=c[d-1][a-1];else{var l=c[d-1][a]===b?Number.MAX_VALUE:c[d-1][a]+1,m=c[d][a-1]===b?Number.MAX_VALUE:c[d][a-1]+1;c[d][a]=Math.min(l,m)}}return c}function c(g,j,l){var a=j.length,c=l.length,i=[],d=g[c][a];if(d===b)return null;while(a>0||c>0){var k=g[c][a],f=c>0?g[c-1][a]:d+1,e=a>0?g[c][a-1]:d+1,h=c>0&&a>0?g[c-1][a-1]:d+1;if(f===b||f<k-1)f=d+1;if(e===b||e<k-1)e=d+1;if(h<k-1)h=d+1;if(f<=e&&f<h){i.push({status:"added",value:l[c-1]});c--}else if(e<f&&e<h){i.push({status:"deleted",value:j[a-1]});a--}else{i.push({status:"retained",value:j[a-1]});c--;a--}}return i.reverse()}a.utils.compareArrays=function(f,e,g){if(g===b)return a.utils.compareArrays(f,e,1)||a.utils.compareArrays(f,e,10)||a.utils.compareArrays(f,e,Number.MAX_VALUE);else{f=f||[];e=e||[];var h=d(f,e,g);return c(h,f,e)}}})();a.exportSymbol("ko.utils.compareArrays",a.utils.compareArrays);(function(){function d(a){if(a.length>2){var b=a[0],d=a[a.length-1],c=[b];while(b!==d){b=b.nextSibling;if(!b)return;c.push(b)}Array.prototype.splice.apply(a,[0,a.length].concat(c))}}function e(g,h,e,c){var b=[],f=a.dependentObservable(function(){var f=h(e)||[];if(b.length>0){d(b);a.utils.replaceDomNodes(b,f);c&&c(e,f)}b.splice(0,b.length);a.utils.arrayPushAll(b,f)},null,{disposeWhenNodeIsRemoved:g,disposeWhen:function(){return b.length==0||!a.utils.domNodeIsAttachedToDocument(b[0])}});return{mappedNodes:b,dependentObservable:f}}var c="setDomNodeChildrenFromArrayMapping_lastMappingResult";a.utils.setDomNodeChildrenFromArrayMapping=function(j,u,B,k,r){u=u||[];k=k||{};for(var y=a.utils.domData.get(j,c)===b,l=a.utils.domData.get(j,c)||[],A=a.utils.arrayMap(l,function(a){return a.arrayEntry}),i=a.utils.compareArrays(A,u),s=[],h=0,g=[],n=[],m=null,f=0,C=i.length;f<C;f++)switch(i[f].status){case"retained":var o=l[h];s.push(o);if(o.domNodes.length>0)m=o.domNodes[o.domNodes.length-1];h++;break;case"deleted":l[h].dependentObservable.dispose();d(l[h].domNodes);a.utils.arrayForEach(l[h].domNodes,function(a){g.push({element:a,index:f,value:i[f].value});m=a});h++;break;case"added":var w=i[f].value,x=e(j,B,w,r),p=x.mappedNodes;s.push({arrayEntry:i[f].value,domNodes:p,dependentObservable:x.dependentObservable});for(var t=0,z=p.length;t<z;t++){var q=p[t];n.push({element:q,index:f,value:i[f].value});if(m==null)a.virtualElements.prepend(j,q);else a.virtualElements.insertAfter(j,q,m);m=q}r&&r(w,p)}a.utils.arrayForEach(g,function(b){a.cleanNode(b.element)});var v=false;if(!y){if(k.afterAdd)for(var f=0;f<n.length;f++)k.afterAdd(n[f].element,n[f].index,n[f].value);if(k.beforeRemove){for(var f=0;f<g.length;f++)k.beforeRemove(g[f].element,g[f].index,g[f].value);v=true}}!v&&a.utils.arrayForEach(g,function(b){a.removeNode(b.element)});a.utils.domData.set(j,c,s)}})();a.exportSymbol("ko.utils.setDomNodeChildrenFromArrayMapping",a.utils.setDomNodeChildrenFromArrayMapping);a.nativeTemplateEngine=function(){this.allowTemplateRewriting=false};a.nativeTemplateEngine.prototype=new a.templateEngine;a.nativeTemplateEngine.prototype.renderTemplateSource=function(b){var c=b.text();return a.utils.parseHtmlFragment(c)};a.nativeTemplateEngine.instance=new a.nativeTemplateEngine;a.setTemplateEngine(a.nativeTemplateEngine.instance);a.exportSymbol("ko.nativeTemplateEngine",a.nativeTemplateEngine);(function(){a.jqueryTmplTemplateEngine=function(){var a=this.jQueryTmplVersion=function(){if(typeof jQuery=="undefined"||!jQuery.tmpl)return 0;try{if(jQuery.tmpl.tag.tmpl.open.toString().indexOf("__")>=0)return 2}catch(a){}return 1}();function b(){if(a<2)throw new Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");}function c(b,c,a){return jQuery.tmpl(b,c,a)}this.renderTemplateSource=function(d,g,f){f=f||{};b();var a=d.data("precompiled");if(!a){var e=d.text()||"";e="{{ko_with $item.koBindingContext}}"+e+"{{/ko_with}}";a=jQuery.template(null,e);d.data("precompiled",a)}var j=[g.$data],i=jQuery.extend({koBindingContext:g},f.templateOptions),h=c(a,j,i);h.appendTo(document.createElement("div"));jQuery.fragments={};return h};this.createJavaScriptEvaluatorBlock=function(a){return"{{ko_code ((function() { return "+a+" })()) }}"};this.addTemplate=function(b,a){document.write("<script type='text/html' id='"+b+"'>"+a+"<\/script>")};if(a>0){jQuery.tmpl.tag.ko_code={open:"__.push($1 || '');"};jQuery.tmpl.tag.ko_with={open:"with($1) {",close:"} "}}};a.jqueryTmplTemplateEngine.prototype=new a.templateEngine;var b=new a.jqueryTmplTemplateEngine;b.jQueryTmplVersion>0&&a.setTemplateEngine(b);a.exportSymbol("ko.jqueryTmplTemplateEngine",a.jqueryTmplTemplateEngine)})()})(window);ko.exportSymbol=function(d,e){for(var a=d.split("."),c=window,b=0;b<a.length-1;b++)c=c[a[b]];c[a[a.length-1]]=e};ko.exportProperty=function(a,c,b){a[c]=b};(function(){function n(c,b){for(var a in b)b.hasOwnProperty(a)&&b[a]&&(c[a]&&!(c[a]instanceof Array)?n(c[a],b[a]):c[a]=b[a])}function p(b,c){var a={};n(a,b);n(a,c);return a}function c(a){return a&&typeof a==="object"&&a.constructor==(new Date).constructor?"date":typeof a}function o(b,c){b=b||{};if(b.create instanceof Function||b.update instanceof Function||b.key instanceof Function||b.arrayChanged instanceof Function)b={"":b};if(c)b.ignore=d(c.ignore,b.ignore),b.include=d(c.include,b.include),b.copy=d(c.copy,b.copy);b.ignore=d(b.ignore,a.ignore);b.include=d(b.include,a.include);b.copy=d(b.copy,a.copy);b.mappedProperties=b.mappedProperties||{};return b}function d(a,b){a instanceof Array||(a=c(a)==="undefined"?[]:[a]);b instanceof Array||(b=c(b)==="undefined"?[]:[b]);return a.concat(b)}function u(a,c){var b=ko.dependentObservable;ko.dependentObservable=function(b,e,c){var c=c||{},g=c.deferEvaluation;b&&typeof b=="object"&&(c=b);var d=!1,f=function(b){var c=h({read:function(){d||(ko.utils.arrayRemoveItem(a,b),d=!0);return b.apply(b,arguments)},write:function(a){return b(a)},deferEvaluation:!0});c.__ko_proto__=h;return c};c.deferEvaluation=!0;b=new h(b,e,c);b.__ko_proto__=h;g||(a.push(b),b=f(b));return b};var d=c();ko.dependentObservable=b;return d}function j(a,d,h,m,F,A){var E=ko.utils.unwrapObservable(d)instanceof Array,A=A||"";if(ko.mapping.isMapped(a))var y=ko.utils.unwrapObservable(a)[b],h=p(y,h);var D=function(){return h[m]&&h[m].create instanceof Function},C=function(a){return u(k,function(){return h[m].create({data:a||d,parent:F})})},t=function(){return h[m]&&h[m].update instanceof Function},o=function(a,c){var b={data:c||d,parent:F,target:ko.utils.unwrapObservable(a)};if(ko.isWriteableObservable(a))b.observable=a;return h[m].update(b)};if(f.get(d))return a;m=m||"";if(E){var E=[],y=!1,i=function(a){return a};if(h[m]&&h[m].key)i=h[m].key,y=!0;if(!ko.isObservable(a))a=ko.observableArray([]),a.mappedRemove=function(b){var c=typeof b=="function"?b:function(a){return a===i(b)};return a.remove(function(a){return c(i(a))})},a.mappedRemoveAll=function(b){var c=e(b,i);return a.remove(function(a){return ko.utils.arrayIndexOf(c,i(a))!=-1})},a.mappedDestroy=function(b){var c=typeof b=="function"?b:function(a){return a===i(b)};return a.destroy(function(a){return c(i(a))})},a.mappedDestroyAll=function(b){var c=e(b,i);return a.destroy(function(a){return ko.utils.arrayIndexOf(c,i(a))!=-1})},a.mappedIndexOf=function(b){var c=e(a(),i),b=i(b);return ko.utils.arrayIndexOf(c,b)},a.mappedCreate=function(b){if(a.mappedIndexOf(b)!==-1)throw Error("There already is an object with the key that you specified.");var c=D()?C(b):b;t()&&(b=o(c,b),ko.isWriteableObservable(c)?c(b):c=b);a.push(c);return c};var n=e(ko.utils.unwrapObservable(a),i).sort(),x=e(d,i);y&&x.sort();for(var y=ko.utils.compareArrays(n,x),n={},x=[],B=0,G=y.length;B<G;B++){var w=y[B],v,s=A+"["+B+"]";switch(w.status){case"added":var z=g(ko.utils.unwrapObservable(d),w.value,i);v=ko.utils.unwrapObservable(j(void 0,z,h,m,a,s));s=q(ko.utils.unwrapObservable(d),z,n);x[s]=v;n[s]=!0;break;case"retained":z=g(ko.utils.unwrapObservable(d),w.value,i);v=g(a,w.value,i);j(v,z,h,m,a,s);s=q(ko.utils.unwrapObservable(d),z,n);x[s]=v;n[s]=!0;break;case"deleted":v=g(a,w.value,i)}E.push({event:w.status,item:v})}a(x);h[m]&&h[m].arrayChanged&&ko.utils.arrayForEach(E,function(a){h[m].arrayChanged(a.event,a.item)})}else if(l(d)){a=ko.utils.unwrapObservable(a);if(!a)if(D())return n=C(),t()&&(n=o(n)),n;else{if(t())return o(n);a={}}t()&&(a=o(a));f.save(d,a);r(d,function(b){var c=A.length?A+"."+b:b;if(ko.utils.arrayIndexOf(h.ignore,c)==-1)if(ko.utils.arrayIndexOf(h.copy,c)!=-1)a[b]=d[b];else{var e=f.get(d[b])||j(a[b],d[b],h,b,a,c);if(ko.isWriteableObservable(a[b]))a[b](ko.utils.unwrapObservable(e));else a[b]=e;h.mappedProperties[c]=!0}})}else switch(c(d)){case"function":t()?ko.isWriteableObservable(d)?(d(o(d)),a=d):a=o(d):a=d;break;default:ko.isWriteableObservable(a)?t()?a(o(a)):a(ko.utils.unwrapObservable(d)):(a=D()?C():ko.observable(ko.utils.unwrapObservable(d)),t()&&a(o(a)))}return a}function q(b,d,c){for(var a=0,e=b.length;a<e;a++)if(c[a]!==!0&&b[a]===d)return a;return null}function s(b,d){var a;d&&(a=d(b));c(a)==="undefined"&&(a=b);return ko.utils.unwrapObservable(a)}function g(a,b,c){a=ko.utils.arrayFilter(ko.utils.unwrapObservable(a),function(a){return s(a,c)===b});if(a.length==0)throw Error("When calling ko.update*, the key '"+b+"' was not found!");if(a.length>1&&l(a[0]))throw Error("When calling ko.update*, the key '"+b+"' was not unique!");return a[0]}function e(b,a){return ko.utils.arrayMap(ko.utils.unwrapObservable(b),function(b){return a?s(b,a):b})}function r(b,c){if(b instanceof Array)for(var a=0;a<b.length;a++)c(a);else for(a in b)c(a)}function l(a){var b=c(a);return b==="object"&&a!==null&&b!=="undefined"}function t(){var a=[],b=[];this.save=function(c,d){var e=ko.utils.arrayIndexOf(a,c);e>=0?b[e]=d:(a.push(c),b.push(d))};this.get=function(c){c=ko.utils.arrayIndexOf(a,c);if(c>=0)return b[c]}}ko.mapping={};var b="__ko_mapping__",h=ko.dependentObservable,m=0,k,f,i={include:["_destroy"],ignore:[],copy:[]},a=i;ko.mapping.isMapped=function(a){return(a=ko.utils.unwrapObservable(a))&&a[b]};ko.mapping.fromJS=function(e){if(arguments.length==0)throw Error("When calling ko.fromJS, pass the object you want to convert.");window.setTimeout(function(){m=0},0);m++||(k=[],f=new t);var a,c;arguments.length==2&&(arguments[1][b]?c=arguments[1]:a=arguments[1]);arguments.length==3&&(a=arguments[1],c=arguments[2]);c&&(a=p(a,c[b]));a=o(a);var d=j(c,e,a);c&&(d=c);--m||window.setTimeout(function(){ko.utils.arrayForEach(k,function(a){a&&a()})},0);d[b]=p(d[b],a);return d};ko.mapping.fromJSON=function(a){var b=ko.utils.parseJson(a);arguments[0]=b;return ko.mapping.fromJS.apply(this,arguments)};ko.mapping.updateFromJS=function(){throw Error("ko.mapping.updateFromJS, use ko.mapping.fromJS instead. Please note that the order of parameters is different!");};ko.mapping.updateFromJSON=function(){throw Error("ko.mapping.updateFromJSON, use ko.mapping.fromJSON instead. Please note that the order of parameters is different!");};ko.mapping.toJS=function(d,c){a||ko.mapping.resetDefaultOptions();if(arguments.length==0)throw Error("When calling ko.mapping.toJS, pass the object you want to convert.");if(!(a.ignore instanceof Array))throw Error("ko.mapping.defaultOptions().ignore should be an array.");if(!(a.include instanceof Array))throw Error("ko.mapping.defaultOptions().include should be an array.");if(!(a.copy instanceof Array))throw Error("ko.mapping.defaultOptions().copy should be an array.");c=o(c,d[b]);return ko.mapping.visitModel(d,function(a){return ko.utils.unwrapObservable(a)},c)};ko.mapping.toJSON=function(a,c){var b=ko.mapping.toJS(a,c);return ko.utils.stringifyJson(b)};ko.mapping.defaultOptions=function(){if(arguments.length>0)a=arguments[0];else return a};ko.mapping.resetDefaultOptions=function(){a={include:i.include.slice(0),ignore:i.ignore.slice(0),copy:i.copy.slice(0)}};ko.mapping.visitModel=function(f,g,a){a=a||{};a.visitedObjects=a.visitedObjects||new t;a.parentName||(a=o(a));var e,d=ko.utils.unwrapObservable(f);if(l(d))g(f,a.parentName),e=d instanceof Array?[]:{};else return g(f,a.parentName);a.visitedObjects.save(f,e);var h=a.parentName;r(d,function(f){if(!(a.ignore&&ko.utils.arrayIndexOf(a.ignore,f)!=-1)){var i=d[f],j=a,k=h||"";d instanceof Array?h&&(k+="["+f+"]"):(h&&(k+="."),k+=f);j.parentName=k;if(!(ko.utils.arrayIndexOf(a.copy,f)===-1&&ko.utils.arrayIndexOf(a.include,f)===-1&&d[b]&&d[b].mappedProperties&&!d[b].mappedProperties[f]&&!(d instanceof Array)))switch(c(ko.utils.unwrapObservable(i))){case"object":case"undefined":j=a.visitedObjects.get(i);e[f]=c(j)!=="undefined"?j:ko.mapping.visitModel(i,g,a);break;default:e[f]=g(i,a.parentName)}}});return e};ko.exportSymbol("ko.mapping",ko.mapping);ko.exportSymbol("ko.mapping.fromJS",ko.mapping.fromJS);ko.exportSymbol("ko.mapping.fromJSON",ko.mapping.fromJSON);ko.exportSymbol("ko.mapping.isMapped",ko.mapping.isMapped);ko.exportSymbol("ko.mapping.defaultOptions",ko.mapping.defaultOptions);ko.exportSymbol("ko.mapping.toJS",ko.mapping.toJS);ko.exportSymbol("ko.mapping.toJSON",ko.mapping.toJSON);ko.exportSymbol("ko.mapping.updateFromJS",ko.mapping.updateFromJS);ko.exportSymbol("ko.mapping.updateFromJSON",ko.mapping.updateFromJSON);ko.exportSymbol("ko.mapping.visitModel",ko.mapping.visitModel)})();ko.bindingHandlers.fadeInText={highlight:false,update:function(a,b){jQuery(a).hide();ko.bindingHandlers.text.update(a,b);if(ko.bindingHandlers.fadeInText.highlight)jQuery(a).effect("highlight",{mode:"show"},5e3);else jQuery(a).show()}};function GetDate(a){if(a!=null){var b=eval(a.replace(/\/Date\((\d+)\)\//gi,"new Date($1)"));return dateFormat(b,"dd/mm/yyyy HH:MM:ss")}return"Not Set"}function GetDotNetDate(a){if(a!=null){var b=eval(a.replace(/\/Date\((\d+)\)\//gi,"new Date($1)"));return dateFormat(b,"mm/dd/yyyy HH:MM:ss")}return"Not Set"}function EscapeDotNet(c){var a=escape(c);a=a.replace(/\+/g,"%2B");var b=a;do{a=b;b=a.replace("/","%2F")}while(a!=b);a=b;return a}function isNullOrEmpty(a){return a==undefined||a.replace(/\s/g,"")==""||!a||0===a.length?true:false}function BindValidationsToForm(b,a){jQuery.each(b.Errors,function(c,b){jQuery("input[name='"+b.PropertyName+"']",a).next("span").empty()});jQuery.each(b.Errors,function(c,b){jQuery("[name='"+b.PropertyName+"']",a).parent().parent().addClass("error");jQuery("[name='"+b.PropertyName+"']",a).parent().parent().addClass("error");jQuery("[name='"+b.PropertyName+"']",a).addClass("error");jQuery("[name='"+b.PropertyName+"']",a).next("span").removeClass("field-validation-valid").addClass("help-inline");jQuery("[name='"+b.PropertyName+"']",a).next("span").append('<span for="'+b.PropertyName+'" generated="true">'+b.ErrorMessage+"</span>")})}(function(){ko.setupValidation=function(a){ko.bindingHandlers.error={init:function(d,b,a,c){ko.bindingHandlers.error.internalUpdate(d,b,a,c)},update:function(d,b,a,c){ko.bindingHandlers.error.internalUpdate(d,b,a,c)},internalUpdate:function(e,d){var c=jQuery(e),a=d()();c.empty();if(a!=null&&a.length>0){var b=jQuery('<div class="alert alert-error"></div>');b.append(jQuery('<a class="close" data-dismiss="alert">').text("×"));for(var f in a)b.append(jQuery("<div>").text(a[f]));c.append(b)}}};return{createErrorCollections:function(e,b,d){for(var c in e)b[c+"Errors"]=new ko.observableArray(typeof a[c]!="undefined"?a[c]:[]);b.hasErrors=false;b.formIdentifier=d},clearValidations:function(b,a){for(var c in b)a[c+"Errors"].removeAll()},rebindValidations:function(d,a,c){for(var b in d){a[b+"Errors"].removeAll();jQuery.each(c,function(d,c){if(c.PropertyName==b){a[b+"Errors"].push(c.ErrorMessage);a.hasErrors=true}})}}}}})();(function(){ko.utils.padzero=function(a){return a<10?"0"+a:a};ko.utils.pad2zeros=function(a){if(a<100)a="0"+a;if(a<10)a="0"+a;return a};ko.utils.toISOStringFromJson=function(b){var a=eval(b.replace(/\/Date\((\d+)\)\//gi,"new Date($1)"));return a.getUTCFullYear()+"-"+ko.utils.padzero(a.getUTCMonth()+1)+"-"+ko.utils.padzero(a.getUTCDate())+"T"+ko.utils.padzero(a.getUTCHours())+":"+ko.utils.padzero(a.getUTCMinutes())+":"+ko.utils.padzero(a.getUTCSeconds())+"."+ko.utils.pad2zeros(a.getUTCMilliseconds())+"Z"};ko.utils.getFormatedDateTimeNow=function(){var a=new Date;return dateFormat(a,"dd/mm/yyyy HH:MM:ss")};ko.utils.getDateFromJson=function(){return{create:function(a){if(a.data==null)return ko.observable("Not Set");var b=eval(a.data.replace(/\/Date\((\d+)\)\//gi,"new Date($1)"));return ko.observable(dateFormat(b,"dd/mm/yyyy HH:MM:ss"))}}};ko.utils.jsonToEscapedDateString=function(e){var c=eval(e.replace(/\/Date\((\d+)\)\//gi,"new Date($1)")),d=dateFormat(c,"dd/mm/yyyy HH:MM:ss"),a=escape(d);a=a.replace(/\+/g,"%2B");var b=a;do{a=b;b=a.replace("/","%2F")}while(a!=b);a=b;return a};ko.utils.getTimeAgoFromJson=function(){return{create:function(a){if(a.data==null)return"Not Set";var c=eval(a.data.replace(/\/Date\((\d+)\)\//gi,"new Date($1)")),b=dateFormat(c,"mm/dd/yyyy HH:MM:ss");return jQuery.timeago(b)}}};ko.utils.escapeDate=function(c){var a=escape(c);a=a.replace(/\+/g,"%2B");var b=a;do{a=b;b=a.replace("/","%2F")}while(a!=b);a=b;return a}})();(function(){function b(a){if(typeof a.length!=="number"||a.length===0)return[];var c=[];for(var b in a[0])c.push({headerText:b,rowText:b});return c}ko.pagedGrid={viewModel:function(a){this.items=a.data.Items;this.originalRequestDateTime=a.data.OriginalRequestDateTime;this.pageCount=a.data.PageCount;this.totalItemCount=a.data.TotalItemCount;this.pageNumber=a.data.PageNumber;this.pageSize=a.data.PageSize||5;this.hasPreviousPage=a.data.HasPreviousPage;this.hasNextPage=a.data.HasNextPage;this.isFirstPage=a.data.IsFirstPage;this.isLastPage=a.data.IsLastPage;this.additionalFunctions=a.additionalFunctions;this.orderBy=ko.observable("Name");this.isAsc=ko.observable(true);this.pagingComponentIdentfier=a.pagingComponentIdentifier;this.updateEvent=a.updateEvent||null;this.deleteEvent=a.deleteEvent||null;this.columns=a.columns||b(ko.utils.unwrapObservable(this.items));this.plural=ko.dependentObservable(function(){return this.totalItemCount()==1?a.singular:a.plural},this);this.is_are=ko.dependentObservable(function(){return this.totalItemCount()==1?"is":"are"},this);this.navigate=function(b,d){if(b==="next")this.pageNumber()<ko.utils.unwrapObservable(this.pageCount())&&this.pageNumber(this.pageNumber()+1);else if(b==="prev")this.pageNumber()>1&&this.pageNumber(this.pageNumber()-1);else this.pageNumber(d);var c=this.isAsc()?"Asc":"Desc";jQuery.getJSON("/"+a.controller+"/"+a.action,{page:this.pageNumber(),datetime:ko.utils.toISOStringFromJson(this.originalRequestDateTime()),orderBy:this.orderBy(),sortBy:c},function(b){a.loadPageCallback(b)})};this.pageNavigation=ko.dependentObservable(function(){return ko.utils.range(1,this.pageCount())},this);this.setOrderBy=function(b){if(this.orderBy()==b)if(this.isAsc())this.isAsc(false);else this.isAsc(true);else{this.orderBy(b);this.isAsc(true)}var c=this.isAsc()?"Asc":"Desc";jQuery.getJSON("/"+a.controller+"/"+a.action,{page:this.pageNumber(),datetime:ko.utils.toISOStringFromJson(this.originalRequestDateTime()),orderBy:this.orderBy(),sortBy:c},function(b){a.loadPageCallback(b)})};var c={};(function(c,b){c.execute=function(c,d){if(b.pagingComponentIdentfier==c){b.originalRequestDateTime(d);var e=b.isAsc()?"Asc":"Desc";jQuery.getJSON("/"+a.controller+"/"+a.action,{page:b.pageNumber(),datetime:ko.utils.toISOStringFromJson(b.originalRequestDateTime()),orderBy:b.orderBy(),sortBy:e},function(b){a.loadPageCallback(b)})}}})(c,this);jQuery(document).bind("resetPaging",function(d,a,b){c.execute(a,b)});this.deleteEvent!=null&&jQuery(document).bind(this.deleteEvent,function(d,c){var b=ko.utils.arrayFirst(index.Items(),function(a){return a.Id()==c});if(b==null||b==undefined)return;index.Items.remove(b);index.Items().length<10&&jQuery.getJSON("/"+a.controller+"/"+a.action,{page:model.PageNumber(),datetime:ko.utils.toISOStringFromJson(model.originalRequestDateTime()),orderBy:model.orderBy(),sortBy:sortBy},function(a){ko.mapping.fromJS(a,index)})});this.updateEvent!=null&&jQuery(document).bind(this.updateEvent,function(d,b){var a=ko.utils.arrayFirst(index.Items(),function(a){return a.Id()==id});if(a==null||a==undefined)return;a.Title(b.Title());a.Content(b.Content());for(var c in a[0])(b[c]!=null||b[c]!=undefined)&&a[c](b[c]())})}};var a=new ko.nativeTemplateEngine;a.addTemplate=function(b,a){document.write("<script type='text/html' id='"+b+"'>"+a+"<\/script>")};a.addTemplate("ko_simpleGrid_grid",'                    <em>There&nbsp;<span data-bind="text:is_are"></span>&nbsp;<span data-bind="text:totalItemCount"></span>&nbsp;<span data-bind="text:plural"></span></em>                    <table class="ko-grid table table-striped table-bordered table-condensed">                        <thead>                            <tr data-bind="foreach: columns">                               <th data-bind="text: headerText" class="header"></th>                            </tr>                        </thead>                        <tbody data-bind="foreach: items">                           <tr data-bind="foreach: $parent.columns">                               <td data-bind="text: typeof rowText == \'function\' ? rowText($parent) : $parent[rowText] "></td>                            </tr>                        </tbody>                    </table>');a.addTemplate("ko_simpleGrid_pageLinks",'                    <div class="pagination pull-right" data-bind="visible: items().length > 0">                        <ul>                            <li data-bind="css: { disabled: pageNumber() === 1 }" class="prev-container">                                <a data-bind="click: function (event) { navigate(\'prev\') }" href="#" class="prev">← Previous</a>                            </li>                            <li data-bind="css: { disabled: pageNumber() === 1 }" class="first-container">                                <a data-bind="click: function() { navigate(\'first\', 1); }" href="#" class="first">First</a>                            </li>                            <span data-bind="foreach: pageNavigation" id="pages-container">                                <li data-bind="css: { active: $parent.pageNumber() == $data }" class="first-container"><a href="#" title="View Page $data" data-bind="click: function() { $parent.navigate(\'page\', $data); }"><span data-bind="text: $data"></span></a></li>                            </span>                            <li data-bind="css: { disabled: pageNumber() === pageCount() }" class="last-container">                                <a data-bind="click: function() { navigate(\'last\', pageCount()); }" href="#" id="last">Last</a>                            </li>                            <li data-bind="css: { disabled: pageNumber() === pageCount() }" class="next-container">                                <a data-bind="click: function (event) { navigate(\'next\') }" href="#" class="next">Next →</a>                            </li>                        </ul>                    </div>');a.addTemplate("ko_simpleGrid_basicPageLinks",'                    <div class="pagination pagination-centered">                        <ul>                            <li data-bind="css: { disabled: pageNumber() === 1 }" class="prev-container">                                <a data-bind="click: function (event) { navigate(\'prev\') }" href="#" class="prev">←</a>                            </li>                            <li data-bind="css: { disabled: pageNumber() === pageCount() }" class="next-container">                                <a data-bind="click: function (event) { navigate(\'next\') }" href="#" class="next">→</a>                            </li>                        </ul>                    </div>');ko.bindingHandlers.pagedGrid={init:function(){return{controlsDescendantBindings:true}},update:function(b,h,f){var d=h(),c=f();while(b.firstChild)ko.removeNode(b.firstChild);var i=c.pagedGridTemplate||"ko_simpleGrid_grid",e=c.pagedGridPagerTemplate||"ko_simpleGrid_pageLinks",j=b.appendChild(document.createElement("DIV"));ko.renderTemplate(i,d,{templateEngine:a},j,"replaceNode");var g=b.appendChild(document.createElement("DIV"));ko.renderTemplate(e,d,{templateEngine:a},g,"replaceNode")}}})();(function(){function b(a){if(typeof a.length!=="number"||a.length===0)return[];var c=[];for(var b in a[0])c.push({headerText:b,rowText:b});return c}ko.latestItems={viewModel:function(a){this.items=a.data.Items;this.originalRequestDateTime=a.data.OriginalRequestDateTime;this.requestDateTime=a.data.RequestDateTime;this.pagingComponentIdentfier=a.pagingComponentIdentifier;this.createdModal=false;this.columns=a.columns||b(ko.utils.unwrapObservable(this.items));this.plural=ko.dependentObservable(function(){return this.items()==1?a.singular:a.plural},this);this.is_are=ko.dependentObservable(function(){return this.items()==1?"is":"are"},this);this.raiseOpen=function(){if(this.createdModal==false){this.detailModal=jQuery("#"+a.divIdentifier+" .modal").modal({backdrop:true,closeOnEscape:true,modal:true});this.createdModal=true}this.detailModal.modal("show")};this.raiseClose=function(){this.detailModal.modal("hide")};this.resetPaging=function(){var c=this.pagingComponentIdentfier,a=this.requestDateTime(),b=this.items();jQuery(document).trigger("resetPaging",[c,a,b]);this.items.removeAll();this.originalRequestDateTime(this.requestDateTime());this.detailModal.modal("hide")};setInterval(function(){jQuery.getJSON("/"+a.controller+"/"+a.action,{datetime:ko.utils.toISOStringFromJson(a.data.OriginalRequestDateTime())},function(b){a.loadPageCallback(b)})},5e3)}};var a=new ko.nativeTemplateEngine;a.addTemplate=function(b,a){document.write("<script type='text/html' id='"+b+"'>"+a+"<\/script>")};a.addTemplate("ko_latest_items",'                    <div class="latest-items" data-bind="visible: items().length > 0">                        <div class="alert alert-info" data-bind="click: raiseOpen">                            <em>There&nbsp;<span data-bind="text:is_are"></span>&nbsp;<span data-bind="text:items().length"></span>&nbsp;New&nbsp;<span data-bind="text:plural"></span></em></p>                        </div>                        <div class="modal hide fade">                            <div class="modal-header">                                <a href="#" class="close" data-bind="click: raiseClose">×</a>                                <h3>Latest Items</h3>                            </div>                            <div class="modal-body modal-body-scrollable">                                <table class="ko-grid table table-striped table-bordered table-condensed">                                    <thead>                                        <tr data-bind="foreach: columns">                                            <th data-bind="text: headerText" class="header"></th>                                        </tr>                                    </thead>                                    <tbody data-bind="foreach: items">                                        <tr data-bind="foreach: $parent.columns">                                            <td data-bind="text: typeof rowText == \'function\' ? rowText($parent) : $parent[rowText] "></td>                                        </tr>                                    </tbody>                                </table>                            </div>                            <div class="modal-footer">                                <button class="btn btn-danger" data-bind="click: raiseClose">Close</button>                                <button class="btn btn-primary" data-bind="click: resetPaging">Reset Paging</button>                            </div>                        </div>                    </div>');ko.bindingHandlers.latestItems={init:function(){return{controlsDescendantBindings:true}},update:function(b,e,d){var h=e(),g=d();while(b.firstChild)ko.removeNode(b.firstChild);var c=g.latestItemsTemplate||"ko_latest_items",f=b.appendChild(document.createElement("DIV"));ko.renderTemplate(c,h,{templateEngine:a},f,"replaceNode")}}})();(function(){ko.pagedList={viewModel:function(a){var e={CreationDateTime:ko.utils.getTimeAgoFromJson(),LastModifiedDateTime:ko.utils.getDateFromJson("dd/MMM HH:mm")},d=function(a){ko.mapping.fromJS(a,e,this)},f={Items:{create:function(a){return new d(a.data)}}};this.items=a.data.Items;this.originalRequestDateTime=a.data.OriginalRequestDateTime;this.pageCount=a.data.PageCount;this.totalItemCount=a.data.TotalItemCount;this.pageNumber=a.data.PageNumber;this.pageSize=a.data.PageSize||5;this.hasPreviousPage=a.data.HasPreviousPage;this.hasNextPage=a.data.HasNextPage;this.isFirstPage=a.data.IsFirstPage;this.isLastPage=a.data.IsLastPage;this.additionalFunctions=a.additionalFunctions;this.orderBy=ko.observable("Name");this.isAsc=ko.observable(true);this.pagingComponentIdentfier=a.pagingComponentIdentifier;this.updateEvent=a.updateEvent||null;this.deleteEvent=a.deleteEvent||null;this.plural=ko.dependentObservable(function(){return this.totalItemCount()==1?a.singular:a.plural},this);this.is_are=ko.dependentObservable(function(){return this.totalItemCount()==1?"is":"are"},this);var b={};(function(d,c){d.more=true;d.execute=function(){if(!b)return;c.pageNumber(c.pageNumber()+1);jQuery.getJSON("/"+a.controller+"/"+a.action,{page:c.pageNumber(),datetime:ko.utils.toISOStringFromJson(c.originalRequestDateTime())},function(a){if(a.Items.length==0){b=false;return}var d=ko.mapping.fromJS(a,f);ko.utils.arrayForEach(d.Items(),function(a){c.items.push(a)})})}})(b,this);jQuery(window).scroll(function(){$(window).scrollTop()==$(document).height()-$(window).height()&&b.execute()});var c={};(function(b,a){b.execute=function(b,d,c){a.pagingComponentIdentfier==b&&ko.utils.arrayForEach(c,function(b){a.items.unshift(b);a.totalItemCount(a.totalItemCount()+1)})}})(c,this);jQuery(document).bind("resetPaging",function(e,a,b,d){c.execute(a,b,d)});this.deleteEvent!=null&&jQuery(document).bind(this.deleteEvent,function(d,c){var b=ko.utils.arrayFirst(index.Items(),function(a){return a.Id()==c});if(b==null||b==undefined)return;index.Items.remove(b);index.Items().length<10&&jQuery.getJSON("/"+a.controller+"/"+a.action,{page:model.PageNumber(),datetime:ko.utils.toISOStringFromJson(model.originalRequestDateTime()),orderBy:model.orderBy(),sortBy:sortBy},function(a){ko.mapping.fromJS(a,index)})});this.updateEvent!=null&&jQuery(document).bind(this.updateEvent,function(d,b){var a=ko.utils.arrayFirst(index.Items(),function(a){return a.Id()==id});if(a==null||a==undefined)return;a.Title(b.Title());a.Content(b.Content());for(var c in a[0])(b[c]!=null||b[c]!=undefined)&&a[c](b[c]())})}};var a=new ko.nativeTemplateEngine;ko.bindingHandlers.pagedList={init:function(){return{controlsDescendantBindings:true}},update:function(b,d,c){var h=d(),g=c();while(b.firstChild)ko.removeNode(b.firstChild);var e=g.pagedListTemplate,f=b.appendChild(document.createElement("DIV"));ko.renderTemplate(e,h,{templateEngine:a},f,"replaceNode")}}})();(function(){function b(a,b){this.Username=a;this.Colour=b}ko.currentlyViewingComponent={viewModel:function(a){this.currentViewers=ko.observableArray([]);var c=this;this.initialiseCurrentViewers=function(a){c.currentViewers.removeAll();ko.utils.arrayForEach(a,function(a){c.currentViewers.push(new b(a.Username,a.Colour))})};a.hub.handleImViewingMessage=function(d,f,g){if(a.id()!=g)return;var e=ko.utils.arrayFirst(c.currentViewers(),function(a){return a.Username==d});e==null&&c.currentViewers.push(new b(d,f));jQuery("a[rel=tooltip]").tooltip()};a.hub.handleImLeavingMessage=function(b,d){if(a.id()!=d)return;c.currentViewers.remove(function(a){return a.Username==b})};jQuery(a.modalSelector).bind("show",function(){a.hub.imViewing(a.id())});jQuery(a.modalSelector).bind("hide",function(){a.hub.imLeaving(a.id())})}};var a=new ko.nativeTemplateEngine;a.addTemplate=function(b,a){document.write("<script type='text/html' id='"+b+"'>"+a+"<\/script>")};a.addTemplate("ko_currentlyViewing",'<div data-bind="foreach: currentViewers" class="pull-left"><a data-bind="attr: { title: Username, \'class\': Colour }" rel=\'tooltip\'>&nbsp;</a></div>');ko.bindingHandlers.currentlyViewingComponent={init:function(){return{controlsDescendantBindings:true}},update:function(b,f,e){var h=f(),g=e();while(b.firstChild)ko.removeNode(b.firstChild);var c=g.currentlyViewingTemplate||"ko_currentlyViewing",d=b.appendChild(document.createElement("DIV"));ko.renderTemplate(c,h,{templateEngine:a},d,"replaceNode")}}})();jQuery(function(){jQuery("a[rel=tooltip]").tooltip();jQuery(".carousel").carousel()});!function(a){a(function(){"use strict";a.support.transition=function(){var c=document.body||document.documentElement,b=c.style,d=b.transition!==undefined||b.WebkitTransition!==undefined||b.MozTransition!==undefined||b.MsTransition!==undefined||b.OTransition!==undefined;return d&&{end:function(){var b="TransitionEnd";if(a.browser.webkit)b="webkitTransitionEnd";else if(a.browser.mozilla)b="transitionend";else if(a.browser.opera)b="oTransitionEnd";return b}()}}()})}(window.jQuery);!function(a){"use strict";var c='[data-dismiss="alert"]',b=function(b){a(b).on("click",c,this.close)};b.prototype={constructor:b,close:function(f){var d=a(this),c=d.attr("data-target"),b;if(!c){c=d.attr("href");c=c&&c.replace(/.*(?=#[^\s]*$)/,"")}b=a(c);b.trigger("close");f&&f.preventDefault();b.length||(b=d.hasClass("alert")?d:d.parent());b.trigger("close").removeClass("in");function e(){b.trigger("closed").remove()}a.support.transition&&b.hasClass("fade")?b.on(a.support.transition.end,e):e()}};a.fn.alert=function(c){return this.each(function(){var d=a(this),e=d.data("alert");!e&&d.data("alert",e=new b(this));typeof c=="string"&&e[c].call(d)})};a.fn.alert.Constructor=b;a(function(){a("body").on("click.alert.data-api",c,b.prototype.close)})}(window.jQuery);!function(a){"use strict";var b=function(b,c){this.$element=a(b);this.options=a.extend({},a.fn.button.defaults,c)};b.prototype={constructor:b,setState:function(b){var c="disabled",a=this.$element,d=a.data(),e=a.is("input")?"val":"html";b=b+"Text";d.resetText||a.data("resetText",a[e]());a[e](d[b]||this.options[b]);setTimeout(function(){b=="loadingText"?a.addClass(c).attr(c,c):a.removeClass(c).removeAttr(c)},0)},toggle:function(){var a=this.$element.parent('[data-toggle="buttons-radio"]');a&&a.find(".active").removeClass("active");this.$element.toggleClass("active")}};a.fn.button=function(c){return this.each(function(){var e=a(this),d=e.data("button"),f=typeof c=="object"&&c;!d&&e.data("button",d=new b(this,f));if(c=="toggle")d.toggle();else c&&d.setState(c)})};a.fn.button.defaults={loadingText:"loading..."};a.fn.button.Constructor=b;a(function(){a("body").on("click.button.data-api","[data-toggle^=button]",function(c){var b=a(c.target);if(!b.hasClass("btn"))b=b.closest(".btn");b.button("toggle")})})}(window.jQuery);!function(a){"use strict";var b=function(b,c){this.$element=a(b);this.options=a.extend({},a.fn.carousel.defaults,c);this.options.slide&&this.slide(this.options.slide);this.options.pause=="hover"&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};b.prototype={cycle:function(){this.interval=setInterval(a.proxy(this.next,this),this.options.interval);return this},to:function(b){var e=this.$element.find(".active"),c=e.parent().children(),d=c.index(e),f=this;return b>c.length-1||b<0?void 0:this.sliding?this.$element.one("slid",function(){f.to(b)}):d==b?this.pause().cycle():this.slide(b>d?"next":"prev",a(c[b]))},pause:function(){clearInterval(this.interval);this.interval=null;return this},next:function(){return this.sliding?void 0:this.slide("next")},prev:function(){return this.sliding?void 0:this.slide("prev")},slide:function(c,i){var e=this.$element.find(".active"),b=i||e[c](),f=this.interval,d=c=="next"?"left":"right",h=c=="next"?"first":"last",g=this;this.sliding=true;f&&this.pause();b=b.length?b:this.$element.find(".item")[h]();if(b.hasClass("active"))return;if(!a.support.transition&&this.$element.hasClass("slide")){this.$element.trigger("slide");e.removeClass("active");b.addClass("active");this.sliding=false;this.$element.trigger("slid")}else{b.addClass(c);b[0].offsetWidth;e.addClass(d);b.addClass(d);this.$element.trigger("slide");this.$element.one(a.support.transition.end,function(){b.removeClass([c,d].join(" ")).addClass("active");e.removeClass(["active",d].join(" "));g.sliding=false;setTimeout(function(){g.$element.trigger("slid")},0)})}f&&this.cycle();return this}};a.fn.carousel=function(c){return this.each(function(){var f=a(this),d=f.data("carousel"),e=typeof c=="object"&&c;!d&&f.data("carousel",d=new b(this,e));if(typeof c=="number")d.to(c);else if(typeof c=="string"||(c=e.slide))d[c]();else d.cycle()})};a.fn.carousel.defaults={interval:5e3,pause:"hover"};a.fn.carousel.Constructor=b;a(function(){a("body").on("click.carousel.data-api","[data-slide]",function(f){var c=a(this),d,b=a(c.attr("data-target")||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")),e=!b.data("modal")&&a.extend({},b.data(),c.data());b.carousel(e);f.preventDefault()})})}(window.jQuery);!function(a){"use strict";var b=function(b,c){this.$element=a(b);this.options=a.extend({},a.fn.collapse.defaults,c);if(this.options.parent)this.$parent=a(this.options.parent);this.options.toggle&&this.toggle()};b.prototype={constructor:b,dimension:function(){var a=this.$element.hasClass("width");return a?"width":"height"},show:function(){var c=this.dimension(),e=a.camelCase(["scroll",c].join("-")),b=this.$parent&&this.$parent.find(".in"),d;if(b&&b.length){d=b.data("collapse");b.collapse("hide");d||b.data("collapse",null)}this.$element[c](0);this.transition("addClass","show","shown");this.$element[c](this.$element[0][e])},hide:function(){var a=this.dimension();this.reset(this.$element[a]());this.transition("removeClass","hide","hidden");this.$element[a](0)},reset:function(a){var b=this.dimension();this.$element.removeClass("collapse")[b](a||"auto")[0].offsetWidth;this.$element[a?"addClass":"removeClass"]("collapse");return this},transition:function(f,b,e){var d=this,c=function(){b=="show"&&d.reset();d.$element.trigger(e)};this.$element.trigger(b)[f]("in");a.support.transition&&this.$element.hasClass("collapse")?this.$element.one(a.support.transition.end,c):c()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};a.fn.collapse=function(c){return this.each(function(){var e=a(this),d=e.data("collapse"),f=typeof c=="object"&&c;!d&&e.data("collapse",d=new b(this,f));typeof c=="string"&&d[c]()})};a.fn.collapse.defaults={toggle:true};a.fn.collapse.Constructor=b;a(function(){a("body").on("click.collapse.data-api","[data-toggle=collapse]",function(f){var b=a(this),d,c=b.attr("data-target")||f.preventDefault()||(d=b.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""),e=a(c).data("collapse")?"toggle":b.data();a(c).collapse(e)})})}(window.jQuery);!function(a){"use strict";var d='[data-toggle="dropdown"]',b=function(b){var c=a(b).on("click.dropdown.data-api",this.toggle);a("html").on("click.dropdown.data-api",function(){c.parent().removeClass("open")})};b.prototype={constructor:b,toggle:function(){var e=a(this),b=e.attr("data-target"),d,f;if(!b){b=e.attr("href");b=b&&b.replace(/.*(?=#[^\s]*$)/,"")}d=a(b);d.length||(d=e.parent());f=d.hasClass("open");c();!f&&d.toggleClass("open");return false}};function c(){a(d).parent().removeClass("open")}a.fn.dropdown=function(c){return this.each(function(){var d=a(this),e=d.data("dropdown");!e&&d.data("dropdown",e=new b(this));typeof c=="string"&&e[c].call(d)})};a.fn.dropdown.Constructor=b;a(function(){a("html").on("click.dropdown.data-api",c);a("body").on("click.dropdown.data-api",d,b.prototype.toggle)})}(window.jQuery);!function(a){"use strict";var b=function(b,c){this.options=c;this.$element=a(b).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this))};b.prototype={constructor:b,toggle:function(){return this[!this.isShown?"show":"hide"]()},show:function(){var b=this;if(this.isShown)return;a("body").addClass("modal-open");this.isShown=true;this.$element.trigger("show");f.call(this);e.call(this,function(){var c=a.support.transition&&b.$element.hasClass("fade");!b.$element.parent().length&&b.$element.appendTo(document.body);b.$element.show();if(c)b.$element[0].offsetWidth;b.$element.addClass("in");c?b.$element.one(a.support.transition.end,function(){b.$element.trigger("shown")}):b.$element.trigger("shown")})},hide:function(b){b&&b.preventDefault();if(!this.isShown)return;var d=this;this.isShown=false;a("body").removeClass("modal-open");f.call(this);this.$element.trigger("hide").removeClass("in");a.support.transition&&this.$element.hasClass("fade")?g.call(this):c.call(this)}};function g(){var b=this,d=setTimeout(function(){b.$element.off(a.support.transition.end);c.call(b)},500);this.$element.one(a.support.transition.end,function(){clearTimeout(d);c.call(b)})}function c(){this.$element.hide().trigger("hidden");e.call(this)}function e(b){var f=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var c=a.support.transition&&e;this.$backdrop=a('<div class="modal-backdrop '+e+'" />').appendTo(document.body);this.options.backdrop!="static"&&this.$backdrop.click(a.proxy(this.hide,this));if(c)this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");c?this.$backdrop.one(a.support.transition.end,b):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,a.proxy(d,this)):d.call(this)}else b&&b()}function d(){this.$backdrop.remove();this.$backdrop=null}function f(){var b=this;if(this.isShown&&this.options.keyboard)a(document).on("keyup.dismiss.modal",function(a){a.which==27&&b.hide()});else!this.isShown&&a(document).off("keyup.dismiss.modal")}a.fn.modal=function(c){return this.each(function(){var e=a(this),d=e.data("modal"),f=a.extend({},a.fn.modal.defaults,e.data(),typeof c=="object"&&c);!d&&e.data("modal",d=new b(this,f));if(typeof c=="string")d[c]();else f.show&&d.show()})};a.fn.modal.defaults={backdrop:true,keyboard:true,show:true};a.fn.modal.Constructor=b;a(function(){a("body").on("click.modal.data-api",'[data-toggle="modal"]',function(f){var c=a(this),d,b=a(c.attr("data-target")||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")),e=b.data("modal")?"toggle":a.extend({},b.data(),c.data());f.preventDefault();b.modal(e)})})}(window.jQuery);!function(a){"use strict";var b=function(a,b){this.init("tooltip",a,b)};b.prototype={constructor:b,init:function(f,d,e){var c,b;this.type=f;this.$element=a(d);this.options=this.getOptions(e);this.enabled=true;if(this.options.trigger!="manual"){c=this.options.trigger=="hover"?"mouseenter":"focus";b=this.options.trigger=="hover"?"mouseleave":"blur";this.$element.on(c,this.options.selector,a.proxy(this.enter,this));this.$element.on(b,this.options.selector,a.proxy(this.leave,this))}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){b=a.extend({},a.fn[this.type].defaults,b,this.$element.data());if(b.delay&&typeof b.delay=="number")b.delay={show:b.delay,hide:b.delay};return b},enter:function(c){var b=a(c.currentTarget)[this.type](this._options).data(this.type);if(!b.options.delay||!b.options.delay.show)b.show();else{b.hoverState="in";setTimeout(function(){b.hoverState=="in"&&b.show()},b.options.delay.show)}},leave:function(c){var b=a(c.currentTarget)[this.type](this._options).data(this.type);if(!b.options.delay||!b.options.delay.hide)b.hide();else{b.hoverState="out";setTimeout(function(){b.hoverState=="out"&&b.hide()},b.options.delay.hide)}},show:function(){var b,g,a,f,e,c,d;if(this.hasContent()&&this.enabled){b=this.tip();this.setContent();this.options.animation&&b.addClass("fade");c=typeof this.options.placement=="function"?this.options.placement.call(this,b[0],this.$element[0]):this.options.placement;g=/in/.test(c);b.remove().css({top:0,left:0,display:"block"}).appendTo(g?this.$element:document.body);a=this.getPosition(g);f=b[0].offsetWidth;e=b[0].offsetHeight;switch(g?c.split(" ")[1]:c){case"bottom":d={top:a.top+a.height,left:a.left+a.width/2-f/2};break;case"top":d={top:a.top-e,left:a.left+a.width/2-f/2};break;case"left":d={top:a.top+a.height/2-e/2,left:a.left-f};break;case"right":d={top:a.top+a.height/2-e/2,left:a.left+a.width}}b.css(d).addClass(c).addClass("in")}},setContent:function(){var a=this.tip();a.find(".tooltip-inner").html(this.getTitle());a.removeClass("fade in top bottom left right")},hide:function(){var d=this,b=this.tip();b.removeClass("in");function c(){var c=setTimeout(function(){b.off(a.support.transition.end).remove()},500);b.one(a.support.transition.end,function(){clearTimeout(c);b.remove()})}a.support.transition&&this.$tip.hasClass("fade")?c():b.remove()},fixTitle:function(){var a=this.$element;(a.attr("title")||typeof a.attr("data-original-title")!="string")&&a.attr("data-original-title",a.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(b){return a.extend({},b?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var a,c=this.$element,b=this.options;a=c.attr("data-original-title")||(typeof b.title=="function"?b.title.call(c[0]):b.title);a=(a||"").toString().replace(/(^\s*|\s*$)/,"");return a},tip:function(){return this.$tip=this.$tip||a(this.options.template)},validate:function(){if(!this.$element[0].parentNode){this.hide();this.$element=null;this.options=null}},enable:function(){this.enabled=true},disable:function(){this.enabled=false},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()}};a.fn.tooltip=function(c){return this.each(function(){var e=a(this),d=e.data("tooltip"),f=typeof c=="object"&&c;!d&&e.data("tooltip",d=new b(this,f));typeof c=="string"&&d[c]()})};a.fn.tooltip.Constructor=b;a.fn.tooltip.defaults={animation:true,delay:0,selector:false,placement:"top",trigger:"hover",title:"",template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'}}(window.jQuery);!function(a){"use strict";var b=function(a,b){this.init("popover",a,b)};b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype,{constructor:b,setContent:function(){var b=this.tip(),d=this.getTitle(),c=this.getContent();b.find(".popover-title")[a.type(d)=="object"?"append":"html"](d);b.find(".popover-content > *")[a.type(c)=="object"?"append":"html"](c);b.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var a,c=this.$element,b=this.options;a=c.attr("data-content")||(typeof b.content=="function"?b.content.call(c[0]):b.content);a=a.toString().replace(/(^\s*|\s*$)/,"");return a},tip:function(){if(!this.$tip)this.$tip=a(this.options.template);return this.$tip}});a.fn.popover=function(c){return this.each(function(){var e=a(this),d=e.data("popover"),f=typeof c=="object"&&c;!d&&e.data("popover",d=new b(this,f));typeof c=="string"&&d[c]()})};a.fn.popover.Constructor=b;a.fn.popover.defaults=a.extend({},a.fn.tooltip.defaults,{placement:"right",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'})}(window.jQuery);!function(a){"use strict";function b(b,f){var c=a.proxy(this.process,this),e=a(b).is("body")?a(window):a(b),d;this.options=a.extend({},a.fn.scrollspy.defaults,f);this.$scrollElement=e.on("scroll.scroll.data-api",c);this.selector=(this.options.target||(d=a(b).attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a";this.$body=a("body").on("click.scroll.data-api",this.selector,c);this.refresh();this.process()}b.prototype={constructor:b,refresh:function(){this.targets=this.$body.find(this.selector).map(function(){var b=a(this).attr("href");return/^#\w/.test(b)&&a(b).length?b:null});this.offsets=a.map(this.targets,function(b){return a(b).position().top})},process:function(){for(var c=this.$scrollElement.scrollTop()+this.options.offset,b=this.offsets,d=this.targets,e=this.activeTarget,a=b.length;a--;)e!=d[a]&&c>=b[a]&&(!b[a+1]||c<=b[a+1])&&this.activate(d[a])},activate:function(b){var a;this.activeTarget=b;this.$body.find(this.selector).parent(".active").removeClass("active");a=this.$body.find(this.selector+'[href="'+b+'"]').parent("li").addClass("active");a.parent(".dropdown-menu")&&a.closest("li.dropdown").addClass("active")}};a.fn.scrollspy=function(c){return this.each(function(){var e=a(this),d=e.data("scrollspy"),f=typeof c=="object"&&c;!d&&e.data("scrollspy",d=new b(this,f));typeof c=="string"&&d[c]()})};a.fn.scrollspy.Constructor=b;a.fn.scrollspy.defaults={offset:10};a(function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(window.jQuery);!function(a){"use strict";var b=function(b){this.element=a(b)};b.prototype={constructor:b,show:function(){var b=this.element,f=b.closest("ul:not(.dropdown-menu)"),c=b.attr("data-target"),d,e;if(!c){c=b.attr("href");c=c&&c.replace(/.*(?=#[^\s]*$)/,"")}if(b.parent("li").hasClass("active"))return;d=f.find(".active a").last()[0];b.trigger({type:"show",relatedTarget:d});e=a(c);this.activate(b.parent("li"),f);this.activate(e,e.parent(),function(){b.trigger({type:"shown",relatedTarget:d})})},activate:function(b,g,d){var c=g.find("> .active"),e=d&&a.support.transition&&c.hasClass("fade");function f(){c.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");b.addClass("active");if(e){b[0].offsetWidth;b.addClass("in")}else b.removeClass("fade");b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active");d&&d()}e?c.one(a.support.transition.end,f):f();c.removeClass("in")}};a.fn.tab=function(c){return this.each(function(){var e=a(this),d=e.data("tab");!d&&e.data("tab",d=new b(this));typeof c=="string"&&d[c]()})};a.fn.tab.Constructor=b;a(function(){a("body").on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault();a(this).tab("show")})})}(window.jQuery);!function(a){"use strict";var b=function(b,c){this.$element=a(b);this.options=a.extend({},a.fn.typeahead.defaults,c);this.matcher=this.options.matcher||this.matcher;this.sorter=this.options.sorter||this.sorter;this.highlighter=this.options.highlighter||this.highlighter;this.$menu=a(this.options.menu).appendTo("body");this.source=this.options.source;this.shown=false;this.listen()};b.prototype={constructor:b,select:function(){var a=this.$menu.find(".active").attr("data-value");this.$element.val(a);this.$element.change();return this.hide()},show:function(){var b=a.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});this.$menu.css({top:b.top+b.height,left:b.left});this.$menu.show();this.shown=true;return this},hide:function(){this.$menu.hide();this.shown=false;return this},lookup:function(){var c=this,b,e;this.query=this.$element.val();if(!this.query)return this.shown?this.hide():this;b=a.grep(this.source,function(a){if(c.matcher(a))return a});b=this.sorter(b);return!b.length?this.shown?this.hide():this:this.render(b.slice(0,this.options.items)).show()},matcher:function(a){return~a.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){var d=[],c=[],b=[],a;while(a=e.shift())if(!a.toLowerCase().indexOf(this.query.toLowerCase()))d.push(a);else if(~a.indexOf(this.query))c.push(a);else b.push(a);return d.concat(c,b)},highlighter:function(a){return a.replace(new RegExp("("+this.query+")","ig"),function(b,a){return"<strong>"+a+"</strong>"})},render:function(b){var c=this;b=a(b).map(function(b,d){b=a(c.options.item).attr("data-value",d);b.find("a").html(c.highlighter(d));return b[0]});b.first().addClass("active");this.$menu.html(b);return this},next:function(){var c=this.$menu.find(".active").removeClass("active"),b=c.next();if(!b.length)b=a(this.$menu.find("li")[0]);b.addClass("active")},prev:function(){var b=this.$menu.find(".active").removeClass("active"),a=b.prev();if(!a.length)a=this.$menu.find("li").last();a.addClass("active")},listen:function(){this.$element.on("blur",a.proxy(this.blur,this)).on("keypress",a.proxy(this.keypress,this)).on("keyup",a.proxy(this.keyup,this));if(a.browser.webkit||a.browser.msie)this.$element.on("keydown",a.proxy(this.keypress,this));this.$menu.on("click",a.proxy(this.click,this)).on("mouseenter","li",a.proxy(this.mouseenter,this))},keyup:function(a){switch(a.keyCode){case 40:case 38:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}a.stopPropagation();a.preventDefault()},keypress:function(a){if(!this.shown)return;switch(a.keyCode){case 9:case 13:case 27:a.preventDefault();break;case 38:a.preventDefault();this.prev();break;case 40:a.preventDefault();this.next()}a.stopPropagation()},blur:function(){var a=this;setTimeout(function(){a.hide()},150)},click:function(a){a.stopPropagation();a.preventDefault();this.select()},mouseenter:function(b){this.$menu.find(".active").removeClass("active");a(b.currentTarget).addClass("active")}};a.fn.typeahead=function(c){return this.each(function(){var e=a(this),d=e.data("typeahead"),f=typeof c=="object"&&c;!d&&e.data("typeahead",d=new b(this,f));typeof c=="string"&&d[c]()})};a.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>'};a.fn.typeahead.Constructor=b;a(function(){a("body").on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(c){var b=a(this);if(b.data("typeahead"))return;c.preventDefault();b.typeahead(b.data())})})}(window.jQuery);(function(){function a(){this.Diff_Timeout=1;this.Diff_EditCost=4;this.Match_Threshold=.5;this.Match_Distance=1e3;this.Patch_DeleteThreshold=.5;this.Patch_Margin=4;this.Match_MaxBits=32}a.prototype.diff_main=function(a,b,d,e){typeof e=="undefined"&&(e=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+this.Diff_Timeout*1e3);if(a==null||b==null)throw Error("Null input. (diff_main)");if(a==b)return a?[[0,a]]:[];typeof d=="undefined"&&(d=true);var g=d,c=this.diff_commonPrefix(a,b),d=a.substring(0,c),a=a.substring(c),b=b.substring(c),c=this.diff_commonSuffix(a,b),f=a.substring(a.length-c),a=a.substring(0,a.length-c),b=b.substring(0,b.length-c),a=this.diff_compute_(a,b,g,e);d&&a.unshift([0,d]);f&&a.push([0,f]);this.diff_cleanupMerge(a);return a};a.prototype.diff_compute_=function(a,b,d,g){if(!a)return[[1,b]];if(!b)return[[-1,a]];var c=a.length>b.length?a:b,e=a.length>b.length?b:a,f=c.indexOf(e);return f!=-1?(d=[[1,c.substring(0,f)],[0,e],[1,c.substring(f+e.length)]],a.length>b.length&&(d[0][0]=d[2][0]=-1),d):e.length==1?[[-1,a],[1,b]]:(c=this.diff_halfMatch_(a,b))?(e=c[0],a=c[1],f=c[2],b=c[3],c=c[4],e=this.diff_main(e,f,d,g),d=this.diff_main(a,b,d,g),e.concat([[0,c]],d)):d&&a.length>100&&b.length>100?this.diff_lineMode_(a,b,g):this.diff_bisect_(a,b,g)};a.prototype.diff_lineMode_=function(a,b,g){var c=this.diff_linesToChars_(a,b),a=c[0],b=c[1],c=c[2],a=this.diff_bisect_(a,b,g);this.diff_charsToLines_(a,c);this.diff_cleanupSemantic(a);a.push([0,""]);for(var d=b=0,e=0,f=c="";b<a.length;){switch(a[b][0]){case 1:e++;f+=a[b][1];break;case-1:d++;c+=a[b][1];break;case 0:if(d>=1&&e>=1){c=this.diff_main(c,f,false,g);a.splice(b-d-e,d+e);b=b-d-e;for(d=c.length-1;d>=0;d--)a.splice(b,0,c[d]);b+=c.length}d=e=0;f=c=""}b++}a.pop();return a};a.prototype.diff_bisect_=function(m,n,p){for(var f=m.length,i=n.length,q=Math.ceil((f+i)/2),j=q,o=2*q,h=Array(o),g=Array(o),k=0;k<o;k++)h[k]=-1,g[k]=-1;h[j+1]=0;g[j+1]=0;for(var k=f-i,s=k%2!=0,t=0,u=0,r=0,v=0,e=0;e<q;e++){if((new Date).getTime()>p)break;for(var c=-e+t;c<=e-u;c+=2){var a=j+c,b;b=c==-e||c!=e&&h[a-1]<h[a+1]?h[a+1]:h[a-1]+1;for(var l=b-c;b<f&&l<i&&m.charAt(b)==n.charAt(l);)b++,l++;h[a]=b;if(b>f)u+=2;else if(l>i)t+=2;else if(s&&(a=j+k-c,a>=0&&a<o&&g[a]!=-1)){var d=f-g[a];if(b>=d)return this.diff_bisectSplit_(m,n,b,l,p)}}for(c=-e+r;c<=e-v;c+=2){a=j+c;d=c==-e||c!=e&&g[a-1]<g[a+1]?g[a+1]:g[a-1]+1;for(b=d-c;d<f&&b<i&&m.charAt(f-d-1)==n.charAt(i-b-1);)d++,b++;g[a]=d;if(d>f)v+=2;else if(b>i)r+=2;else if(!s&&(a=j+k-c,a>=0&&a<o&&h[a]!=-1&&(b=h[a],l=j+b-a,d=f-d,b>=d)))return this.diff_bisectSplit_(m,n,b,l,p)}}return[[-1,m],[1,n]]};a.prototype.diff_bisectSplit_=function(a,b,d,e,c){var f=a.substring(0,d),g=b.substring(0,e),a=a.substring(d),b=b.substring(e),f=this.diff_main(f,g,false,c),c=this.diff_main(a,b,false,c);return f.concat(c)};a.prototype.diff_linesToChars_=function(d,e){function c(e){for(var f="",h=0,c=-1,g=b.length;c<e.length-1;){c=e.indexOf("\n",h);c==-1&&(c=e.length-1);var d=e.substring(h,c+1),h=c+1;a.hasOwnProperty?a.hasOwnProperty(d):a[d]!==void 0?f+=String.fromCharCode(a[d]):(f+=String.fromCharCode(g),a[d]=g,b[g++]=d)}return f}var b=[],a={};b[0]="";var f=c(d),g=c(e);return[f,g,b]};a.prototype.diff_charsToLines_=function(c,f){for(var a=0;a<c.length;a++){for(var d=c[a][1],e=[],b=0;b<d.length;b++)e[b]=f[d.charCodeAt(b)];c[a][1]=e.join("")}};a.prototype.diff_commonPrefix=function(b,c){if(!b||!c||b.charAt(0)!=c.charAt(0))return 0;for(var d=0,e=Math.min(b.length,c.length),a=e,f=0;d<a;)b.substring(f,a)==c.substring(f,a)?f=d=a:e=a,a=Math.floor((e-d)/2+d);return a};a.prototype.diff_commonSuffix=function(a,b){if(!a||!b||a.charAt(a.length-1)!=b.charAt(b.length-1))return 0;for(var d=0,e=Math.min(a.length,b.length),c=e,f=0;d<c;)a.substring(a.length-c,a.length-f)==b.substring(b.length-c,b.length-f)?f=d=c:e=c,c=Math.floor((e-d)/2+d);return c};a.prototype.diff_commonOverlap_=function(c,d){var a=c.length,b=d.length;if(a==0||b==0)return 0;a>b?c=c.substring(a-b):a<b&&(d=d.substring(0,a));a=Math.min(a,b);if(c==d)return a;for(var b=0,e=1;true;){var f=c.substring(a-e),f=d.indexOf(f);if(f==-1)return b;e+=f;if(f==0||c.substring(a-e)==d.substring(0,e))b=e,e++}};a.prototype.diff_halfMatch_=function(e,f){function h(b,c,d){for(var m=b.substring(d,d+Math.floor(b.length/4)),a=-1,e="",h,j,l,k;(a=c.indexOf(m,a+1))!=-1;){var f=i.diff_commonPrefix(b.substring(d),c.substring(a)),g=i.diff_commonSuffix(b.substring(0,d),c.substring(0,a));e.length<g+f&&(e=c.substring(a-g,a)+c.substring(a,a+f),h=b.substring(0,d-g),j=b.substring(d+f),l=c.substring(0,a-g),k=c.substring(a+f))}return e.length*2>=b.length?[h,j,l,k,e]:null}if(this.Diff_Timeout<=0)return null;var a=e.length>f.length?e:f,d=e.length>f.length?f:e;if(a.length<4||d.length*2<a.length)return null;var i=this,c=h(a,d,Math.ceil(a.length/4)),a=h(a,d,Math.ceil(a.length/2)),b;if(!c&&!a)return null;else b=a?c?c[4].length>a[4].length?c:a:a:c;var g;e.length>f.length?(c=b[0],a=b[1],d=b[2],g=b[3]):(d=b[0],g=b[1],c=b[2],a=b[3]);b=b[4];return[c,a,d,g,b]};a.prototype.diff_cleanupSemantic=function(b){for(var f=false,d=[],c=0,e=null,a=0,i=0,j=0,h=0,g=0;a<b.length;)b[a][0]==0?(d[c++]=a,i=h,j=g,g=h=0,e=b[a][1]):(b[a][0]==1?h+=b[a][1].length:g+=b[a][1].length,e!==null&&e.length<=Math.max(i,j)&&e.length<=Math.max(h,g)&&(b.splice(d[c-1],0,[-1,e]),b[d[c-1]+1][0]=1,c--,c--,a=c>0?d[c-1]:-1,g=h=j=i=0,e=null,f=true)),a++;f&&this.diff_cleanupMerge(b);this.diff_cleanupSemanticLossless(b);for(a=1;a<b.length;){if(b[a-1][0]==-1&&b[a][0]==1){f=b[a-1][1];d=b[a][1];c=this.diff_commonOverlap_(f,d);e=this.diff_commonOverlap_(d,f);if(c>=e){if(c>=f.length/2||c>=d.length/2)b.splice(a,0,[0,d.substring(0,c)]),b[a-1][1]=f.substring(0,f.length-c),b[a+1][1]=d.substring(c),a++}else if(e>=f.length/2||e>=d.length/2)b.splice(a,0,[0,f.substring(0,e)]),b[a-1]=[1,d.substring(0,d.length-e)],b[a+1]=[-1,f.substring(e)],a++;a++}a++}};a.prototype.diff_cleanupSemanticLossless=function(d){function h(d,e){if(!d||!e)return 6;var b=d.charAt(d.length-1),c=e.charAt(0),f=b.match(a.nonAlphaNumericRegex_),i=c.match(a.nonAlphaNumericRegex_),g=f&&b.match(a.whitespaceRegex_),h=i&&c.match(a.whitespaceRegex_),b=g&&b.match(a.linebreakRegex_),c=h&&c.match(a.linebreakRegex_),j=b&&d.match(a.blanklineEndRegex_),k=c&&e.match(a.blanklineStartRegex_);return j||k?5:b||c?4:f&&!g&&h?3:g||h?2:f||i?1:0}for(var b=1;b<d.length-1;){if(d[b-1][0]==0&&d[b+1][0]==0){var e=d[b-1][1],c=d[b][1],f=d[b+1][1],g=this.diff_commonSuffix(e,c);if(g)var i=c.substring(c.length-g),e=e.substring(0,e.length-g),c=i+c.substring(0,c.length-g),f=i+f;for(var g=e,i=c,j=f,k=h(e,c)+h(c,f);c.charAt(0)===f.charAt(0);){e+=c.charAt(0);var c=c.substring(1)+f.charAt(0),f=f.substring(1),l=h(e,c)+h(c,f);l>=k&&(k=l,g=e,i=c,j=f)}d[b-1][1]!=g&&(g?d[b-1][1]=g:(d.splice(b-1,1),b--),d[b][1]=i,j?d[b+1][1]=j:(d.splice(b+1,1),b--))}b++}};a.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/;a.whitespaceRegex_=/\s/;a.linebreakRegex_=/[\r\n]/;a.blanklineEndRegex_=/\n\r?\n$/;a.blanklineStartRegex_=/^\r?\n\r?\n/;a.prototype.diff_cleanupEfficiency=function(b){for(var j=false,g=[],a=0,f="",c=0,h=false,i=false,e=false,d=false;c<b.length;){if(b[c][0]==0)b[c][1].length<this.Diff_EditCost&&(e||d)?(g[a++]=c,h=e,i=d,f=b[c][1]):(a=0,f=""),e=d=false;else if(b[c][0]==-1?d=true:e=true,f&&(h&&i&&e&&d||f.length<this.Diff_EditCost/2&&h+i+e+d==3))b.splice(g[a-1],0,[-1,f]),b[g[a-1]+1][0]=1,a--,f="",h&&i?(e=d=true,a=0):(a--,c=a>0?g[a-1]:-1,e=d=false),j=true;c++}j&&this.diff_cleanupMerge(b)};a.prototype.diff_cleanupMerge=function(b){b.push([0,""]);for(var a=0,c=0,d=0,f="",e="",g;a<b.length;)switch(b[a][0]){case 1:d++;e+=b[a][1];a++;break;case-1:c++;f+=b[a][1];a++;break;case 0:c+d>1?(c!==0&&d!==0&&(g=this.diff_commonPrefix(e,f),g!==0&&(a-c-d>0&&b[a-c-d-1][0]==0?b[a-c-d-1][1]+=e.substring(0,g):(b.splice(0,0,[0,e.substring(0,g)]),a++),e=e.substring(g),f=f.substring(g)),g=this.diff_commonSuffix(e,f),g!==0&&(b[a][1]=e.substring(e.length-g)+b[a][1],e=e.substring(0,e.length-g),f=f.substring(0,f.length-g))),c===0?b.splice(a-c-d,c+d,[1,e]):d===0?b.splice(a-c-d,c+d,[-1,f]):b.splice(a-c-d,c+d,[-1,f],[1,e]),a=a-c-d+(c?1:0)+(d?1:0)+1):a!==0&&b[a-1][0]==0?(b[a-1][1]+=b[a][1],b.splice(a,1)):a++,c=d=0,e=f=""}b[b.length-1][1]===""&&b.pop();c=false;for(a=1;a<b.length-1;)b[a-1][0]==0&&b[a+1][0]==0&&(b[a][1].substring(b[a][1].length-b[a-1][1].length)==b[a-1][1]?(b[a][1]=b[a-1][1]+b[a][1].substring(0,b[a][1].length-b[a-1][1].length),b[a+1][1]=b[a-1][1]+b[a+1][1],b.splice(a-1,1),c=true):b[a][1].substring(0,b[a+1][1].length)==b[a+1][1]&&(b[a-1][1]+=b[a+1][1],b[a][1]=b[a][1].substring(b[a+1][1].length)+b[a+1][1],b.splice(a+1,1),c=true)),a++;c&&this.diff_cleanupMerge(b)};a.prototype.diff_xIndex=function(b,e){for(var c=0,f=0,g=0,d=0,a=0;a<b.length;a++){b[a][0]!==1&&(c+=b[a][1].length);b[a][0]!==-1&&(f+=b[a][1].length);if(c>e)break;g=c;d=f}return b.length!=a&&b[a][0]===-1?d:d+(e-g)};a.prototype.diff_prettyHtml=function(d){for(var b=[],e=/&/g,f=/</g,g=/>/g,h=/\n/g,a=0;a<d.length;a++){var i=d[a][0],c=d[a][1],c=c.replace(e,"&amp;").replace(f,"&lt;").replace(g,"&gt;").replace(h,"&para;<br>");switch(i){case 1:b[a]='<ins style="background:#e6ffe6;">'+c+"</ins>";break;case-1:b[a]='<del style="background:#ffe6e6;">'+c+"</del>";break;case 0:b[a]="<span>"+c+"</span>"}}return b.join("")};a.prototype.diff_text1=function(b){for(var c=[],a=0;a<b.length;a++)b[a][0]!==1&&(c[a]=b[a][1]);return c.join("")};a.prototype.diff_text2=function(b){for(var c=[],a=0;a<b.length;a++)b[a][0]!==-1&&(c[a]=b[a][1]);return c.join("")};a.prototype.diff_levenshtein=function(d){for(var e=0,a=0,b=0,c=0;c<d.length;c++){var g=d[c][0],f=d[c][1];switch(g){case 1:a+=f.length;break;case-1:b+=f.length;break;case 0:e+=Math.max(a,b),b=a=0}}e+=Math.max(a,b);return e};a.prototype.diff_toDelta=function(b){for(var c=[],a=0;a<b.length;a++)switch(b[a][0]){case 1:c[a]="+"+encodeURI(b[a][1]);break;case-1:c[a]="-"+b[a][1].length;break;case 0:c[a]="="+b[a][1].length}return c.join("\t").replace(/%20/g," ")};a.prototype.diff_fromDelta=function(f,i){for(var d=[],g=0,e=0,c=i.split(/\t/g),a=0;a<c.length;a++){var b=c[a].substring(1);switch(c[a].charAt(0)){case"+":try{d[g++]=[1,decodeURI(b)]}catch(j){throw Error("Illegal escape in diff_fromDelta: "+b);}break;case"-":case"=":var h=parseInt(b,10);if(isNaN(h)||h<0)throw Error("Invalid number in diff_fromDelta: "+b);b=f.substring(e,e+=h);c[a].charAt(0)=="="?d[g++]=[0,b]:d[g++]=[-1,b];break;default:if(c[a])throw Error("Invalid diff operation in diff_fromDelta: "+c[a]);}}if(e!=f.length)throw Error("Delta length ("+e+") does not equal source text length ("+f.length+").");return d};a.prototype.match_main=function(b,c,a){if(b==null||c==null||a==null)throw Error("Null input. (match_main)");a=Math.max(0,Math.min(a,b.length));return b==c?0:b.length?b.substring(a,a+c.length)==c?a:this.match_bitap_(b,c,a):-1};a.prototype.match_bitap_=function(i,c,d){function j(e,f){var a=e/c.length,b=Math.abs(d-f);return!n.Match_Distance?b?1:a:a+b/n.Match_Distance}if(c.length>this.Match_MaxBits)throw Error("Pattern too long for this browser.");var o=this.match_alphabet_(c),n=this,f=this.Match_Threshold,e=i.indexOf(c,d);e!=-1&&(f=Math.min(j(0,e),f),e=i.lastIndexOf(c,d+c.length),e!=-1&&(f=Math.min(j(0,e),f)));for(var p=1<<c.length-1,e=-1,g,a,l=c.length+i.length,m,h=0;h<c.length;h++){g=0;for(a=l;g<a;)j(h,d+a)<=f?g=a:l=a,a=Math.floor((l-g)/2+g);l=a;g=Math.max(1,d-a+1);var b=Math.min(d+a,i.length)+c.length;a=Array(b+2);for(a[b+1]=(1<<h)-1;b>=g;b--){var k=o[i.charAt(b-1)];a[b]=h===0?(a[b+1]<<1|1)&k:(a[b+1]<<1|1)&k|(m[b+1]|m[b])<<1|1|m[b+1];if(a[b]&p&&(k=j(h,b-1),k<=f))if(f=k,e=b-1,e>d)g=Math.max(1,2*d-e);else break}if(j(h+1,d)>f)break;m=a}return e};a.prototype.match_alphabet_=function(b){for(var c={},a=0;a<b.length;a++)c[b.charAt(a)]=0;for(a=0;a<b.length;a++)c[b.charAt(a)]|=1<<b.length-a-1;return c};a.prototype.patch_addContext_=function(a,d){if(d.length!=0){for(var b=d.substring(a.start2,a.start2+a.length1),c=0;d.indexOf(b)!=d.lastIndexOf(b)&&b.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)c+=this.Patch_Margin,b=d.substring(a.start2-c,a.start2+a.length1+c);c+=this.Patch_Margin;(b=d.substring(a.start2-c,a.start2))&&a.diffs.unshift([0,b]);(c=d.substring(a.start2+a.length1,a.start2+a.length1+c))&&a.diffs.push([0,c]);a.start1-=b.length;a.start2-=b.length;a.length1+=b.length+c.length;a.length2+=b.length+c.length}};a.prototype.patch_make=function(b,c,f){var d;if(typeof b=="string"&&typeof c=="string"&&typeof f=="undefined")d=b,c=this.diff_main(d,c,true),c.length>2&&(this.diff_cleanupSemantic(c),this.diff_cleanupEfficiency(c));else if(b&&typeof b=="object"&&typeof c=="undefined"&&typeof f=="undefined")c=b,d=this.diff_text1(c);else if(typeof b=="string"&&c&&typeof c=="object"&&typeof f=="undefined")d=b;else if(typeof b=="string"&&typeof c=="string"&&f&&typeof f=="object")d=b,c=f;else throw Error("Unknown call format to patch_make.");if(c.length===0)return[];for(var f=[],b=new a.patch_obj,g=0,k=0,i=0,l=d,h=0;h<c.length;h++){var j=c[h][0],e=c[h][1];if(!g&&j!==0)b.start1=k,b.start2=i;switch(j){case 1:b.diffs[g++]=c[h];b.length2+=e.length;d=d.substring(0,i)+e+d.substring(i);break;case-1:b.length1+=e.length;b.diffs[g++]=c[h];d=d.substring(0,i)+d.substring(i+e.length);break;case 0:e.length<=2*this.Patch_Margin&&g&&c.length!=h+1?(b.diffs[g++]=c[h],b.length1+=e.length,b.length2+=e.length):e.length>=2*this.Patch_Margin&&g&&(this.patch_addContext_(b,l),f.push(b),b=new a.patch_obj,g=0,l=d,k=i)}j!==1&&(k+=e.length);j!==-1&&(i+=e.length)}g&&(this.patch_addContext_(b,l),f.push(b));return f};a.prototype.patch_deepCopy=function(f){for(var g=[],d=0;d<f.length;d++){var c=f[d],b=new a.patch_obj;b.diffs=[];for(var e=0;e<c.diffs.length;e++)b.diffs[e]=c.diffs[e].slice();b.start1=c.start1;b.start2=c.start2;b.length1=c.length1;b.length2=c.length2;g[d]=b}return g};a.prototype.patch_apply=function(d,a){if(d.length==0)return[a,[]];var d=this.patch_deepCopy(d),i=this.patch_addPadding(d),a=i+a+i;this.patch_splitMax(d);for(var l=0,j=[],e=0;e<d.length;e++){var f=d[e].start2+l,c=this.diff_text1(d[e].diffs),b,g=-1;if(c.length>this.Match_MaxBits){if(b=this.match_main(a,c.substring(0,this.Match_MaxBits),f),b!=-1&&(g=this.match_main(a,c.substring(c.length-this.Match_MaxBits),f+c.length-this.Match_MaxBits),g==-1||b>=g))b=-1}else b=this.match_main(a,c,f);if(b==-1)j[e]=false,l-=d[e].length2-d[e].length1;else if(j[e]=true,l=b-f,f=g==-1?a.substring(b,b+c.length):a.substring(b,g+this.Match_MaxBits),c==f)a=a.substring(0,b)+this.diff_text2(d[e].diffs)+a.substring(b+c.length);else if(f=this.diff_main(c,f,false),c.length>this.Match_MaxBits&&this.diff_levenshtein(f)/c.length>this.Patch_DeleteThreshold)j[e]=false;else{this.diff_cleanupSemanticLossless(f);for(var c=0,k,g=0;g<d[e].diffs.length;g++){var h=d[e].diffs[g];h[0]!==0&&(k=this.diff_xIndex(f,c));h[0]===1?a=a.substring(0,b+k)+h[1]+a.substring(b+k):h[0]===-1&&(a=a.substring(0,b+k)+a.substring(b+this.diff_xIndex(f,c+h[1].length)));h[0]!==-1&&(c+=h[1].length)}}}a=a.substring(i.length,a.length-i.length);return[a,j]};a.prototype.patch_addPadding=function(e){for(var c=this.Patch_Margin,f="",a=1;a<=c;a++)f+=String.fromCharCode(a);for(a=0;a<e.length;a++)e[a].start1+=c,e[a].start2+=c;var a=e[0],b=a.diffs;if(b.length==0||b[0][0]!=0)b.unshift([0,f]),a.start1-=c,a.start2-=c,a.length1+=c,a.length2+=c;else if(c>b[0][1].length){var d=c-b[0][1].length;b[0][1]=f.substring(b[0][1].length)+b[0][1];a.start1-=d;a.start2-=d;a.length1+=d;a.length2+=d}a=e[e.length-1];b=a.diffs;b.length==0||b[b.length-1][0]!=0?(b.push([0,f]),a.length1+=c,a.length2+=c):c>b[b.length-1][1].length&&(d=c-b[b.length-1][1].length,b[b.length-1][1]+=f.substring(0,d),a.length1+=d,a.length2+=d);return f};a.prototype.patch_splitMax=function(g){for(var h=this.Match_MaxBits,f=0;f<g.length;f++)if(g[f].length1>h){var e=g[f];g.splice(f--,1);for(var j=e.start1,k=e.start2,d="";e.diffs.length!==0;){var b=new a.patch_obj,i=true;b.start1=j-d.length;b.start2=k-d.length;if(d!=="")b.length1=b.length2=d.length,b.diffs.push([0,d]);for(;e.diffs.length!==0&&b.length1<h-this.Patch_Margin;){var d=e.diffs[0][0],c=e.diffs[0][1];d===1?(b.length2+=c.length,k+=c.length,b.diffs.push(e.diffs.shift()),i=false):d===-1&&b.diffs.length==1&&b.diffs[0][0]==0&&c.length>2*h?(b.length1+=c.length,j+=c.length,i=false,b.diffs.push([d,c]),e.diffs.shift()):(c=c.substring(0,h-b.length1-this.Patch_Margin),b.length1+=c.length,j+=c.length,d===0?(b.length2+=c.length,k+=c.length):i=false,b.diffs.push([d,c]),c==e.diffs[0][1]?e.diffs.shift():e.diffs[0][1]=e.diffs[0][1].substring(c.length))}d=this.diff_text2(b.diffs);d=d.substring(d.length-this.Patch_Margin);c=this.diff_text1(e.diffs).substring(0,this.Patch_Margin);c!==""&&(b.length1+=c.length,b.length2+=c.length,b.diffs.length!==0&&b.diffs[b.diffs.length-1][0]===0?b.diffs[b.diffs.length-1][1]+=c:b.diffs.push([0,c]));i||g.splice(++f,0,b)}}};a.prototype.patch_toText=function(b){for(var c=[],a=0;a<b.length;a++)c[a]=b[a];return c.join("")};a.prototype.patch_fromText=function(d){var g=[];if(!d)return g;for(var d=d.split("\n"),e=0,h=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;e<d.length;){var b=d[e].match(h);if(!b)throw Error("Invalid patch string: "+d[e]);var c=new a.patch_obj;g.push(c);c.start1=parseInt(b[1],10);b[2]===""?(c.start1--,c.length1=1):b[2]=="0"?c.length1=0:(c.start1--,c.length1=parseInt(b[2],10));c.start2=parseInt(b[3],10);b[4]===""?(c.start2--,c.length2=1):b[4]=="0"?c.length2=0:(c.start2--,c.length2=parseInt(b[4],10));for(e++;e<d.length;){b=d[e].charAt(0);try{var f=decodeURI(d[e].substring(1))}catch(i){throw Error("Illegal escape in patch_fromText: "+f);}if(b=="-")c.diffs.push([-1,f]);else if(b=="+")c.diffs.push([1,f]);else if(b==" ")c.diffs.push([0,f]);else if(b=="@")break;else if(b!=="")throw Error('Invalid patch mode "'+b+'" in: '+f);e++}}return g};a.patch_obj=function(){this.diffs=[];this.start2=this.start1=null;this.length2=this.length1=0};a.patch_obj.prototype.toString=function(){var b,a;b=this.length1===0?this.start1+",0":this.length1==1?this.start1+1:this.start1+1+","+this.length1;a=this.length2===0?this.start2+",0":this.length2==1?this.start2+1:this.start2+1+","+this.length2;b=["@@ -"+b+" +"+a+" @@\n"];var c;for(a=0;a<this.diffs.length;a++){switch(this.diffs[a][0]){case 1:c="+";break;case-1:c="-";break;case 0:c=" "}b[a+1]=c+encodeURI(this.diffs[a][1])+"\n"}return b.join("").replace(/%20/g," ")};this.diff_match_patch=a;this.DIFF_DELETE=-1;this.DIFF_INSERT=1;this.DIFF_EQUAL=0})()